function BigInteger(e,t,n){e!=null&&("number"==typeof e?this.fromNumber(e,t,n):t==null&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function nbi(){return new BigInteger(null)}function am1(e,t,n,r,i,s){while(--s>=0){var o=t*this[e++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=o&67108863}return i}function am2(e,t,n,r,i,s){var o=t&32767,u=t>>15;while(--s>=0){var a=this[e]&32767,f=this[e++]>>15,l=u*a+f*o;a=o*a+((l&32767)<<15)+n[r]+(i&1073741823),i=(a>>>30)+(l>>>15)+u*f+(i>>>30),n[r++]=a&1073741823}return i}function am3(e,t,n,r,i,s){var o=t&16383,u=t>>14;while(--s>=0){var a=this[e]&16383,f=this[e++]>>14,l=u*a+f*o;a=o*a+((l&16383)<<14)+n[r]+i,i=(a>>28)+(l>>14)+u*f,n[r++]=a&268435455}return i}function int2char(e){return BI_RM.charAt(e)}function intAt(e,t){var n=BI_RC[e.charCodeAt(t)];return n==null?-1:n}function bnpCopyTo(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function bnpFromInt(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0}function nbv(e){var t=nbi();return t.fromInt(e),t}function bnpFromString(e,t){var n;if(t==16)n=4;else if(t==8)n=3;else if(t==256)n=8;else if(t==2)n=1;else if(t==32)n=5;else{if(t!=4){this.fromRadix(e,t);return}n=2}this.t=0,this.s=0;var r=e.length,i=!1,s=0;while(--r>=0){var o=n==8?e[r]&255:intAt(e,r);if(o<0){e.charAt(r)=="-"&&(i=!0);continue}i=!1,s==0?this[this.t++]=o:s+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,s+=n,s>=this.DB&&(s-=this.DB)}n==8&&(e[0]&128)!=0&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){var e=this.s&this.DM;while(this.t>0&&this[this.t-1]==e)--this.t}function bnToString(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else{if(e!=4)return this.toRadix(e);t=2}var n=(1<<t)-1,r,i=!1,s="",o=this.t,u=this.DB-o*this.DB%t;if(o-->0){u<this.DB&&(r=this[o]>>u)>0&&(i=!0,s=int2char(r));while(o>=0)u<t?(r=(this[o]&(1<<u)-1)<<t-u,r|=this[--o]>>(u+=this.DB-t)):(r=this[o]>>(u-=t)&n,u<=0&&(u+=this.DB,--o)),r>0&&(i=!0),i&&(s+=int2char(r))}return i?s:"0"}function bnNegate(){var e=nbi();return BigInteger.ZERO.subTo(this,e),e}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(e){var t=this.s-e.s;if(t!=0)return t;var n=this.t;t=n-e.t;if(t!=0)return this.s<0?-t:t;while(--n>=0)if((t=this[n]-e[n])!=0)return t;return 0}function nbits(e){var t=1,n;return(n=e>>>16)!=0&&(e=n,t+=16),(n=e>>8)!=0&&(e=n,t+=8),(n=e>>4)!=0&&(e=n,t+=4),(n=e>>2)!=0&&(e=n,t+=2),(n=e>>1)!=0&&(e=n,t+=1),t}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function bnpDRShiftTo(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function bnpLShiftTo(e,t){var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,s=Math.floor(e/this.DB),o=this.s<<n&this.DM,u;for(u=this.t-1;u>=0;--u)t[u+s+1]=this[u]>>r|o,o=(this[u]&i)<<n;for(u=s-1;u>=0;--u)t[u]=0;t[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()}function bnpRShiftTo(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}var r=e%this.DB,i=this.DB-r,s=(1<<r)-1;t[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&s)<<i,t[o-n]=this[o]>>r;r>0&&(t[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}function bnpSubTo(e,t){var n=0,r=0,i=Math.min(e.t,this.t);while(n<i)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){r-=e.s;while(n<this.t)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(n<e.t)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()}function bnpMultiplyTo(e,t){var n=this.abs(),r=e.abs(),i=n.t;t.t=i+r.t;while(--i>=0)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&BigInteger.ZERO.subTo(t,t)}function bnpSquareTo(e){var t=this.abs(),n=e.t=2*t.t;while(--n>=0)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function bnpDivRemTo(e,t,n){var r=e.abs();if(r.t<=0)return;var i=this.abs();if(i.t<r.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=nbi());var s=nbi(),o=this.s,u=e.s,a=this.DB-nbits(r[r.t-1]);a>0?(r.lShiftTo(a,s),i.lShiftTo(a,n)):(r.copyTo(s),i.copyTo(n));var f=s.t,l=s[f-1];if(l==0)return;var c=l*(1<<this.F1)+(f>1?s[f-2]>>this.F2:0),h=this.FV/c,p=(1<<this.F1)/c,d=1<<this.F2,v=n.t,m=v-f,g=t==null?nbi():t;s.dlShiftTo(m,g),n.compareTo(g)>=0&&(n[n.t++]=1,n.subTo(g,n)),BigInteger.ONE.dlShiftTo(f,g),g.subTo(s,s);while(s.t<f)s[s.t++]=0;while(--m>=0){var y=n[--v]==l?this.DM:Math.floor(n[v]*h+(n[v-1]+d)*p);if((n[v]+=s.am(0,y,n,m,0,f))<y){s.dlShiftTo(m,g),n.subTo(g,n);while(n[v]<--y)n.subTo(g,n)}}t!=null&&(n.drShiftTo(f,t),o!=u&&BigInteger.ZERO.subTo(t,t)),n.t=f,n.clamp(),a>0&&n.rShiftTo(a,n),o<0&&BigInteger.ZERO.subTo(n,n)}function bnMod(e){var t=nbi();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(BigInteger.ZERO)>0&&e.subTo(t,t),t}function Classic(e){this.m=e}function cConvert(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function cRevert(e){return e}function cReduce(e){e.divRemTo(this.m,null,e)}function cMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function cSqrTo(e,t){e.squareTo(t),this.reduce(t)}function bnpInvDigit(){if(this.t<1)return 0;var e=this[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Montgomery(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function montConvert(e){var t=nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(BigInteger.ZERO)>0&&this.m.subTo(t,t),t}function montRevert(e){var t=nbi();return e.copyTo(t),this.reduce(t),t}function montReduce(e){while(e.t<=this.mt2)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=e[t]&32767,r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;n=t+this.m.t,e[n]+=this.m.am(0,r,e,t,0,this.m.t);while(e[n]>=e.DV)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function montSqrTo(e,t){e.squareTo(t),this.reduce(t)}function montMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(e,t){if(e>4294967295||e<1)return BigInteger.ONE;var n=nbi(),r=nbi(),i=t.convert(this),s=nbits(e)-1;i.copyTo(n);while(--s>=0){t.sqrTo(n,r);if((e&1<<s)>0)t.mulTo(r,i,n);else{var o=n;n=r,r=o}}return t.revert(n)}function bnModPowInt(e,t){var n;return e<256||t.isEven()?n=new Classic(t):n=new Montgomery(t),this.exp(e,n)}function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;n=0;for(t=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[n],this.S[n]=r;this.i=0,this.j=0}function ARC4next(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}function rng_seed_int(e){rng_pool[rng_pptr++]^=e&255,rng_pool[rng_pptr++]^=e>>8&255,rng_pool[rng_pptr++]^=e>>16&255,rng_pool[rng_pptr++]^=e>>24&255,rng_pptr>=rng_psize&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}function rng_get_byte(){if(rng_state==null){rng_seed_time(),rng_state=prng_newstate(),rng_state.init(rng_pool);for(rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(e){var t;for(t=0;t<e.length;++t)e[t]=rng_get_byte()}function SecureRandom(){}function parseBigInt(e,t){return new BigInteger(e,t)}function linebrk(e,t){var n="",r=0;while(r+t<e.length)n+=e.substring(r,r+t)+"\n",r+=t;return n+e.substring(r,e.length)}function byte2Hex(e){return e<16?"0"+e.toString(16):e.toString(16)}function pkcs1pad2(e,t){if(t<e.length+11)return alert("Message too long for RSA"),null;var n=new Array,r=e.length-1;while(r>=0&&t>0){var i=e.charCodeAt(r--);i<128?n[--t]=i:i>127&&i<2048?(n[--t]=i&63|128,n[--t]=i>>6|192):(n[--t]=i&63|128,n[--t]=i>>6&63|128,n[--t]=i>>12|224)}n[--t]=0;var s=new SecureRandom,o=new Array;while(t>2){o[0]=0;while(o[0]==0)s.nextBytes(o);n[--t]=o[0]}return n[--t]=2,n[--t]=0,new BigInteger(n)}function RSAKey(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function RSASetPublic(e,t){e!=null&&t!=null&&e.length>0&&t.length>0?(this.n=parseBigInt(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function RSADoPublic(e){return e.modPowInt(this.e,this.n)}function RSAEncrypt(e){var t=pkcs1pad2(e,this.n.bitLength()+7>>3);if(t==null)return null;var n=this.doPublic(t);if(n==null)return null;var r=n.toString(16);return(r.length&1)==0?r:"0"+r}var JSON;JSON||(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var CryptoJS=CryptoJS||function(e,t){var n={},r=n.lib={},i=r.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=r.WordArray=i.extend({init:function(e,n){e=this.words=e||[],n!=t?this.sigBytes=n:this.sigBytes=e.length*4},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;this.clamp();if(r%4)for(var s=0;s<i;s++){var o=n[s>>>2]>>>24-s%4*8&255;t[r+s>>>2]|=o<<24-(r+s)%4*8}else if(n.length>65535)for(var s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];else t.push.apply(t,n);return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){var n=[];for(var r=0;r<t;r+=4)n.push(e.random()*4294967296|0);return new s.init(n,t)}}),o=n.enc={},u=o.Hex={stringify:function(e){var t=e.words,n=e.sigBytes,r=[];for(var i=0;i<n;i++){var s=t[i>>>2]>>>24-i%4*8&255;r.push((s>>>4).toString(16)),r.push((s&15).toString(16))}return r.join("")},parse:function(e){var t=e.length,n=[];for(var r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},a=o.Latin1={stringify:function(e){var t=e.words,n=e.sigBytes,r=[];for(var i=0;i<n;i++){var s=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){var t=e.length,n=[];for(var r=0;r<t;r++)n[r>>>2]|=(e.charCodeAt(r)&255)<<24-r%4*8;return new s.init(n,t)}},f=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(a.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return a.parse(unescape(encodeURIComponent(e)))}},l=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){typeof e=="string"&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,u=o*4,a=i/u;t?a=e.ceil(a):a=e.max((a|0)-this._minBufferSize,0);var f=a*o,l=e.min(f*4,i);if(f){for(var c=0;c<f;c+=o)this._doProcessBlock(r,c);var h=r.splice(0,f);n.sigBytes-=l}return new s.init(h,l)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),c=r.Hasher=l.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return(new e.init(n)).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return(new h.HMAC.init(e,n)).finalize(t)}}}),h=n.algo={};return n}(Math);(function(){var e=CryptoJS,t=e.lib,n=t.WordArray,r=e.enc,i=r.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();var i=[];for(var s=0;s<n;s+=3){var o=t[s>>>2]>>>24-s%4*8&255,u=t[s+1>>>2]>>>24-(s+1)%4*8&255,a=t[s+2>>>2]>>>24-(s+2)%4*8&255,f=o<<16|u<<8|a;for(var l=0;l<4&&s+l*.75<n;l++)i.push(r.charAt(f>>>6*(3-l)&63))}var c=r.charAt(64);if(c)while(i.length%4)i.push(c);return i.join("")},parse:function(e){var t=e.length,r=this._map,i=r.charAt(64);if(i){var s=e.indexOf(i);s!=-1&&(t=s)}var o=[],u=0;for(var a=0;a<t;a++)if(a%4){var f=r.indexOf(e.charAt(a-1))<<a%4*2,l=r.indexOf(e.charAt(a))>>>6-a%4*2;o[u>>>2]|=(f|l)<<24-u%4*8,u++}return n.create(o,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),CryptoJS.lib.Cipher||function(e){var t=CryptoJS,n=t.lib,r=n.Base,i=n.WordArray,s=n.BufferedBlockAlgorithm,o=t.enc,u=o.Utf8,a=o.Base64,f=t.algo,l=f.EvpKDF,c=n.Cipher=s.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return typeof e=="string"?N:S}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),h=n.StreamCipher=c.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),p=t.mode={},d=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),v=p.CBC=function(){function n(t,n,r){var i=this._iv;if(i){var s=i;this._iv=e}else var s=this._prevBlock;for(var o=0;o<r;o++)t[n+o]^=s[o]}var t=d.extend();return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize;n.call(this,e,t,i),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,s=e.slice(t,t+i);r.decryptBlock(e,t),n.call(this,e,t,i),this._prevBlock=s}}),t}(),m=t.pad={},g=m.Pkcs7={pad:function(e,t){var n=t*4,r=n-e.sigBytes%n,s=r<<24|r<<16|r<<8|r,o=[];for(var u=0;u<r;u+=4)o.push(s);var a=i.create(o,r);e.concat(a)},unpad:function(e){var t=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=t}},y=n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:v,padding:g}),reset:function(){c.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else{var r=n.createDecryptor;this._minBufferSize=1}this._mode=r.call(n,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),b=n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),w=t.format={},E=w.OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var r=i.create([1398893684,1701076831]).concat(n).concat(t);else var r=t;return r.toString(a)},parse:function(e){var t=a.parse(e),n=t.words;if(n[0]==1398893684&&n[1]==1701076831){var r=i.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return b.create({ciphertext:t,salt:r})}},S=n.SerializableCipher=r.extend({cfg:r.extend({format:E}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),s=i.finalize(t),o=i.cfg;return b.create({ciphertext:s,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=e.createDecryptor(n,r).finalize(t.ciphertext);return i},_parse:function(e,t){return typeof e=="string"?t.parse(e,this):e}}),x=t.kdf={},T=x.OpenSSL={execute:function(e,t,n,r){r||(r=i.random(8));var s=l.create({keySize:t+n}).compute(e,r),o=i.create(s.words.slice(t),n*4);return s.sigBytes=t*4,b.create({key:s,iv:o,salt:r})}},N=n.PasswordBasedCipher=S.extend({cfg:S.cfg.extend({kdf:T}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=r.kdf.execute(n,e.keySize,e.ivSize);r.iv=i.iv;var s=S.encrypt.call(this,e,t,i.key,r);return s.mixIn(i),s},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);r.iv=i.iv;var s=S.decrypt.call(this,e,t,i.key,r);return s}})}(),function(){var e=CryptoJS,t=e.lib,n=t.BlockCipher,r=e.algo,i=[],s=[],o=[],u=[],a=[],f=[],l=[],c=[],h=[],p=[];(function(){var e=[];for(var t=0;t<256;t++)t<128?e[t]=t<<1:e[t]=t<<1^283;var n=0,r=0;for(var t=0;t<256;t++){var d=r^r<<1^r<<2^r<<3^r<<4;d=d>>>8^d&255^99,i[n]=d,s[d]=n;var v=e[n],m=e[v],g=e[m],y=e[d]*257^d*16843008;o[n]=y<<24|y>>>8,u[n]=y<<16|y>>>16,a[n]=y<<8|y>>>24,f[n]=y;var y=g*16843009^m*65537^v*257^n*16843008;l[d]=y<<24|y>>>8,c[d]=y<<16|y>>>16,h[d]=y<<8|y>>>24,p[d]=y,n?(n=v^e[e[e[g^v]]],r^=e[e[r]]):n=r=1}})();var d=[0,1,2,4,8,16,32,64,128,27,54],v=r.AES=n.extend({_doReset:function(){var e=this._key,t=e.words,n=e.sigBytes/4,r=this._nRounds=n+6,s=(r+1)*4,o=this._keySchedule=[];for(var u=0;u<s;u++)if(u<n)o[u]=t[u];else{var a=o[u-1];u%n?n>6&&u%n==4&&(a=i[a>>>24]<<24|i[a>>>16&255]<<16|i[a>>>8&255]<<8|i[a&255]):(a=a<<8|a>>>24,a=i[a>>>24]<<24|i[a>>>16&255]<<16|i[a>>>8&255]<<8|i[a&255],a^=d[u/n|0]<<24),o[u]=o[u-n]^a}var f=this._invKeySchedule=[];for(var v=0;v<s;v++){var u=s-v;if(v%4)var a=o[u];else var a=o[u-4];v<4||u<=4?f[v]=a:f[v]=l[i[a>>>24]]^c[i[a>>>16&255]]^h[i[a>>>8&255]]^p[i[a&255]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,u,a,f,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,c,h,p,s);var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,s,o,u){var a=this._nRounds,f=e[t]^n[0],l=e[t+1]^n[1],c=e[t+2]^n[2],h=e[t+3]^n[3],p=4;for(var d=1;d<a;d++){var v=r[f>>>24]^i[l>>>16&255]^s[c>>>8&255]^o[h&255]^n[p++],m=r[l>>>24]^i[c>>>16&255]^s[h>>>8&255]^o[f&255]^n[p++],g=r[c>>>24]^i[h>>>16&255]^s[f>>>8&255]^o[l&255]^n[p++],y=r[h>>>24]^i[f>>>16&255]^s[l>>>8&255]^o[c&255]^n[p++];f=v,l=m,c=g,h=y}var v=(u[f>>>24]<<24|u[l>>>16&255]<<16|u[c>>>8&255]<<8|u[h&255])^n[p++],m=(u[l>>>24]<<24|u[c>>>16&255]<<16|u[h>>>8&255]<<8|u[f&255])^n[p++],g=(u[c>>>24]<<24|u[h>>>16&255]<<16|u[f>>>8&255]<<8|u[l&255])^n[p++],y=(u[h>>>24]<<24|u[f>>>16&255]<<16|u[l>>>8&255]<<8|u[c&255])^n[p++];e[t]=v,e[t+1]=m,e[t+2]=g,e[t+3]=y},keySize:8});e.AES=n._createHelper(v)}(),function(e){function a(e,t,n,r,i,s,o){var u=e+(t&n|~t&r)+i+o;return(u<<s|u>>>32-s)+t}function f(e,t,n,r,i,s,o){var u=e+(t&r|n&~r)+i+o;return(u<<s|u>>>32-s)+t}function l(e,t,n,r,i,s,o){var u=e+(t^n^r)+i+o;return(u<<s|u>>>32-s)+t}function c(e,t,n,r,i,s,o){var u=e+(n^(t|~r))+i+o;return(u<<s|u>>>32-s)+t}var t=CryptoJS,n=t.lib,r=n.WordArray,i=n.Hasher,s=t.algo,o=[];(function(){for(var t=0;t<64;t++)o[t]=e.abs(e.sin(t+1))*4294967296|0})();var u=s.MD5=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360}var s=this._hash.words,u=e[t+0],h=e[t+1],p=e[t+2],d=e[t+3],v=e[t+4],m=e[t+5],g=e[t+6],y=e[t+7],b=e[t+8],w=e[t+9],E=e[t+10],S=e[t+11],x=e[t+12],N=e[t+13],C=e[t+14],k=e[t+15],L=s[0],A=s[1],O=s[2],M=s[3];L=a(L,A,O,M,u,7,o[0]),M=a(M,L,A,O,h,12,o[1]),O=a(O,M,L,A,p,17,o[2]),A=a(A,O,M,L,d,22,o[3]),L=a(L,A,O,M,v,7,o[4]),M=a(M,L,A,O,m,12,o[5]),O=a(O,M,L,A,g,17,o[6]),A=a(A,O,M,L,y,22,o[7]),L=a(L,A,O,M,b,7,o[8]),M=a(M,L,A,O,w,12,o[9]),O=a(O,M,L,A,E,17,o[10]),A=a(A,O,M,L,S,22,o[11]),L=a(L,A,O,M,x,7,o[12]),M=a(M,L,A,O,N,12,o[13]),O=a(O,M,L,A,C,17,o[14]),A=a(A,O,M,L,k,22,o[15]),L=f(L,A,O,M,h,5,o[16]),M=f(M,L,A,O,g,9,o[17]),O=f(O,M,L,A,S,14,o[18]),A=f(A,O,M,L,u,20,o[19]),L=f(L,A,O,M,m,5,o[20]),M=f(M,L,A,O,E,9,o[21]),O=f(O,M,L,A,k,14,o[22]),A=f(A,O,M,L,v,20,o[23]),L=f(L,A,O,M,w,5,o[24]),M=f(M,L,A,O,C,9,o[25]),O=f(O,M,L,A,d,14,o[26]),A=f(A,O,M,L,b,20,o[27]),L=f(L,A,O,M,N,5,o[28]),M=f(M,L,A,O,p,9,o[29]),O=f(O,M,L,A,y,14,o[30]),A=f(A,O,M,L,x,20,o[31]),L=l(L,A,O,M,m,4,o[32]),M=l(M,L,A,O,b,11,o[33]),O=l(O,M,L,A,S,16,o[34]),A=l(A,O,M,L,C,23,o[35]),L=l(L,A,O,M,h,4,o[36]),M=l(M,L,A,O,v,11,o[37]),O=l(O,M,L,A,y,16,o[38]),A=l(A,O,M,L,E,23,o[39]),L=l(L,A,O,M,N,4,o[40]),M=l(M,L,A,O,u,11,o[41]),O=l(O,M,L,A,d,16,o[42]),A=l(A,O,M,L,g,23,o[43]),L=l(L,A,O,M,w,4,o[44]),M=l(M,L,A,O,x,11,o[45]),O=l(O,M,L,A,k,16,o[46]),A=l(A,O,M,L,p,23,o[47]),L=c(L,A,O,M,u,6,o[48]),M=c(M,L,A,O,y,10,o[49]),O=c(O,M,L,A,C,15,o[50]),A=c(A,O,M,L,m,21,o[51]),L=c(L,A,O,M,x,6,o[52]),M=c(M,L,A,O,d,10,o[53]),O=c(O,M,L,A,E,15,o[54]),A=c(A,O,M,L,h,21,o[55]),L=c(L,A,O,M,b,6,o[56]),M=c(M,L,A,O,k,10,o[57]),O=c(O,M,L,A,g,15,o[58]),A=c(A,O,M,L,N,21,o[59]),L=c(L,A,O,M,v,6,o[60]),M=c(M,L,A,O,S,10,o[61]),O=c(O,M,L,A,p,15,o[62]),A=c(A,O,M,L,w,21,o[63]),s[0]=s[0]+L|0,s[1]=s[1]+A|0,s[2]=s[2]+O|0,s[3]=s[3]+M|0},_doFinalize:function(){var t=this._data,n=t.words,r=this._nDataBytes*8,i=t.sigBytes*8;n[i>>>5]|=128<<24-i%32;var s=e.floor(r/4294967296),o=r;n[(i+64>>>9<<4)+15]=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360,n[(i+64>>>9<<4)+14]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360,t.sigBytes=(n.length+1)*4,this._process();var u=this._hash,a=u.words;for(var f=0;f<4;f++){var l=a[f];a[f]=(l<<8|l>>>24)&16711935|(l<<24|l>>>8)&4278255360}return u},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.MD5=i._createHelper(u),t.HmacMD5=i._createHmacHelper(u)}(Math),function(){var e=CryptoJS,t=e.lib,n=t.WordArray,r=t.Hasher,i=e.algo,s=[],o=i.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){var n=this._hash.words,r=n[0],i=n[1],o=n[2],u=n[3],a=n[4];for(var f=0;f<80;f++){if(f<16)s[f]=e[t+f]|0;else{var l=s[f-3]^s[f-8]^s[f-14]^s[f-16];s[f]=l<<1|l>>>31}var c=(r<<5|r>>>27)+a+s[f];f<20?c+=(i&o|~i&u)+1518500249:f<40?c+=(i^o^u)+1859775393:f<60?c+=(i&o|i&u|o&u)-1894007588:c+=(i^o^u)-899497514,a=u,u=o,o=i<<30|i>>>2,i=r,r=c}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+u|0,n[4]=n[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,n=this._nDataBytes*8,r=e.sigBytes*8;return t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),t[(r+64>>>9<<4)+15]=n,e.sigBytes=t.length*4,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(o),e.HmacSHA1=r._createHmacHelper(o)}(),function(e){var t=CryptoJS,n=t.lib,r=n.Base,i=n.WordArray,s=t.x64={},o=s.Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),u=s.WordArray=r.extend({init:function(t,n){t=this.words=t||[],n!=e?this.sigBytes=n:this.sigBytes=t.length*8},toX32:function(){var e=this.words,t=e.length,n=[];for(var r=0;r<t;r++){var s=e[r];n.push(s.high),n.push(s.low)}return i.create(n,this.sigBytes)},clone:function(){var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length;for(var i=0;i<n;i++)t[i]=t[i].clone();return e}})}(),function(e){var t=CryptoJS,n=t.lib,r=n.WordArray,i=n.Hasher,s=t.algo,o=[],u=[];(function(){function t(t){var n=e.sqrt(t);for(var r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return(e-(e|0))*4294967296|0}var r=2,i=0;while(i<64)t(r)&&(i<8&&(o[i]=n(e.pow(r,.5))),u[i]=n(e.pow(r,1/3)),i++),r++})();var a=[],f=s.SHA256=i.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(e,t){var n=this._hash.words,r=n[0],i=n[1],s=n[2],o=n[3],f=n[4],l=n[5],c=n[6],h=n[7];for(var p=0;p<64;p++){if(p<16)a[p]=e[t+p]|0;else{var d=a[p-15],v=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,m=a[p-2],g=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;a[p]=v+a[p-7]+g+a[p-16]}var y=f&l^~f&c,b=r&i^r&s^i&s,w=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),E=(f<<26|f>>>6)^(f<<21|f>>>11)^(f<<7|f>>>25),S=h+E+y+u[p]+a[p],x=w+b;h=c,c=l,l=f,f=o+S|0,o=s,s=i,i=r,r=S+x|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+o|0,n[4]=n[4]+f|0,n[5]=n[5]+l|0,n[6]=n[6]+c|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=this._nDataBytes*8,i=t.sigBytes*8;return n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=e.floor(r/4294967296),n[(i+64>>>9<<4)+15]=r,t.sigBytes=n.length*4,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(f),t.HmacSHA256=i._createHmacHelper(f)}(Math),function(){function u(){return i.create.apply(i,arguments)}var e=CryptoJS,t=e.lib,n=t.Hasher,r=e.x64,i=r.Word,s=r.WordArray,o=e.algo,a=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],f=[];(function(){for(var e=0;e<80;e++)f[e]=u()})();var l=o.SHA512=n.extend({_doReset:function(){this._hash=new s.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){var n=this._hash.words,r=n[0],i=n[1],s=n[2],o=n[3],u=n[4],l=n[5],c=n[6],h=n[7],p=r.high,d=r.low,v=i.high,m=i.low,g=s.high,y=s.low,b=o.high,w=o.low,E=u.high,S=u.low,x=l.high,T=l.low,N=c.high,C=c.low,k=h.high,L=h.low,A=p,O=d,M=v,_=m,D=g,P=y,H=b,B=w,j=E,F=S,I=x,q=T,R=N,U=C,z=k,X=L;for(var V=0;V<80;V++){var $=f[V];if(V<16)var J=$.high=e[t+V*2]|0,Q=$.low=e[t+V*2+1]|0;else{var G=f[V-15],Y=G.high,Z=G.low,et=(Y>>>1|Z<<31)^(Y>>>8|Z<<24)^Y>>>7,tt=(Z>>>1|Y<<31)^(Z>>>8|Y<<24)^(Z>>>7|Y<<25),nt=f[V-2],rt=nt.high,it=nt.low,st=(rt>>>19|it<<13)^(rt<<3|it>>>29)^rt>>>6,ot=(it>>>19|rt<<13)^(it<<3|rt>>>29)^(it>>>6|rt<<26),ut=f[V-7],at=ut.high,ft=ut.low,lt=f[V-16],ct=lt.high,ht=lt.low,Q=tt+ft,J=et+at+(Q>>>0<tt>>>0?1:0),Q=Q+ot,J=J+st+(Q>>>0<ot>>>0?1:0),Q=Q+ht,J=J+ct+(Q>>>0<ht>>>0?1:0);$.high=J,$.low=Q}var pt=j&I^~j&R,dt=F&q^~F&U,vt=A&M^A&D^M&D,mt=O&_^O&P^_&P,gt=(A>>>28|O<<4)^(A<<30|O>>>2)^(A<<25|O>>>7),yt=(O>>>28|A<<4)^(O<<30|A>>>2)^(O<<25|A>>>7),bt=(j>>>14|F<<18)^(j>>>18|F<<14)^(j<<23|F>>>9),wt=(F>>>14|j<<18)^(F>>>18|j<<14)^(F<<23|j>>>9),Et=a[V],St=Et.high,xt=Et.low,Tt=X+wt,Nt=z+bt+(Tt>>>0<X>>>0?1:0),Tt=Tt+dt,Nt=Nt+pt+(Tt>>>0<dt>>>0?1:0),Tt=Tt+xt,Nt=Nt+St+(Tt>>>0<xt>>>0?1:0),Tt=Tt+Q,Nt=Nt+J+(Tt>>>0<Q>>>0?1:0),Ct=yt+mt,kt=gt+vt+(Ct>>>0<yt>>>0?1:0);z=R,X=U,R=I,U=q,I=j,q=F,F=B+Tt|0,j=H+Nt+(F>>>0<B>>>0?1:0)|0,H=D,B=P,D=M,P=_,M=A,_=O,O=Tt+Ct|0,A=Nt+kt+(O>>>0<Tt>>>0?1:0)|0}d=r.low=d+O,r.high=p+A+(d>>>0<O>>>0?1:0),m=i.low=m+_,i.high=v+M+(m>>>0<_>>>0?1:0),y=s.low=y+P,s.high=g+D+(y>>>0<P>>>0?1:0),w=o.low=w+B,o.high=b+H+(w>>>0<B>>>0?1:0),S=u.low=S+F,u.high=E+j+(S>>>0<F>>>0?1:0),T=l.low=T+q,l.high=x+I+(T>>>0<q>>>0?1:0),C=c.low=C+U,c.high=N+R+(C>>>0<U>>>0?1:0),L=h.low=L+X,h.high=k+z+(L>>>0<X>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=this._nDataBytes*8,r=e.sigBytes*8;t[r>>>5]|=128<<24-r%32,t[(r+128>>>10<<5)+30]=Math.floor(n/4294967296),t[(r+128>>>10<<5)+31]=n,e.sigBytes=t.length*4,this._process();var i=this._hash.toX32();return i},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=n._createHelper(l),e.HmacSHA512=n._createHmacHelper(l)}(),function(e){var t=CryptoJS,n=t.lib,r=n.WordArray,i=n.Hasher,s=t.x64,o=s.Word,u=t.algo,a=[],f=[],l=[];(function(){var e=1,t=0;for(var n=0;n<24;n++){a[e+5*t]=(n+1)*(n+2)/2%64;var r=t%5,i=(2*e+3*t)%5;e=r,t=i}for(var e=0;e<5;e++)for(var t=0;t<5;t++)f[e+5*t]=t+(2*e+3*t)%5*5;var s=1;for(var u=0;u<24;u++){var c=0,h=0;for(var p=0;p<7;p++){if(s&1){var d=(1<<p)-1;d<32?h^=1<<d:c^=1<<d-32}s&128?s=s<<1^113:s<<=1}l[u]=o.create(c,h)}})();var c=[];(function(){for(var e=0;e<25;e++)c[e]=o.create()})();var h=u.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){var e=this._state=[];for(var t=0;t<25;t++)e[t]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){var n=this._state,r=this.blockSize/2;for(var i=0;i<r;i++){var s=e[t+2*i],o=e[t+2*i+1];s=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360,o=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360;var u=n[i];u.high^=o,u.low^=s}for(var h=0;h<24;h++){for(var p=0;p<5;p++){var d=0,v=0;for(var m=0;m<5;m++){var u=n[p+5*m];d^=u.high,v^=u.low}var g=c[p];g.high=d,g.low=v}for(var p=0;p<5;p++){var y=c[(p+4)%5],b=c[(p+1)%5],w=b.high,E=b.low,d=y.high^(w<<1|E>>>31),v=y.low^(E<<1|w>>>31);for(var m=0;m<5;m++){var u=n[p+5*m];u.high^=d,u.low^=v}}for(var S=1;S<25;S++){var u=n[S],x=u.high,N=u.low,C=a[S];if(C<32)var d=x<<C|N>>>32-C,v=N<<C|x>>>32-C;else var d=N<<C-32|x>>>64-C,v=x<<C-32|N>>>64-C;var k=c[f[S]];k.high=d,k.low=v}var L=c[0],A=n[0];L.high=A.high,L.low=A.low;for(var p=0;p<5;p++)for(var m=0;m<5;m++){var S=p+5*m,u=n[S],O=c[S],M=c[(p+1)%5+5*m],_=c[(p+2)%5+5*m];u.high=O.high^~M.high&_.high,u.low=O.low^~M.low&_.low}var u=n[0],D=l[h];u.high^=D.high,u.low^=D.low}},_doFinalize:function(){var t=this._data,n=t.words,i=this._nDataBytes*8,s=t.sigBytes*8,o=this.blockSize*32;n[s>>>5]|=1<<24-s%32,n[(e.ceil((s+1)/o)*o>>>5)-1]|=128,t.sigBytes=n.length*4,this._process();var u=this._state,a=this.cfg.outputLength/8,f=a/8,l=[];for(var c=0;c<f;c++){var h=u[c],p=h.high,d=h.low;p=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,d=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360,l.push(d),l.push(p)}return new r.init(l,a)},clone:function(){var e=i.clone.call(this),t=e._state=this._state.slice(0);for(var n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=i._createHelper(h),t.HmacSHA3=i._createHmacHelper(h)}(Math);var dbits,canary=0xdeadbeefcafe,j_lm=(canary&16777215)==15715070;j_lm&&navigator.appName=="Microsoft Internet Explorer"?(BigInteger.prototype.am=am2,dbits=30):j_lm&&navigator.appName!="Netscape"?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;var rng_psize=256,rng_state,rng_pool,rng_pptr;if(rng_pool==null){rng_pool=new Array,rng_pptr=0;var t;if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto){var z=window.crypto.random(32);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=z.charCodeAt(t)&255}while(rng_pptr<rng_psize)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=t&255;rng_pptr=0,rng_seed_time()}SecureRandom.prototype.nextBytes=rng_get_bytes,RSAKey.prototype.doPublic=RSADoPublic,RSAKey.prototype.setPublic=RSASetPublic,RSAKey.prototype.encrypt=RSAEncrypt;var Lawnchair=function(e,t){if(!(this instanceof Lawnchair))return new Lawnchair(e,t);if(!JSON)throw"JSON unavailable! Include http://www.json.org/json2.js to fix.";if(!(arguments.length<=2&&arguments.length>0))throw"Incorrect # of ctor args!";t=typeof arguments[0]=="function"?arguments[0]:arguments[1],e=typeof arguments[0]=="function"?{}:arguments[0];if(typeof t!="function")throw"No callback was provided";this.record=e.record||"record",this.name=e.name||"records";var n;if(e.adapter){typeof e.adapter=="string"&&(e.adapter=[e.adapter]);for(var r=0,i=e.adapter.length;r<i;r++){for(var s=Lawnchair.adapters.length-1;s>=0;s--)if(Lawnchair.adapters[s].adapter===e.adapter[r]){n=Lawnchair.adapters[s].valid()?Lawnchair.adapters[s]:undefined;if(n)break}if(n)break}}else for(var s=0,o=Lawnchair.adapters.length;s<o;s++){n=Lawnchair.adapters[s].valid()?Lawnchair.adapters[s]:undefined;if(n)break}if(!n)throw"No valid adapter.";for(var r in n)this[r]=n[r];for(var s=0,o=Lawnchair.plugins.length;s<o;s++)Lawnchair.plugins[s].call(this);this.init(e,t)};Lawnchair.adapters=[],Lawnchair.adapter=function(e,t){t.adapter=e;var n="adapter valid init keys save batch get exists all remove nuke".split(" "),r=this.prototype.indexOf;for(var i in t)if(r(n,i)===-1)throw"Invalid adapter! Nonstandard method: "+i;Lawnchair.adapters.splice(0,0,t)},Lawnchair.plugins=[],Lawnchair.plugin=function(e){for(var t in e)t==="init"?Lawnchair.plugins.push(e[t]):this.prototype[t]=e[t]},Lawnchair.prototype={isArray:Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},indexOf:function(e,t,n,r){if(e.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},lambda:function(e){return this.fn(this.record,e)},fn:function(e,t){return typeof t=="string"?new Function(e,t):t},uuid:function(){var e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},each:function(e){var t=this.lambda(e);if(this.__results)for(var n=0,r=this.__results.length;n<r;n++)t.call(this,this.__results[n],n);else this.all(function(e){for(var n=0,r=e.length;n<r;n++)t.call(this,e[n],n)});return this}},Lawnchair.adapter("window-name",function(){typeof window=="undefined"&&(window={top:{}});var e={};try{e=JSON.parse(window.top.name)}catch(t){}return{valid:function(){return typeof window.top.name!="undefined"},init:function(t,n){return e[this.name]=e[this.name]||{index:[],store:{}},this.index=e[this.name].index,this.store=e[this.name].store,this.fn(this.name,n).call(this,this),this},keys:function(e){return this.fn("keys",e).call(this,this.index),this},save:function(t,n){var r=t.key||this.uuid();return this.exists(r,function(i){i||(t.key&&delete t.key,this.index.push(r)),this.store[r]=t;try{window.top.name=JSON.stringify(e)}catch(s){throw i||(this.index.pop(),delete this.store[r]),s}n&&(t.key=r,this.lambda(n).call(this,t))}),this},batch:function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++)this.save(e[r],function(e){n.push(e)});return t&&this.lambda(t).call(this,n),this},get:function(e,t){var n;if(this.isArray(e)){n=[];for(var r=0,i=e.length;r<i;r++)n.push(this.store[e[r]])}else n=this.store[e],n&&(n.key=e);return t&&this.lambda(t).call(this,n),this},exists:function(e,t){return this.lambda(t).call(this,!!this.store[e]),this},all:function(e){var t=[];for(var n=0,r=this.index.length;n<r;n++){var i=this.store[this.index[n]];i.key=this.index[n],t.push(i)}return this.fn(this.name,e).call(this,t),this},remove:function(t,n){var r=this.isArray(t)?t:[t];for(var i=0,s=r.length;i<s;i++){var o=r[i].key?r[i].key:r[i],u=this.indexOf(this.index,o);if(u<0)continue;delete this.store[o],this.index.splice(u,1)}return window.top.name=JSON.stringify(e),n&&this.lambda(n).call(this),this},nuke:function(t){return this.store=e[this.name].store={},this.index=e[this.name].index=[],window.top.name=JSON.stringify(e),t&&this.lambda(t).call(this),this}}}()),Lawnchair.adapter("dom",function(){var e=window.localStorage,t=function(t){return{key:t+"._index_",all:function(){var t=e.getItem(this.key);return t&&(t=JSON.parse(t)),t===null&&e.setItem(this.key,JSON.stringify([])),JSON.parse(e.getItem(this.key))},add:function(t){var n=this.all();n.push(t),e.setItem(this.key,JSON.stringify(n))},del:function(t){var n=this.all(),r=[];for(var i=0,s=n.length;i<s;i++)n[i]!=t&&r.push(n[i]);e.setItem(this.key,JSON.stringify(r))},find:function(e){var t=this.all();for(var n=0,r=t.length;n<r;n++)if(e===t[n])return n;return!1}}};return{valid:function(){return!!e&&function(){var t=!0,n=Math.random();try{e.setItem(n,n)}catch(r){t=!1}return e.removeItem(n),t}()},init:function(e,n){this.indexer=t(this.name),n&&this.fn(this.name,n).call(this,this)},save:function(t,n){var r=t.key?this.name+"."+t.key:this.name+"."+this.uuid();return delete t.key,e.setItem(r,JSON.stringify(t)),this.indexer.find(r)===!1&&this.indexer.add(r),t.key=r.slice(this.name.length+1),n&&this.lambda(n).call(this,t),this},batch:function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++)this.save(e[r],function(e){n.push(e)});return t&&this.lambda(t).call(this,n),this},keys:function(e){if(e){var t=this.name,n=this.indexer.all(),r=[];if(Array.prototype.map)r=n.map(function(e){return e.replace(t+".","")});else for(var i in n)r.push(i.replace(t+".",""));this.fn("keys",e).call(this,r)}return this},get:function(t,n){if(this.isArray(t)){var r=[];for(var i=0,s=t.length;i<s;i++){var o=this.name+"."+t[i],u=e.getItem(o);u&&(u=JSON.parse(u),u.key=t[i]),r.push(u)}n&&this.lambda(n).call(this,r)}else{var o=this.name+"."+t,u=e.getItem(o);u&&(u=JSON.parse(u),u.key=t),n&&this.lambda(n).call(this,u)}return this},exists:function(e,t){var n=this.indexer.find(this.name+"."+e)===!1?!1:!0;return this.lambda(t).call(this,n),this},all:function(t){var n=this.indexer.all(),r=[],i,s;for(var o=0,u=n.length;o<u;o++)s=n[o],i=JSON.parse(e.getItem(s)),i.key=s.replace(this.name+".",""),r.push(i);return t&&this.fn(this.name,t).call(this,r),this},remove:function(t,n){var r=this;if(this.isArray(t)){var i,s=t.length,o=function(e){r.remove(t[e],function(){if(--s>0)return;n&&r.lambda(n).call(r)})};for(i=0;i<t.length;i++)o(i);return this}var u=this.name+"."+(t.key?t.key:t);return this.indexer.del(u),e.removeItem(u),n&&this.lambda(n).call(this),this},nuke:function(e){return this.all(function(t){for(var n=0,r=t.length;n<r;n++)this.remove(t[n]);e&&this.lambda(e).call(this)}),this}}}()),Lawnchair.adapter("localFileStorage",function(){function e(e){console&&console.log(e)}function n(t,n){t=$fh.app_props.appid+t,$fh.hash({algorithm:"MD5",text:t},function(r){var i=r.hashvalue+".txt";if(typeof navigator.externalstorage=="undefined")return e("filenameForKey key="+t+" , Filename: "+i),n(i);navigator.externalstorage.enable(function(t){var r=i;return t.path&&(r=t.path,r.match(/\/$/)||(r+="/"),r+=i),i=r,n(i)},function(t){return n(i)})})}var t=function(e,t){if(!console)throw e;console.log("error in file system adapter !",e,t)};return{valid:function(){return!!window.requestFileSystem},init:function(e,n){e&&"function"==typeof e.fail&&(t=e.fail),n&&this.fn(this.name,n).call(this,this)},keys:function(e){throw"Currently not supported"},save:function(e,r){var i=e.key;n(i,function(n){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(o){o.root.getFile(n,{create:!0},function(s){s.createWriter(function(n){n.onwrite=function(){return r({key:i,val:e.val})},n.write(e.val)},function(){t("[save] Failed to create file writer")})},function(){t("[save] Failed to getFile")})},function(){t("[save] Failed to requestFileSystem")})})},batch:function(e,t){throw"Currently not supported"},get:function(e,r){n(e,function(n){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(s){s.root.getFile(n,{},function(i){i.file(function(n){var i=new FileReader;i.onloadend=function(t){var n=t.target.result;try{n=decodeURIComponent(n)}catch(i){}return r({key:e,val:n})},i.readAsText(n)},function(){t("[load] Failed to getFile")})},function(){r({key:e,val:null})})},function(){t("[load] Failed to get fileSystem")})})},exists:function(e,t){n(e,function(e){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(r){r.root.getFile(e,{},function(n){return t(!0)},function(e){return t(!1)})})})},all:function(e){throw"Currently not supported"},remove:function(e,r){n(e,function(n){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(s){s.root.getFile(n,{},function(i){i.remove(function(){return r({key:e,val:null})},function(){t("[remove] Failed to remove file")})},function(){t("[remove] Failed to getFile")})},function(){t("[remove] Failed to get fileSystem")})})},nuke:function(e){throw"Currently not supported"}}}()),Lawnchair.adapter("webkit-sqlite",function(){var e=function(e,t){console&&console.log("error in sqlite adaptor!",e,t)},t=function(){return new Date};return Function.prototype.bind||(Function.prototype.bind=function(e){var t=[].slice,n=t.call(arguments,1),r=this,i=function(){},s=function(){return r.apply(this instanceof i?this:e||{},n.concat(t.call(arguments)))};return i.prototype=r.prototype,s.prototype=new i,s}),{valid:function(){return!!window.openDatabase},init:function(t,n){var r=this,i=r.fn(r.name,n),s="CREATE TABLE IF NOT EXISTS "+this.record+" (id NVARCHAR(32) UNIQUE PRIMARY KEY, value TEXT, timestamp REAL)",o=function(){return i.call(r,r)};t&&"function"==typeof t.fail&&(e=t.fail),this.db=openDatabase(this.name,"1.0.0",this.name,65536),this.db.transaction(function(t){t.executeSql(s,[],o,e)})},keys:function(t){var n=this.lambda(t),r=this,i="SELECT id FROM "+this.record+" ORDER BY timestamp DESC";return this.db.readTransaction(function(t){var s=function(e,t){if(t.rows.length==0)n.call(r,[]);else{var i=[];for(var s=0,o=t.rows.length;s<o;s++)i.push(t.rows.item(s).id);n.call(r,i)}};t.executeSql(i,[],s,e)}),this},save:function(n,r,i){var s=this;objs=(this.isArray(n)?n:[n]).map(function(e){return e.key||(e.key=s.uuid()),e}),ins="INSERT OR REPLACE INTO "+this.record+" (value, timestamp, id) VALUES (?,?,?)",win=function(){r&&s.lambda(r).call(s,s.isArray(n)?objs:objs[0])},i=i||function(){},insvals=[],ts=t();try{for(var o=0,u=objs.length;o<u;o++)insvals[o]=[JSON.stringify(objs[o]),ts,objs[o].key]}catch(a){throw e(a),a}return s.db.transaction(function(e){for(var t=0,n=objs.length;t<n;t++)e.executeSql(ins,insvals[t])},function(t,n){e(t,n)},win),this},batch:function(e,t){return this.save(e,t)},get:function(t,n){var r=this,i="",s=this.isArray(t)?t:[t];i="SELECT id, value FROM "+this.record+" WHERE id IN ("+s.map(function(){return"?"}).join(",")+")";var o=function(e,i){var o,u,a={};for(var f=0,l=i.rows.length;f<l;f++)o=JSON.parse(i.rows.item(f).value),o.key=i.rows.item(f).id,a[o.key]=o;u=s.map(function(e){return a[e]}),r.isArray(t)||(u=u.length?u[0]:null),n&&r.lambda(n).call(r,u)};return this.db.readTransaction(function(t){t.executeSql(i,s,o,e)}),this},exists:function(t,n){var r="SELECT * FROM "+this.record+" WHERE id = ?",i=this,s=function(e,t){n&&i.fn("exists",n).call(i,t.rows.length>0)};return this.db.readTransaction(function(n){n.executeSql(r,[t],s,e)}),this},all:function(t){var n=this,r="SELECT * FROM "+this.record,i=[],s=this.fn(this.name,t)||undefined,o=function(e,t){if(t.rows.length!=0)for(var r=0,o=t.rows.length;r<o;r++){var u=JSON.parse(t.rows.item(r).value);u.key=t.rows.item(r).id,i.push(u)}s&&s.call(n,i)};return this.db.readTransaction(function(t){t.executeSql(r,[],o,e)}),this},remove:function(t,n){var r=this,i,s="DELETE FROM "+this.record+" WHERE id ",o=function(){n&&r.lambda(n).call(r)};return this.isArray(t)?(i=t,s+="IN ("+i.map(function(){return"?"}).join(",")+")"):(s+="= ?",i=[t]),i=i.map(function(e){return e.key?e.key:e}),this.db.transaction(function(t){t.executeSql(s,i,o,e)}),this},nuke:function(t){var n="DELETE FROM "+this.record,r=this,i=t?function(){r.lambda(t).call(r)}:function(){};return this.db.transaction(function(t){t.executeSql(n,[],i,e)}),this}}}()),function(e){function d(e){var t=window.location,n=new RegExp("^(?:([^:/?#.]+):)?(?://)?(([^:/?#]*)(?::(\\d*))?)((/(?:[^?#](?![^?#/]*\\.[^?#/.]+(?:[\\?#]|$)))*/?)?([^?#/]*))?(?:\\?([^#]*))?(?:#(.*))?"),r=n.exec(t),i=n.exec(e);return(i[1]==null||i[1]==="")&&(i[3]==null||i[3]==="")&&(i[4]==null||i[4]==="")||r[1]===i[1]&&r[3]===i[3]&&r[4]===i[4]}function v(e){this.xdr=e,this.isWrapper=!0,this.readyState=0,this.onreadystatechange=null,this.status=0,this.statusText="",this.responseText="";var t=this;this.xdr.onload=function(){t.readyState=4,t.status=200,t.statusText="",t.responseText=t.xdr.responseText,t.onreadystatechange&&t.onreadystatechange()},this.xdr.onerror=function(){t.onerror&&t.onerror(),t.readyState=4,t.status=0,t.statusText="",t.onreadystatechange&&t.onreadystatechange()},this.xdr.ontimeout=function(){t.readyState=4,t.status=408,t.statusText="timeout",t.onreadystatechange&&t.onreadystatechange()}}e.$fh=e.$fh||{};var t=e.$fh;t.fh_timeout=2e4,t.boxprefix="/box/srv/1.1/",t.sdk_version="1.1.1";var n=!1,r=!1,i=[],s=function(e){try{while(i[0]){var n=i.shift();n.type==="init"&&(e?n.success(t.cloud_props):n.fail&&n.fail("fh_init_failed",{})),n.type==="act"&&(e?t.act(n.opts,n.success,n.fail):n.fail&&n.fail("fh_init_failed",{}))}}finally{}},o="mock_uuid",u=function(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)===" ")i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},a=function(){var e=[],t="0123456789ABCDEF";for(var n=0;n<32;n++)e[n]=t.substr(Math.floor(Math.random()*16),1);e[12]="4",e[16]=t.substr(e[16]&3|8,1);var r=e.join("");return r},f=function(e,t){var n=new Date;n.setTime(n.getTime()+31536e8);var r="; expires="+n.toGMTString();document.cookie=e+"="+t+r+"; path = /"},l=function(){if(typeof window.device!="undefined"&&typeof window.device.uuid!="undefined")return window.device.uuid;if(typeof navigator.device!="undefined"&&typeof navigator.device.uuid!="undefined")return navigator.device.uuid;var e=u(o);return null==e&&(e=a(),f(o,e)),e},c=function(){return typeof window.device!="undefined"&&typeof window.device.cuidMap!="undefined"?window.device.cuidMap:typeof navigator.device!="undefined"&&typeof navigator.device.cuidMap!="undefined"?navigator.device.cuidMap:null};t._getDeviceId=l,t._getCuidMap=c;var h=/Android|webOS|iPhone|iPad|iPad|Blackberry|Windows Phone/i.test(navigator.userAgent),p=window.location.protocol.indexOf("file")>-1;v.prototype.open=function(e,t,n){this.xdr.open(e,t)},v.prototype.send=function(e){this.xdr.send(e)},v.prototype.abort=function(){this.xdr.abort()},v.prototype.setRequestHeader=function(e,t){},v.prototype.getResponseHeader=function(e){};var m=!1;if(window.XMLHttpRequest){var g=new XMLHttpRequest;"withCredentials"in g&&(m=!0),m||typeof XDomainRequest!="undefined"&&(m=!0)}var y=function(){var e=null;return window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new window.ActiveXObject("Microsoft.XMLHTTP")),e},b=function(){var e=null;if(window.XMLHttpRequest){var t=new XMLHttpRequest;"withCredentials"in t&&(e=t)}return null==e&&typeof XDomainRequest!="undefined"&&(e=new v(new XDomainRequest)),e},w=0,E=function(e,t){var n,r=document.head||document.getElementsByTagName("head")[0]||document.documentElement;n=document.createElement("script"),n.async="async",n.src=e,n.type="text/javascript",n.onload=n.onreadystatechange=function(){if(!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=undefined,t&&typeof t=="function"&&t()},r.insertBefore(n,r.firstChild)};t.__load_script=E;var S=function(e){console&&console.log(e)};t.__ajax=function(e){var t=e?e:{},n=d(e.url);!n&&(typeof window.Phonegap!="undefined"||typeof window.cordova!="undefined")&&(n=!0),n||h&&p&&(n=!0),n||!n&&m?t.dataType="json":t.dataType="jsonp";var r,i=t.url,s=t.type||"GET",o=t.data||null,u,a=/\?/,f=t.dataType==="jsonp"?"jsonp":"json",l=function(e,n,i){var s=!1,o,u;if(e>=200&&e<=300||e===304)if(e===304)n="notmodified",s=!0;else if(t.dataType&&t.dataType.indexOf("json")!==-1)try{typeof i=="string"?u=JSON.parse(i):u=i,s=!0}catch(a){s=!1,n="parseerror",o=a}else u=i,s=!0;else{o=n;if(!n||e)n="error",e<0&&(e=0)}s?(r=undefined,t.success&&typeof t.success=="function"&&t.success(u)):t.error&&typeof t.error=="function"&&t.error(r,n,o)},c={json:function(){n?r=y():r=b(),r.isWrapper?r.open("GET",i+"?params="+encodeURIComponent(o),!0):r.open(s,i,!0),t.contentType&&r.setRequestHeader("Content-Type",t.contentType),r.setRequestHeader("X-Request-With","XMLHttpRequest");var e=function(){if(r.readyState===4){if(r.status===0&&!n&&!r.isAborted)return c.jsonp();u&&clearTimeout(u);var e;try{e=r.statusText}catch(t){e=""}r.isAborted||l(r.status,r.statusText,r.responseText)}};r.onreadystatechange=e,r.send(o)},jsonp:function(){var e="fhcb"+w++;window[e]=function(t){u&&clearTimeout(u),l(200,"",t),window[e]=undefined;try{delete window[e]}catch(n){}},i+=(a.test(i)?"&":"?")+"_callback="+e;if(t.data){var n=t.data;typeof n=="string"?i+="&_jsonpdata="+encodeURIComponent(t.data):i+="&_jsonpdata="+encodeURIComponent(JSON.stringify(t.data))}E(i)}};t.timeout>0&&(u=setTimeout(function(){r&&(r.isAborted=!0,r.abort()),l(0,"timeout")},t.timeout)),c[f]()},_handleError=function(e,t,n){var r;if(t)try{var i=JSON.parse(t.responseText);r=i.error}catch(s){r=t.responseText}e&&e("error_ajaxfail",{status:t.status,message:n,error:r})},_getQueryMap=function(e){var t,n=e.split("?");if(n.length===2){var r=n[1],i=r.split("&");t={};for(var s=0;s<i.length;s++){var o=i[s],u=o.split("=");t[u[0]]=u[1]}}return t},_checkAuthResponse=function(e){if(/\_fhAuthCallback/.test(e)){var t=_getQueryMap(e);if(t){var n=t._fhAuthCallback;if(n)if(t.result&&t.result==="success"){var r={sessionToken:t.fh_auth_session,authResponse:JSON.parse(decodeURIComponent(decodeURIComponent(t.authResponse)))};window[n](null,r)}else window[n]({message:t.message})}}},_getFhParams=function(){var e={};return e.cuid=l(),e.cuidMap=c(),e.appid=t.app_props.appid,e.appkey=t.app_props.appkey,e.analyticsTag=t.app_props.analyticsTag,e.init=t.app_props.init,typeof fh_destination_code!="undefined"?e.destination=fh_destination_code:e.destination="web",typeof fh_app_version!="undefined"&&(e.app_version=fh_app_version),e.sdk_version=_getSdkVersion(),e},_addFhParams=function(e){return e=e||{},e.__fh=_getFhParams(),e},_getSdkVersion=function(){var e="FH_JS_SDK";if(typeof fh_destination_code!="undefined")e="FH_HYBRID_SDK";else if(window.PhoneGap||window.cordova)e="FH_PHONEGAP_SDK";return e+"/"+t.sdk_version},window.addEventListener?window.addEventListener("load",function(){_checkAuthResponse(window.location.href)},!1):window.attachEvent("onload",function(){_checkAuthResponse(window.location.href)}),t._handleAuthResponse=function(e,t,n,r){t.status&&t.status==="ok"?t.url?window.PhoneGap||window.cordova?window.plugins&&window.plugins.childBrowser?typeof window.plugins.childBrowser.showWebPage=="function"&&(window.plugins.childBrowser.onLocationChange=function(t){if(t.indexOf(e)>-1){window.plugins.childBrowser.close();var i=_getQueryMap(t);if(i)if(i.result&&i.result==="success"){var s={sessionToken:i.fh_auth_session,authResponse:JSON.parse(decodeURIComponent(decodeURIComponent(i.authResponse)))};n(s)}else r&&r("auth_failed",{message:i.message});else r&&r("auth_failed",{message:i.message})}},window.plugins.childBrowser.showWebPage(t.url)):(console.log("ChildBrowser plugin is not intalled."),n(t)):document.location.href=t.url:n(t):r&&r("auth_failed",t)},t.init=function(e,o,u){if(t.cloud_props)return o(t.cloud_props);if(!n){n=!0,u||(u=S);if(!e.host)return u("init_no_host",{});if(!e.appid)return u("init_no_appid",{});if(!e.appkey)return u("init_no_appkey",{});t.app_props=e;var a=new Lawnchair({name:"fh_init_storage",adapter:"dom",fail:function(e,t){var n="read/save from/to local storage failed  msg:"+e+" err:"+t;return u(n,{})}},function(){});a.get("fh_init",function(i){i&&i.value!==null&&(t.app_props.init=i.value);var f=e.host+t.boxprefix+"app/init",l=_getFhParams();t.__ajax({url:f,type:"POST",contentType:"application/json",data:JSON.stringify(l),timeout:e.timeout||t.app_props.timeout||t.fh_timeout,success:function(e){t.cloud_props=e,a.save({key:"fh_init",value:e.init},function(){o&&o(e),s(!0)})},error:function(e,t,i){r=!0,n=!1,_handleError(u,e,t),s(!1)}})})}else i.push({type:"init",success:o,fail:u})},t.act=function(e,s,o){function u(){var n=t.cloud_props.hosts.releaseCloudUrl,r=t.cloud_props.hosts.releaseCloudType;t.app_props.mode&&t.app_props.mode.indexOf("dev")>-1&&(n=t.cloud_props.hosts.debugCloudUrl,r=t.cloud_props.hosts.debugCloudType);var i=n+"/cloud/"+e.act;r==="fh"&&(i=n+t.boxprefix+"act/"+t.cloud_props.domain+"/"+t.app_props.appid+"/"+e.act+"/"+t.app_props.appid);var u=e.req||{};return u=_addFhParams(u),t.__ajax({url:i,type:"POST",data:JSON.stringify(u),contentType:"application/json",timeout:e.timeout||t.app_props.timeout||t.fh_timeout,success:function(e){if(s)return s(e)},error:function(e,t,n){_handleError(o,e,t)}})}o||(o=S);if(!e.act)return o("act_no_action",{});if(r)t.init(t.app_props,function(e){r=!1,u()},function(e){_handleError(o,{status:0,responseText:"Init Failed"},"failed to call init. Check network status")});else{if(null==t.cloud_props&&n){i.push({type:"act",opts:e,success:s,fail:o});return}u()}},t.auth=function(e,n,r){r||(r=S);if(null==t.cloud_props)return r("fh_not_ready",{});var i={};if(!e.policyId)return r("auth_no_policyId",{});if(!e.clientToken)return r("auth_no_clientToken",{});i.policyId=e.policyId,i.clientToken=e.clientToken,e.endRedirectUrl&&(i.endRedirectUrl=e.endRedirectUrl,e.authCallback&&(i.endRedirectUrl+=(/\?/.test(i.endRedirectUrl)?"&":"?")+"_fhAuthCallback="+e.authCallback)),i.params={},e.params&&(i.params=e.params);var s=e.endRedirectUrl||"status=complete";i.device=l();var o=t.app_props.host+t.boxprefix+"admin/authpolicy/auth";i=_addFhParams(i),t.__ajax({url:o,type:"POST",data:JSON.stringify(i),contentType:"application/json",timeout:e.timeout||t.app_props.timeout||t.fh_timeout,success:function(e){t._handleAuthResponse(s,e,n,r)},error:function(e,t,n){_handleError(r,e,t)}})}}(this),$fh=$fh||{},$fh.sync=function(){var e={defaults:{sync_frequency:10,auto_sync_local_updates:!0,notify_client_storage_failed:!0,notify_sync_started:!0,notify_sync_complete:!0,notify_offline_update:!0,notify_collision_detected:!0,notify_remote_update_failed:!0,notify_local_update_applied:!0,notify_remote_update_applied:!0,notify_delta_received:!0,notify_sync_failed:!0,do_console_log:!1,crashed_count_wait:10,resend_crashed_updates:!0},notifications:{CLIENT_STORAGE_FAILED:"client_storage_failed",SYNC_STARTED:"sync_started",SYNC_COMPLETE:"sync_complete",OFFLINE_UPDATE:"offline_update",COLLISION_DETECTED:"collision_detected",REMOTE_UPDATE_FAILED:"remote_update_failed",REMOTE_UPDATE_APPLIED:"remote_update_applied",LOCAL_UPDATE_APPLIED:"local_update_applied",DELTA_RECEIVED:"delta_received",SYNC_FAILED:"sync_failed"},datasets:{},config:undefined,notify_callback:undefined,init:function(t){e.consoleLog("sync - init called"),e.config=JSON.parse(JSON.stringify(e.defaults));for(var n in t)e.config[n]=t[n];e.datasetMonitor()},notify:function(t){e.notify_callback=t},manage:function(t,n,r){var i=function(i){e.consoleLog("doManage dataset :: initialised = "+i.initialised+" :: "+t+" :: "+JSON.stringify(n)),e.config||(e.config=JSON.parse(JSON.stringify(e.defaults)));var s=JSON.parse(JSON.stringify(e.config));for(var o in n)s[o]=n[o];i.query_params=r||{},i.config=s,i.syncRunning=!1,i.syncPending=!0,i.initialised=!0,i.meta={},e.saveDataSet(t)};e.getDataSet(t,function(e){i(e)},function(n){e.loadDataSet(t,function(n){e.doNotify(t,null,e.notifications.LOCAL_UPDATE_APPLIED,"load"),i(n)},function(n){e.consoleLog("Creating new dataset for id "+t);var r={};r.pending={},e.datasets[t]=r,i(r)})})},list:function(t,n,r){e.getDataSet(t,function(e){if(e){var t=JSON.parse(JSON.stringify(e.data));n(t)}},function(e,t){r(e,t)})},create:function(t,n,r,i){e.addPendingObj(t,null,n,"create",r,i)},read:function(t,n,r,i){e.getDataSet(t,function(e){var t=e.data[n];if(!t)i("unknown_uid");else{var s=JSON.parse(JSON.stringify(t));r(s)}},function(e,t){i(e,t)})},update:function(t,n,r,i,s){e.addPendingObj(t,n,r,"update",i,s)},"delete":function(t,n,r,i){e.addPendingObj(t,n,null,"delete",r,i)},getPending:function(t,n){e.getDataSet(t,function(e){var t;e&&(t=e.pending),n(t)},function(t,n){e.ConsoleLog(t)})},clearPending:function(t,n){e.getDataSet(t,function(r){r.pending={},e.saveDataSet(t,n)})},listCollisions:function(e,t,n){$fh.act({act:e,req:{fn:"listCollisions"}},t,n)},removeCollision:function(e,t,n,r){$fh.act({act:e,req:{fn:"removeCollision",hash:t}},n,r)},isOnline:function(e){var t=!0;typeof navigator.onLine!="undefined"&&(t=navigator.onLine);if(t&&typeof navigator.network!="undefined"&&typeof navigator.network.connection!="undefined"){var n=navigator.network.connection.type;if(n==="none"||n===null)t=!1}return e(t)},doNotify:function(t,n,r,i){if(e.notify_callback&&e.config["notify_"+r]){var s={dataset_id:t,uid:n,code:r,message:i};setTimeout(function(){e.notify_callback(s)},0)}},getDataSet:function(t,n,r){var i=e.datasets[t];i?n(i):r("unknown_dataset"+t,t)},sortObject:function(t){if(typeof t!="object"||t===null)return t;var n=[];return Object.keys(t).sort().forEach(function(r){n.push({key:r,value:e.sortObject(t[r])})}),n},sortedStringify:function(t){var n="";try{n=JSON.stringify(e.sortObject(t))}catch(r){console.error("Error stringifying sorted object:"+r)}return n},generateHash:function(t){var n=CryptoJS.SHA1(e.sortedStringify(t));return n.toString()},addPendingObj:function(t,n,r,i,s,o){function u(r){r.hash=e.generateHash(r),e.getDataSet(t,function(o){o.pending[r.hash]=r,e.updateDatasetFromLocal(o,r),e.config.auto_sync_local_updates&&(o.syncPending=!0),e.saveDataSet(t),e.doNotify(t,n,e.notifications.LOCAL_UPDATE_APPLIED,i),s(r)},function(e,t){o(e,t)})}e.isOnline(function(r){r||e.doNotify(t,n,e.notifications.OFFLINE_UPDATE,i)});var a={};a.inFlight=!1,a.action=i,a.post=r,a.postHash=e.generateHash(a.post),a.timestamp=(new Date).getTime(),"create"===i?(a.uid=a.postHash,u(a)):e.read(t,n,function(t){a.uid=n,a.pre=t.data,a.preHash=e.generateHash(t.data),u(a)},function(e,t){o(e,t)})},syncLoop:function(t){e.getDataSet(t,function(n){n.syncPending=!1,n.syncRunning=!0,n.syncLoopStart=(new Date).getTime(),e.doNotify(t,null,e.notifications.SYNC_STARTED,null),e.isOnline(function(r){if(!r)e.syncComplete(t,"offline");else{var i={};i.fn="sync",i.dataset_id=t,i.query_params=n.query_params,i.dataset_hash=n.hash,i.acknowledgements=n.acknowledgements||[];var s=n.pending,o=[];for(var u in s)!s[u].inFlight&&!s[u].crashed&&(s[u].inFlight=!0,s[u].inFlightDate=(new Date).getTime(),o.push(s[u]));i.pending=o,o.length>0&&e.consoleLog("Starting sync loop - global hash = "+n.hash+" :: params = "+JSON.stringify(i,null,2));try{$fh.act({act:t,req:i},function(r){function s(r,s,o){if(r)for(var u in r)i=r[u],o.push(i),n.pending[u]&&n.pending[u].inFlight&&!n.pending[u].crashed&&(delete n.pending[u],e.doNotify(t,i.uid,s,i))}var i;e.updatePendingFromNewData(t,n,r),e.updateCrashedInFlightFromNewData(t,n,r),e.updateNewDataFromInFlight(t,n,r),e.updateNewDataFromPending(t,n,r),r.records&&(n.data=r.records,n.hash=r.hash,e.doNotify(t,r.hash,e.notifications.DELTA_RECEIVED,"full dataset"));if(r.updates){var o=[];s(r.updates.applied,e.notifications.REMOTE_UPDATE_APPLIED,o),s(r.updates.failed,e.notifications.REMOTE_UPDATE_FAILED,o),s(r.updates.collisions,e.notifications.COLLISION_DETECTED,o),n.acknowledgements=o}else r.hash&&r.hash!==n.hash?(e.consoleLog("Local dataset stale - syncing records :: local hash= "+n.hash+" - remoteHash="+r.hash),e.syncRecords(t)):e.consoleLog("Local dataset up to date");e.syncComplete(t,"online")},function(r,i){e.markInFlightAsCrashed(n),e.consoleLog("syncLoop failed : msg="+r+" :: err = "+i),e.doNotify(t,null,e.notifications.SYNC_FAILED,r),e.syncComplete(t,r)})}catch(a){e.consoleLog("Error performing sync - "+a),e.syncComplete(t,a)}}})})},syncRecords:function(t){e.getDataSet(t,function(n){var r=n.data||{},i={};for(var s in r){var o=s,u=r[s].hash;i[o]=u}var a={};a.fn="syncRecords",a.dataset_id=t,a.query_params=n.query_params,a.clientRecs=i,e.consoleLog("syncRecParams :: "+JSON.stringify(a)),$fh.act({act:t,req:a},function(i){var s;if(i.create)for(s in i.create)r[s]={hash:i.create[s].hash,data:i.create[s].data},e.doNotify(t,s,e.notifications.DELTA_RECEIVED,"create");if(i.update)for(s in i.update)r[s].hash=i.update[s].hash,r[s].data=i.update[s].data,e.doNotify(t,s,e.notifications.DELTA_RECEIVED,"update");if(i["delete"])for(s in i["delete"])delete r[s],e.doNotify(t,s,e.notifications.DELTA_RECEIVED,"delete");n.data=r,i.hash&&(n.hash=i.hash),e.syncComplete(t,"online")},function(n,r){e.consoleLog("syncRecords failed : msg="+n+" :: err="+r),e.syncComplete(t,n)})})},syncComplete:function(t,n){e.getDataSet(t,function(r){r.syncRunning=!1,r.syncLoopEnd=(new Date).getTime(),e.saveDataSet(t),e.doNotify(t,r.hash,e.notifications.SYNC_COMPLETE,n)})},checkDatasets:function(){for(var t in e.datasets)if(e.datasets.hasOwnProperty(t)){var n=e.datasets[t];if(!n.syncRunning){var r=n.syncLoopStart,i=n.syncLoopEnd;if(r==null)e.consoleLog(t+" - Performing initial sync"),n.syncPending=!0;else if(i!=null){var s=(new Date).getTime()-i,o=n.config.sync_frequency*1e3;s>o&&(n.syncPending=!0)}n.syncPending&&e.syncLoop(t)}}},datasetMonitor:function(){e.checkDatasets(),setTimeout(function(){e.datasetMonitor()},500)},saveDataSet:function(t,n){var r=function(n,r){var i="save to local storage failed  msg:"+n+" err:"+r;e.doNotify(t,null,e.notifications.CLIENT_STORAGE_FAILED,i),e.consoleLog(i)};e.getDataSet(t,function(e){Lawnchair({fail:r},function(){this.save({key:"dataset_"+t,val:JSON.stringify(e)},function(){n&&n()})})})},loadDataSet:function(t,n,r){var i=function(n,r){var i="load from local storage failed  msg:"+n;e.doNotify(t,null,e.notifications.CLIENT_STORAGE_FAILED,i),e.consoleLog(i)};Lawnchair({fail:i},function(){this.get("dataset_"+t,function(i){if(i&&i.val!==null){var s=JSON.parse(i.val);return s.initialised=!1,e.datasets[t]=s,e.consoleLog("load from local storage success for dataset_id :"+t),n(s)}return r()})})},updateDatasetFromLocal:function(t,n){var r=t.pending,i,s,o=n.uid;e.consoleLog("updating local dataset for uid "+o+" - action = "+n.action),t.meta[o]=t.meta[o]||{},n.action==="create"&&(t.data[o]&&(e.consoleLog("dataset already exists for uid in create :: "+JSON.stringify(t.data[o])),t.meta[o].fromPending&&(i=t.meta[o].pendingUid,delete r[i])),t.data[o]={}),n.action==="update"&&t.data[o]&&t.meta[o].fromPending&&(e.consoleLog("updating an existing pending record for dataset :: "+JSON.stringify(t.data[o])),i=t.meta[o].pendingUid,t.meta[o].previousPendingUid=i,s=r[i],s&&!s.inFlight&&(e.consoleLog("existing pre-flight pending record = "+JSON.stringify(s)),s.post=n.post,s.postHash=n.postHash,delete r[n.hash])),n.action==="delete"&&t.data[o]&&(t.meta[o].fromPending&&(e.consoleLog("Deleting an existing pending record for dataset :: "+JSON.stringify(t.data[o])),i=t.meta[o].pendingUid,t.meta[o].previousPendingUid=i,s=r[i],s&&!s.inFlight&&(e.consoleLog("existing pending record = "+JSON.stringify(s)),s.action==="create"&&(delete r[n.hash],delete r[i]),s.action==="update"&&(n.pre=s.pre,n.preHash=s.preHash,n.inFlight=!1,delete r[i]))),delete t.data[o]),t.data[o]&&(t.data[o].data=n.post,t.data[o].hash=n.postHash,t.meta[o].fromPending=!0,t.meta[o].pendingUid=n.hash)},updatePendingFromNewData:function(t,n,r){var i=n.pending,s;if(i&&r.records)for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];n.meta[u.uid]=n.meta[u.uid]||{};if(u.inFlight===!1){e.consoleLog("updatePendingFromNewData - Found Non inFlight record -> action="+u.action+" :: uid="+u.uid+" :: hash="+u.hash);if(u.action==="update"||u.action==="delete"){s=r.records[u.uid];if(s)e.consoleLog("updatePendingFromNewData - Updating pre values for existing pending record "+u.uid),u.pre=s.data,u.preHash=s.hash;else{var a=n.meta[u.uid].previousPendingUid,f=i[a];if(f&&r&&r.updates&&r.updates.applied&&r.updates.applied[f.hash]){var l=r.updates.applied[f.hash].uid;s=r.records[l],s&&(e.consoleLog("updatePendingFromNewData - Updating pre values for existing pending record which was previously a create "+u.uid+" ==> "+l),u.pre=s.data,u.preHash=s.hash,u.uid=l)}}}u.action==="create"&&r&&r.updates&&r.updates.applied&&r.updates.applied[o]&&(e.consoleLog("updatePendingFromNewData - Found an update for a pending create "+JSON.stringify(r.updates.applied[o])),s=r.records[r.updates.applied[o].uid],s&&(e.consoleLog("updatePendingFromNewData - Changing pending create to an update based on new record  "+JSON.stringify(s)),u.action="update",u.pre=s.data,u.preHash=s.hash,u.uid=r.updates.applied[o].uid))}}},updateNewDataFromInFlight:function(t,n,r){var i=n.pending;if(i&&r.records)for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];if(o.inFlight){var u=r&&r.updates&&r.updates.hashes&&r.updates.hashes[s]?!0:!1;e.consoleLog("updateNewDataFromInFlight - Found inflight pending Record - action = "+o.action+" :: hash = "+s+" :: updateReceivedForPending="+u);if(!u){var a=r.records[o.uid];if(o.action==="update"&&a)a.data=o.post,a.hash=o.postHash;else if(o.action==="delete"&&a)delete r.records[o.uid];else if(o.action==="create"){e.consoleLog("updateNewDataFromInFlight - re adding pending create to incomming dataset");var f={data:o.post,hash:o.postHash};r.records[o.uid]=f}}}}},updateNewDataFromPending:function(t,n,r){var i=n.pending;if(i&&r.records)for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];if(o.inFlight===!1){e.consoleLog("updateNewDataFromPending - Found Non inFlight record -> action="+o.action+" :: uid="+o.uid+" :: hash="+o.hash);var u=r.records[o.uid];if(o.action==="update"&&u)u.data=o.post,u.hash=o.postHash;else if(o.action==="delete"&&u)delete r.records[o.uid];else if(o.action==="create"){e.consoleLog("updateNewDataFromPending - re adding pending create to incomming dataset");var a={data:o.post,hash:o.postHash};r.records[o.uid]=a}}}},updateCrashedInFlightFromNewData:function(t,n,r){var i={applied:e.notifications.REMOTE_UPDATE_APPLIED,failed:e.notifications.REMOTE_UPDATE_FAILED,collisions:e.notifications.COLLISION_DETECTED},s=n.pending,o={},u,a;if(s){for(u in s)if(s.hasOwnProperty(u)){a=s[u];if(a.inFlight&&a.crashed){e.consoleLog("updateCrashedInFlightFromNewData - Found crashed inFlight pending record uid="+a.uid+" :: hash="+a.hash);if(r&&r.updates&&r.updates.hashes){var f=r.updates.hashes[u];if(f){o[f.uid]=f,e.consoleLog("updateCrashedInFlightFromNewData - Resolving status for crashed inflight pending record "+JSON.stringify(f));if(f.type==="failed")if(f.action==="create")e.consoleLog("updateCrashedInFlightFromNewData - Deleting failed create from dataset"),delete n.data[f.uid];else if(f.action==="update"||f.action==="delete")e.consoleLog("updateCrashedInFlightFromNewData - Reverting failed "+f.action+" in dataset"),n.data[f.uid]={data:a.pre,hash:a.preHash};delete s[u],e.doNotify(t,f.uid,i[f.type],f)}else a.crashedCount?a.crashedCount++:a.crashedCount=1}else a.crashedCount?a.crashedCount++:a.crashedCount=1}}for(u in s)if(s.hasOwnProperty(u)){a=s[u];if(a.inFlight&&a.crashed)a.crashedCount>n.config.crashed_count_wait&&(e.consoleLog("updateCrashedInFlightFromNewData - Crashed inflight pending record has reached crashed_count_wait limit : "+JSON.stringify(a)),n.config.resend_crashed_updates?(e.consoleLog("updateCrashedInFlightFromNewData - Retryig crashed inflight pending record"),a.crashed=!1,a.inFlight=!1):(e.consoleLog("updateCrashedInFlightFromNewData - Deleting crashed inflight pending record"),delete s[u]));else if(!a.inFlight&&a.crashed){e.consoleLog("updateCrashedInFlightFromNewData - Trying to resolve issues with crashed non in flight record - uid = "+a.uid);var l=o[a.uid];l&&(e.consoleLog("updateCrashedInFlightFromNewData - Found a stalled pending record backed up behind a resolved crash uid="+a.uid+" :: hash="+a.hash),a.crashed=!1)}}}},markInFlightAsCrashed:function(t){var n=t.pending,r,i;if(n){var s={};for(r in n)n.hasOwnProperty(r)&&(i=n[r],i.inFlight&&(e.consoleLog("Marking in flight pending record as crashed : "+r),i.crashed=!0,s[i.uid]=i));for(r in n)if(n.hasOwnProperty(r)){i=n[r];if(!i.inFlight){var o=s[i.uid];o&&(i.crashed=!0)}}}},consoleLog:function(t){e.config.do_console_log&&console.log(t)}};return function(){e.config=e.defaults}(),{init:e.init,manage:e.manage,notify:e.notify,doList:e.list,doCreate:e.create,doRead:e.read,doUpdate:e.update,doDelete:e["delete"],listCollisions:e.listCollisions,removeCollision:e.removeCollision,getPending:e.getPending,clearPending:e.clearPending,getDataset:e.getDataSet}}(),function(e){e.$fh=e.$fh||{};var t=e.$fh;t.sec=function(e,n,r){if(!e.act){r("bad_act",{},e);return}if(!e.params){r("no_params",{},e);return}if(!e.params.algorithm){r("no_params_algorithm",{},e);return}var i=function(){if(t&&t.cloud_props&&t.cloud_props.hosts&&t.app_props){var e=t.cloud_props.hosts.releaseCloudType;t.app_props.mode&&t.app_props.mode.indexOf("dev")>-1&&(e=t.cloud_props.hosts.debugCloudType);if(e==="fh")return!1}return!0},s=function(e){if(typeof __Crypto!="undefined")return e();t.__load_script("fhext/js/security.js",e)},o={keygen:function(){if(!e.params.keysize){r("no_params_keysize",{},e);return}if(e.params.algorithm.toLowerCase()!=="aes"){r("keygen_bad_algorithm",{},e);return}var t=parseInt(e.params.keysize,10);t>100&&(t/=8);if(typeof SecureRandom=="undefined")return r("security library is not loaded.");var s=function(e){var t=new SecureRandom,n=new Array(e);t.nextBytes(n);var r="";for(var i=0;i<n.length;i++)r+=byte2Hex(n[i]);return r};return i()?n({algorithm:"AES",secretkey:s(t),iv:s(t)}):n({algorithm:"AES",secretkey:s(t)})},encrypt:function(){var o=!1,u={aes:["key","plaintext"],rsa:["modulu","plaintext"]};i()?u.aes.push("iv"):(u.rsa.push("keysize"),u.rsa.push("key"));var a=u[e.params.algorithm.toLowerCase()];if(!a){r("encrypt_bad_algorithm",{},e);return}for(var l=0;l<a;l++){var c=a[l];if(!e.params[c]){o=!0,r("no_params_"+c,{},e);break}}if(o)return;var h,d;i()?(h=function(e,t,n){if(typeof RSAKey=="undefined")return n("security library is missing.Error: can not find RSAKey.");var r=new RSAKey;r.setPublic(e.params.modulu,"10001");var i=e.params.plaintext;cipher_text=r.encrypt(i),t({ciphertext:cipher_text})},d=function(e,t,n){if(typeof CryptoJS=="undefined")return n("security library is missing.Error: can not find CryptoJS.");var r=CryptoJS.AES.encrypt(e.params.plaintext,CryptoJS.enc.Hex.parse(e.params.key),{iv:CryptoJS.enc.Hex.parse(e.params.iv)});cipher_text=CryptoJS.enc.Hex.stringify(r.ciphertext),t({ciphertext:cipher_text})}):(h=function(e,t,n){s(function(){if(typeof RSAKeyPair=="undefined")return n("legacy security library is missing. Error: can not find RSAKeyPair.");var r=parseInt(e.params.keysize,10),i=parseInt(r*2/16+2,10);setMaxDigits(i);var s=new RSAKeyPair(e.params.key,e.params.key,e.params.modulu),o=e.params.plaintext,u="";for(var a=o.length-1;a>=0;a--)u+=o.charAt(a);cipher_text=encryptedString(s,u),t({ciphertext:cipher_text})})},d=function(e,n,r){s(function(){if(typeof __Crypto=="undefined")return r("legacy security library is missing. Error: can not find __Crypto.");typeof t.Cipher=="undefined"&&(t.Cipher=__Crypto.__import(__Crypto,"titaniumcore.crypto.Cipher"));var i=__Crypto.str2utf8(e.params.plaintext),s=__Crypto.base16_decode(e.params.key),o=t.Cipher.create(t.Cipher.RIJNDAEL,t.Cipher.ENCRYPT,t.Cipher.ECB,t.Cipher.ISO10126);cipher_text=__Crypto.base16_encode(o.execute(s,i)),n({ciphertext:cipher_text})})});if(e.params.algorithm.toLowerCase()==="rsa")return h(e,n,r);if(e.params.algorithm.toLowerCase()==="aes")return d(e,n,r);r("encrypt_bad_algorithm",{},e);return},decrypt:function(){var o=!1,u={aes:["key","ciphertext"]};i()&&u.aes.push("iv");var a=u[e.params.algorithm.toLowerCase()];if(!a){r("decrypt_bad_algorithm",{},e);return}for(var l=0;l<a;l++){var c=a[l];if(!e.params[c]){o=!0,r("no_params_"+c,{},e);break}}if(o)return;var h;i()?h=function(e,t,n){if(typeof CryptoJS=="undefined")return n("security library is missing.Error: can not find CryptoJS.");var r=CryptoJS.enc.Hex.parse(e.params.ciphertext),i=CryptoJS.enc.Base64.stringify(r),s=CryptoJS.AES.decrypt(i,CryptoJS.enc.Hex.parse(e.params.key),{iv:CryptoJS.enc.Hex.parse(e.params.iv)});plain_text=s.toString(CryptoJS.enc.Utf8),t({plaintext:plain_text})}:h=function(e,n,r){s(function(){if(typeof __Crypto=="undefined")return r("legacy security library is missing. Error: can not find __Crypto.");typeof t.Cipher=="undefined"&&(t.Cipher=__Crypto.__import(__Crypto,"titaniumcore.crypto.Cipher"));var i=__Crypto.base16_decode(e.params.ciphertext),s=__Crypto.base16_decode(e.params.key),o=t.Cipher.create(t.Cipher.RIJNDAEL,t.Cipher.DECRYPT,t.Cipher.ECB,t.Cipher.ISO10126);plain_text=__Crypto.utf82str(o.execute(s,i)),n({plaintext:plain_text})})};if(e.params.algorithm.toLowerCase()!=="aes"){r("decrypt_bad_algorithm",{},e);return}h(e,n,r)},hash:function(){if(!e.params.text){r("hash_no_text",{},e);return}if(typeof CryptoJS=="undefined")return r("security library is missing.Error: can not find CryptoJS.");var t;if(e.params.algorithm.toLowerCase()==="md5")t=CryptoJS.MD5(e.params.text).toString(CryptoJS.enc.Hex);else if(e.params.algorithm.toLowerCase()==="sha1")t=CryptoJS.SHA1(e.params.text).toString(CryptoJS.enc.Hex);else if(e.params.algorithm.toLowerCase()==="sha256")t=CryptoJS.SHA256(e.params.text).toString(CryptoJS.enc.Hex);else{if(e.params.algorithm.toLowerCase()!=="sha512")return r("hash_unsupported_algorithm: "+e.params.algorithm);t=CryptoJS.SHA512(e.params.text).toString(CryptoJS.enc.Hex)}n({hashvalue:t})}};o[e.act]?o[e.act]():r("data_badact",e)},t.hash=function(e,n,r){var i={};typeof e.algorithm=="undefined"&&(e.algorithm="MD5"),i.act="hash",i.params=e,t.sec(i,n,r)}}(this);