!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.feedhenry=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){var f=f||function(a,b){var c={},d=c.lib={},e=d.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var c=new a;return b&&c.mixIn(b),c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)}),c.init.prototype=c,c.$super=this,c},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=d.WordArray=e.extend({init:function(a,c){a=this.words=a||[],c!=b?this.sigBytes=c:this.sigBytes=4*a.length},toString:function(a){return(a||h).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes,e=a.sigBytes;if(this.clamp(),d%4)for(var f=0;e>f;f++){var g=c[f>>>2]>>>24-f%4*8&255;b[d+f>>>2]|=g<<24-(d+f)%4*8}else if(c.length>65535)for(var f=0;e>f;f+=4)b[d+f>>>2]=c[f>>>2];else b.push.apply(b,c);return this.sigBytes+=e,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-c%4*8,b.length=a.ceil(c/4)},clone:function(){var a=e.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new f.init(c,b)}}),g=c.enc={},h=g.Hex={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;c>e;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push((f>>>4).toString(16)),d.push((15&f).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-d%8*4;return new f.init(c,b/2)}},i=g.Latin1={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;c>e;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push(String.fromCharCode(f))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-d%4*8;return new f.init(c,b)}},j=g.Utf8={stringify:function(a){try{return decodeURIComponent(escape(i.stringify(a)))}catch(b){throw new Error("Malformed UTF-8 data")}},parse:function(a){return i.parse(unescape(encodeURIComponent(a)))}},k=d.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=j.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,g=this.blockSize,h=4*g,i=e/h;i=b?a.ceil(i):a.max((0|i)-this._minBufferSize,0);var j=i*g,k=a.min(4*j,e);if(j){for(var l=0;j>l;l+=g)this._doProcessBlock(d,l);var m=d.splice(0,j);c.sigBytes-=k}return new f.init(m,k)},clone:function(){var a=e.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0}),l=(d.Hasher=k.extend({cfg:e.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){a&&this._append(a);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new l.HMAC.init(a,c).finalize(b)}}}),c.algo={});return c}(Math);!function(){var a=f,b=a.lib,c=b.WordArray,d=a.enc;d.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp();for(var e=[],f=0;c>f;f+=3)for(var g=b[f>>>2]>>>24-f%4*8&255,h=b[f+1>>>2]>>>24-(f+1)%4*8&255,i=b[f+2>>>2]>>>24-(f+2)%4*8&255,j=g<<16|h<<8|i,k=0;4>k&&c>f+.75*k;k++)e.push(d.charAt(j>>>6*(3-k)&63));var l=d.charAt(64);if(l)for(;e.length%4;)e.push(l);return e.join("")},parse:function(a){var b=a.length,d=this._map,e=d.charAt(64);if(e){var f=a.indexOf(e);-1!=f&&(b=f)}for(var g=[],h=0,i=0;b>i;i++)if(i%4){var j=d.indexOf(a.charAt(i-1))<<i%4*2,k=d.indexOf(a.charAt(i))>>>6-i%4*2;g[h>>>2]|=(j|k)<<24-h%4*8,h++}return c.create(g,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),f.lib.Cipher||function(a){var b=f,c=b.lib,d=c.Base,e=c.WordArray,g=c.BufferedBlockAlgorithm,h=b.enc,i=(h.Utf8,h.Base64),j=b.algo,k=j.EvpKDF,l=c.Cipher=g.extend({cfg:d.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,c){this.cfg=this.cfg.extend(c),this._xformMode=a,this._key=b,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){a&&this._append(a);var b=this._doFinalize();return b},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function a(a){return"string"==typeof a?x:u}return function(b){return{encrypt:function(c,d,e){return a(d).encrypt(b,c,d,e)},decrypt:function(c,d,e){return a(d).decrypt(b,c,d,e)}}}}()}),m=(c.StreamCipher=l.extend({_doFinalize:function(){var a=this._process(!0);return a},blockSize:1}),b.mode={}),n=c.BlockCipherMode=d.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a,this._iv=b}}),o=m.CBC=function(){function b(b,c,d){var e=this._iv;if(e){var f=e;this._iv=a}else var f=this._prevBlock;for(var g=0;d>g;g++)b[c+g]^=f[g]}var c=n.extend();return c.Encryptor=c.extend({processBlock:function(a,c){var d=this._cipher,e=d.blockSize;b.call(this,a,c,e),d.encryptBlock(a,c),this._prevBlock=a.slice(c,c+e)}}),c.Decryptor=c.extend({processBlock:function(a,c){var d=this._cipher,e=d.blockSize,f=a.slice(c,c+e);d.decryptBlock(a,c),b.call(this,a,c,e),this._prevBlock=f}}),c}(),p=b.pad={},q=p.Pkcs7={pad:function(a,b){for(var c=4*b,d=c-a.sigBytes%c,f=d<<24|d<<16|d<<8|d,g=[],h=0;d>h;h+=4)g.push(f);var i=e.create(g,d);a.concat(i)},unpad:function(a){var b=255&a.words[a.sigBytes-1>>>2];a.sigBytes-=b}},r=(c.BlockCipher=l.extend({cfg:l.cfg.extend({mode:o,padding:q}),reset:function(){l.reset.call(this);var a=this.cfg,b=a.iv,c=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var d=c.createEncryptor;else{var d=c.createDecryptor;this._minBufferSize=1}this._mode=d.call(c,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else{var b=this._process(!0);a.unpad(b)}return b},blockSize:4}),c.CipherParams=d.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}})),s=b.format={},t=s.OpenSSL={stringify:function(a){var b=a.ciphertext,c=a.salt;if(c)var d=e.create([1398893684,1701076831]).concat(c).concat(b);else var d=b;return d.toString(i)},parse:function(a){var b=i.parse(a),c=b.words;if(1398893684==c[0]&&1701076831==c[1]){var d=e.create(c.slice(2,4));c.splice(0,4),b.sigBytes-=16}return r.create({ciphertext:b,salt:d})}},u=c.SerializableCipher=d.extend({cfg:d.extend({format:t}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d),f=e.finalize(b),g=e.cfg;return r.create({ciphertext:f,key:c,iv:g.iv,algorithm:a,mode:g.mode,padding:g.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){d=this.cfg.extend(d),b=this._parse(b,d.format);var e=a.createDecryptor(c,d).finalize(b.ciphertext);return e},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),v=b.kdf={},w=v.OpenSSL={execute:function(a,b,c,d){d||(d=e.random(8));var f=k.create({keySize:b+c}).compute(a,d),g=e.create(f.words.slice(b),4*c);return f.sigBytes=4*b,r.create({key:f,iv:g,salt:d})}},x=c.PasswordBasedCipher=u.extend({cfg:u.cfg.extend({kdf:w}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=d.kdf.execute(c,a.keySize,a.ivSize);d.iv=e.iv;var f=u.encrypt.call(this,a,b,e.key,d);return f.mixIn(e),f},decrypt:function(a,b,c,d){d=this.cfg.extend(d),b=this._parse(b,d.format);var e=d.kdf.execute(c,a.keySize,a.ivSize,b.salt);d.iv=e.iv;var f=u.decrypt.call(this,a,b,e.key,d);return f}})}(),function(){var a=f,b=a.lib,c=b.BlockCipher,d=a.algo,e=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=[];!function(){for(var a=[],b=0;256>b;b++)128>b?a[b]=b<<1:a[b]=b<<1^283;for(var c=0,d=0,b=0;256>b;b++){var f=d^d<<1^d<<2^d<<3^d<<4;f=f>>>8^255&f^99,e[c]=f,g[f]=c;var p=a[c],q=a[p],r=a[q],s=257*a[f]^16843008*f;h[c]=s<<24|s>>>8,i[c]=s<<16|s>>>16,j[c]=s<<8|s>>>24,k[c]=s;var s=16843009*r^65537*q^257*p^16843008*c;l[f]=s<<24|s>>>8,m[f]=s<<16|s>>>16,n[f]=s<<8|s>>>24,o[f]=s,c?(c=p^a[a[a[r^p]]],d^=a[a[d]]):c=d=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],q=d.AES=c.extend({_doReset:function(){for(var a=this._key,b=a.words,c=a.sigBytes/4,d=this._nRounds=c+6,f=4*(d+1),g=this._keySchedule=[],h=0;f>h;h++)if(c>h)g[h]=b[h];else{var i=g[h-1];h%c?c>6&&h%c==4&&(i=e[i>>>24]<<24|e[i>>>16&255]<<16|e[i>>>8&255]<<8|e[255&i]):(i=i<<8|i>>>24,i=e[i>>>24]<<24|e[i>>>16&255]<<16|e[i>>>8&255]<<8|e[255&i],i^=p[h/c|0]<<24),g[h]=g[h-c]^i}for(var j=this._invKeySchedule=[],k=0;f>k;k++){var h=f-k;if(k%4)var i=g[h];else var i=g[h-4];4>k||4>=h?j[k]=i:j[k]=l[e[i>>>24]]^m[e[i>>>16&255]]^n[e[i>>>8&255]]^o[e[255&i]]}},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,h,i,j,k,e)},decryptBlock:function(a,b){var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c,this._doCryptBlock(a,b,this._invKeySchedule,l,m,n,o,g);var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c},_doCryptBlock:function(a,b,c,d,e,f,g,h){for(var i=this._nRounds,j=a[b]^c[0],k=a[b+1]^c[1],l=a[b+2]^c[2],m=a[b+3]^c[3],n=4,o=1;i>o;o++){var p=d[j>>>24]^e[k>>>16&255]^f[l>>>8&255]^g[255&m]^c[n++],q=d[k>>>24]^e[l>>>16&255]^f[m>>>8&255]^g[255&j]^c[n++],r=d[l>>>24]^e[m>>>16&255]^f[j>>>8&255]^g[255&k]^c[n++],s=d[m>>>24]^e[j>>>16&255]^f[k>>>8&255]^g[255&l]^c[n++];j=p,k=q,l=r,m=s}var p=(h[j>>>24]<<24|h[k>>>16&255]<<16|h[l>>>8&255]<<8|h[255&m])^c[n++],q=(h[k>>>24]<<24|h[l>>>16&255]<<16|h[m>>>8&255]<<8|h[255&j])^c[n++],r=(h[l>>>24]<<24|h[m>>>16&255]<<16|h[j>>>8&255]<<8|h[255&k])^c[n++],s=(h[m>>>24]<<24|h[j>>>16&255]<<16|h[k>>>8&255]<<8|h[255&l])^c[n++];a[b]=p,a[b+1]=q,a[b+2]=r,a[b+3]=s},keySize:8});a.AES=c._createHelper(q)}(),function(a){function b(a,b,c,d,e,f,g){var h=a+(b&c|~b&d)+e+g;return(h<<f|h>>>32-f)+b}function c(a,b,c,d,e,f,g){var h=a+(b&d|c&~d)+e+g;return(h<<f|h>>>32-f)+b}function d(a,b,c,d,e,f,g){var h=a+(b^c^d)+e+g;return(h<<f|h>>>32-f)+b}function e(a,b,c,d,e,f,g){var h=a+(c^(b|~d))+e+g;return(h<<f|h>>>32-f)+b}var g=f,h=g.lib,i=h.WordArray,j=h.Hasher,k=g.algo,l=[];!function(){for(var b=0;64>b;b++)l[b]=4294967296*a.abs(a.sin(b+1))|0}();var m=k.MD5=j.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,f){for(var g=0;16>g;g++){var h=f+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var j=this._hash.words,k=a[f+0],m=a[f+1],n=a[f+2],o=a[f+3],p=a[f+4],q=a[f+5],r=a[f+6],s=a[f+7],t=a[f+8],u=a[f+9],v=a[f+10],w=a[f+11],x=a[f+12],y=a[f+13],z=a[f+14],A=a[f+15],B=j[0],C=j[1],D=j[2],E=j[3];B=b(B,C,D,E,k,7,l[0]),E=b(E,B,C,D,m,12,l[1]),D=b(D,E,B,C,n,17,l[2]),C=b(C,D,E,B,o,22,l[3]),B=b(B,C,D,E,p,7,l[4]),E=b(E,B,C,D,q,12,l[5]),D=b(D,E,B,C,r,17,l[6]),C=b(C,D,E,B,s,22,l[7]),B=b(B,C,D,E,t,7,l[8]),E=b(E,B,C,D,u,12,l[9]),D=b(D,E,B,C,v,17,l[10]),C=b(C,D,E,B,w,22,l[11]),B=b(B,C,D,E,x,7,l[12]),E=b(E,B,C,D,y,12,l[13]),D=b(D,E,B,C,z,17,l[14]),C=b(C,D,E,B,A,22,l[15]),B=c(B,C,D,E,m,5,l[16]),E=c(E,B,C,D,r,9,l[17]),D=c(D,E,B,C,w,14,l[18]),C=c(C,D,E,B,k,20,l[19]),B=c(B,C,D,E,q,5,l[20]),E=c(E,B,C,D,v,9,l[21]),D=c(D,E,B,C,A,14,l[22]),C=c(C,D,E,B,p,20,l[23]),B=c(B,C,D,E,u,5,l[24]),E=c(E,B,C,D,z,9,l[25]),D=c(D,E,B,C,o,14,l[26]),C=c(C,D,E,B,t,20,l[27]),B=c(B,C,D,E,y,5,l[28]),E=c(E,B,C,D,n,9,l[29]),D=c(D,E,B,C,s,14,l[30]),C=c(C,D,E,B,x,20,l[31]),B=d(B,C,D,E,q,4,l[32]),E=d(E,B,C,D,t,11,l[33]),D=d(D,E,B,C,w,16,l[34]),C=d(C,D,E,B,z,23,l[35]),B=d(B,C,D,E,m,4,l[36]),E=d(E,B,C,D,p,11,l[37]),D=d(D,E,B,C,s,16,l[38]),C=d(C,D,E,B,v,23,l[39]),B=d(B,C,D,E,y,4,l[40]),E=d(E,B,C,D,k,11,l[41]),D=d(D,E,B,C,o,16,l[42]),C=d(C,D,E,B,r,23,l[43]),B=d(B,C,D,E,u,4,l[44]),E=d(E,B,C,D,x,11,l[45]),D=d(D,E,B,C,A,16,l[46]),C=d(C,D,E,B,n,23,l[47]),B=e(B,C,D,E,k,6,l[48]),E=e(E,B,C,D,s,10,l[49]),D=e(D,E,B,C,z,15,l[50]),C=e(C,D,E,B,q,21,l[51]),B=e(B,C,D,E,x,6,l[52]),E=e(E,B,C,D,o,10,l[53]),D=e(D,E,B,C,v,15,l[54]),C=e(C,D,E,B,m,21,l[55]),B=e(B,C,D,E,t,6,l[56]),E=e(E,B,C,D,A,10,l[57]),D=e(D,E,B,C,r,15,l[58]),C=e(C,D,E,B,y,21,l[59]),B=e(B,C,D,E,p,6,l[60]),E=e(E,B,C,D,w,10,l[61]),D=e(D,E,B,C,n,15,l[62]),C=e(C,D,E,B,u,21,l[63]),j[0]=j[0]+B|0,j[1]=j[1]+C|0,j[2]=j[2]+D|0,j[3]=j[3]+E|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;c[e>>>5]|=128<<24-e%32;var f=a.floor(d/4294967296),g=d;c[(e+64>>>9<<4)+15]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[(e+64>>>9<<4)+14]=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8),b.sigBytes=4*(c.length+1),this._process();for(var h=this._hash,i=h.words,j=0;4>j;j++){var k=i[j];i[j]=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8)}return h},clone:function(){var a=j.clone.call(this);return a._hash=this._hash.clone(),a}});g.MD5=j._createHelper(m),g.HmacMD5=j._createHmacHelper(m)}(Math),function(){var a=f,b=a.lib,c=b.WordArray,d=b.Hasher,e=a.algo,g=[],h=e.SHA1=d.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],h=c[3],i=c[4],j=0;80>j;j++){if(16>j)g[j]=0|a[b+j];else{var k=g[j-3]^g[j-8]^g[j-14]^g[j-16];g[j]=k<<1|k>>>31}var l=(d<<5|d>>>27)+i+g[j];l+=20>j?(e&f|~e&h)+1518500249:40>j?(e^f^h)+1859775393:60>j?(e&f|e&h|f&h)-1894007588:(e^f^h)-899497514,i=h,h=f,f=e<<30|e>>>2,e=d,d=l}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=d.clone.call(this);return a._hash=this._hash.clone(),a}});a.SHA1=d._createHelper(h),a.HmacSHA1=d._createHmacHelper(h)}(),function(a){var b=f,c=b.lib,d=c.Base,e=c.WordArray,g=b.x64={};g.Word=d.extend({init:function(a,b){this.high=a,this.low=b}}),g.WordArray=d.extend({init:function(b,c){b=this.words=b||[],c!=a?this.sigBytes=c:this.sigBytes=8*b.length},toX32:function(){for(var a=this.words,b=a.length,c=[],d=0;b>d;d++){var f=a[d];c.push(f.high),c.push(f.low)}return e.create(c,this.sigBytes)},clone:function(){for(var a=d.clone.call(this),b=a.words=this.words.slice(0),c=b.length,e=0;c>e;e++)b[e]=b[e].clone();return a}})}(),function(a){var b=f,c=b.lib,d=c.WordArray,e=c.Hasher,g=b.algo,h=[],i=[];!function(){function b(b){for(var c=a.sqrt(b),d=2;c>=d;d++)if(!(b%d))return!1;return!0}function c(a){return 4294967296*(a-(0|a))|0}for(var d=2,e=0;64>e;)b(d)&&(8>e&&(h[e]=c(a.pow(d,.5))),i[e]=c(a.pow(d,1/3)),e++),d++}();var j=[],k=g.SHA256=e.extend({_doReset:function(){this._hash=new d.init(h.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],k=c[5],l=c[6],m=c[7],n=0;64>n;n++){if(16>n)j[n]=0|a[b+n];else{var o=j[n-15],p=(o<<25|o>>>7)^(o<<14|o>>>18)^o>>>3,q=j[n-2],r=(q<<15|q>>>17)^(q<<13|q>>>19)^q>>>10;j[n]=p+j[n-7]+r+j[n-16]}var s=h&k^~h&l,t=d&e^d&f^e&f,u=(d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22),v=(h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25),w=m+v+s+i[n]+j[n],x=u+t;m=l,l=k,k=h,h=g+w|0,g=f,f=e,e=d,d=w+x|0}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+g|0,c[4]=c[4]+h|0,c[5]=c[5]+k|0,c[6]=c[6]+l|0,c[7]=c[7]+m|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;return c[e>>>5]|=128<<24-e%32,c[(e+64>>>9<<4)+14]=a.floor(d/4294967296),c[(e+64>>>9<<4)+15]=d,b.sigBytes=4*c.length,this._process(),this._hash},clone:function(){var a=e.clone.call(this);return a._hash=this._hash.clone(),a}});b.SHA256=e._createHelper(k),b.HmacSHA256=e._createHmacHelper(k)}(Math),function(){function a(){return g.create.apply(g,arguments)}var b=f,c=b.lib,d=c.Hasher,e=b.x64,g=e.Word,h=e.WordArray,i=b.algo,j=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],k=[];!function(){for(var b=0;80>b;b++)k[b]=a()}();var l=i.SHA512=d.extend({_doReset:function(){this._hash=new h.init([new g.init(1779033703,4089235720),new g.init(3144134277,2227873595),new g.init(1013904242,4271175723),new g.init(2773480762,1595750129),new g.init(1359893119,2917565137),new g.init(2600822924,725511199),new g.init(528734635,4215389547),new g.init(1541459225,327033209)])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],l=c[6],m=c[7],n=d.high,o=d.low,p=e.high,q=e.low,r=f.high,s=f.low,t=g.high,u=g.low,v=h.high,w=h.low,x=i.high,y=i.low,z=l.high,A=l.low,B=m.high,C=m.low,D=n,E=o,F=p,G=q,H=r,I=s,J=t,K=u,L=v,M=w,N=x,O=y,P=z,Q=A,R=B,S=C,T=0;80>T;T++){var U=k[T];if(16>T)var V=U.high=0|a[b+2*T],W=U.low=0|a[b+2*T+1];else{var X=k[T-15],Y=X.high,Z=X.low,$=(Y>>>1|Z<<31)^(Y>>>8|Z<<24)^Y>>>7,_=(Z>>>1|Y<<31)^(Z>>>8|Y<<24)^(Z>>>7|Y<<25),aa=k[T-2],ba=aa.high,ca=aa.low,da=(ba>>>19|ca<<13)^(ba<<3|ca>>>29)^ba>>>6,ea=(ca>>>19|ba<<13)^(ca<<3|ba>>>29)^(ca>>>6|ba<<26),fa=k[T-7],ga=fa.high,ha=fa.low,ia=k[T-16],ja=ia.high,ka=ia.low,W=_+ha,V=$+ga+(_>>>0>W>>>0?1:0),W=W+ea,V=V+da+(ea>>>0>W>>>0?1:0),W=W+ka,V=V+ja+(ka>>>0>W>>>0?1:0);U.high=V,U.low=W}var la=L&N^~L&P,ma=M&O^~M&Q,na=D&F^D&H^F&H,oa=E&G^E&I^G&I,pa=(D>>>28|E<<4)^(D<<30|E>>>2)^(D<<25|E>>>7),qa=(E>>>28|D<<4)^(E<<30|D>>>2)^(E<<25|D>>>7),ra=(L>>>14|M<<18)^(L>>>18|M<<14)^(L<<23|M>>>9),sa=(M>>>14|L<<18)^(M>>>18|L<<14)^(M<<23|L>>>9),ta=j[T],ua=ta.high,va=ta.low,wa=S+sa,xa=R+ra+(S>>>0>wa>>>0?1:0),wa=wa+ma,xa=xa+la+(ma>>>0>wa>>>0?1:0),wa=wa+va,xa=xa+ua+(va>>>0>wa>>>0?1:0),wa=wa+W,xa=xa+V+(W>>>0>wa>>>0?1:0),ya=qa+oa,za=pa+na+(qa>>>0>ya>>>0?1:0);R=P,S=Q,P=N,Q=O,N=L,O=M,M=K+wa|0,L=J+xa+(K>>>0>M>>>0?1:0)|0,J=H,K=I,H=F,I=G,F=D,G=E,E=wa+ya|0,D=xa+za+(wa>>>0>E>>>0?1:0)|0}o=d.low=o+E,d.high=n+D+(E>>>0>o>>>0?1:0),q=e.low=q+G,e.high=p+F+(G>>>0>q>>>0?1:0),s=f.low=s+I,f.high=r+H+(I>>>0>s>>>0?1:0),u=g.low=u+K,g.high=t+J+(K>>>0>u>>>0?1:0),w=h.low=w+M,h.high=v+L+(M>>>0>w>>>0?1:0),y=i.low=y+O,i.high=x+N+(O>>>0>y>>>0?1:0),A=l.low=A+Q,l.high=z+P+(Q>>>0>A>>>0?1:0),C=m.low=C+S,m.high=B+R+(S>>>0>C>>>0?1:0)},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;b[d>>>5]|=128<<24-d%32,b[(d+128>>>10<<5)+30]=Math.floor(c/4294967296),b[(d+128>>>10<<5)+31]=c,a.sigBytes=4*b.length,this._process();var e=this._hash.toX32();return e},clone:function(){var a=d.clone.call(this);return a._hash=this._hash.clone(),a},blockSize:32});b.SHA512=d._createHelper(l),b.HmacSHA512=d._createHmacHelper(l)}(),function(a){var b=f,c=b.lib,d=c.WordArray,e=c.Hasher,g=b.x64,h=g.Word,i=b.algo,j=[],k=[],l=[];!function(){for(var a=1,b=0,c=0;24>c;c++){j[a+5*b]=(c+1)*(c+2)/2%64;var d=b%5,e=(2*a+3*b)%5;a=d,b=e}for(var a=0;5>a;a++)for(var b=0;5>b;b++)k[a+5*b]=b+(2*a+3*b)%5*5;for(var f=1,g=0;24>g;g++){for(var i=0,m=0,n=0;7>n;n++){if(1&f){var o=(1<<n)-1;32>o?m^=1<<o:i^=1<<o-32}128&f?f=f<<1^113:f<<=1}l[g]=h.create(i,m)}}();var m=[];!function(){for(var a=0;25>a;a++)m[a]=h.create()}();var n=i.SHA3=e.extend({cfg:e.cfg.extend({outputLength:512}),_doReset:function(){for(var a=this._state=[],b=0;25>b;b++)a[b]=new h.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(a,b){for(var c=this._state,d=this.blockSize/2,e=0;d>e;e++){var f=a[b+2*e],g=a[b+2*e+1];f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),g=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8);var h=c[e];h.high^=g,h.low^=f}for(var i=0;24>i;i++){for(var n=0;5>n;n++){for(var o=0,p=0,q=0;5>q;q++){var h=c[n+5*q];o^=h.high,p^=h.low}var r=m[n];r.high=o,r.low=p}for(var n=0;5>n;n++)for(var s=m[(n+4)%5],t=m[(n+1)%5],u=t.high,v=t.low,o=s.high^(u<<1|v>>>31),p=s.low^(v<<1|u>>>31),q=0;5>q;q++){var h=c[n+5*q];h.high^=o,h.low^=p}for(var w=1;25>w;w++){var h=c[w],x=h.high,y=h.low,z=j[w];if(32>z)var o=x<<z|y>>>32-z,p=y<<z|x>>>32-z;else var o=y<<z-32|x>>>64-z,p=x<<z-32|y>>>64-z;var A=m[k[w]];A.high=o,A.low=p}var B=m[0],C=c[0];B.high=C.high,B.low=C.low;for(var n=0;5>n;n++)for(var q=0;5>q;q++){var w=n+5*q,h=c[w],D=m[w],E=m[(n+1)%5+5*q],F=m[(n+2)%5+5*q];h.high=D.high^~E.high&F.high,h.low=D.low^~E.low&F.low}var h=c[0],G=l[i];h.high^=G.high,h.low^=G.low}},_doFinalize:function(){var b=this._data,c=b.words,e=(8*this._nDataBytes,8*b.sigBytes),f=32*this.blockSize;c[e>>>5]|=1<<24-e%32,c[(a.ceil((e+1)/f)*f>>>5)-1]|=128,b.sigBytes=4*c.length,this._process();for(var g=this._state,h=this.cfg.outputLength/8,i=h/8,j=[],k=0;i>k;k++){var l=g[k],m=l.high,n=l.low;m=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8),n=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),j.push(n),j.push(m)}return new d.init(j,h)},clone:function(){for(var a=e.clone.call(this),b=a._state=this._state.slice(0),c=0;25>c;c++)b[c]=b[c].clone();return a}});b.SHA3=e._createHelper(n),b.HmacSHA3=e._createHmacHelper(n)}(Math),e("undefined"!=typeof f?f:window.CryptoJS)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,c){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){var f=function(a,b){if(!(this instanceof f))return new f(a,b);if(!JSON)throw"JSON unavailable! Include http://www.json.org/json2.js to fix.";if(!(arguments.length<=2&&arguments.length>0))throw"Incorrect # of ctor args!";if(b="function"==typeof arguments[0]?arguments[0]:arguments[1],a="function"==typeof arguments[0]?{}:arguments[0],"function"!=typeof b)throw"No callback was provided";this.record=a.record||"record",this.name=a.name||"records";var c;if(a.adapter){"string"==typeof a.adapter&&(a.adapter=[a.adapter]);for(var d=0,e=a.adapter.length;e>d;d++){for(var g=f.adapters.length-1;g>=0&&(f.adapters[g].adapter!==a.adapter[d]||!(c=f.adapters[g].valid()?f.adapters[g]:void 0));g--);if(c)break}}else for(var g=0,h=f.adapters.length;h>g&&!(c=f.adapters[g].valid()?f.adapters[g]:void 0);g++);if(!c)throw"No valid adapter.";for(var d in c)this[d]=c[d];for(var g=0,h=f.plugins.length;h>g;g++)f.plugins[g].call(this);this.init(a,b)};f.adapters=[],f.adapter=function(a,b){b.adapter=a;var c="adapter valid init keys save batch get exists all remove nuke".split(" "),d=this.prototype.indexOf;for(var e in b)if(-1===d(c,e))throw"Invalid adapter! Nonstandard method: "+e;f.adapters.splice(0,0,b)},f.plugins=[],f.plugin=function(a){for(var b in a)"init"===b?f.plugins.push(a[b]):this.prototype[b]=a[b]},f.prototype={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},indexOf:function(a,b,c,d){if(a.indexOf)return a.indexOf(b);for(c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},lambda:function(a){return this.fn(this.record,a)},fn:function(a,b){return"string"==typeof b?new Function(a,b):b},uuid:function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},each:function(a){var b=this.lambda(a);if(this.__results)for(var c=0,d=this.__results.length;d>c;c++)b.call(this,this.__results[c],c);else this.all(function(a){for(var c=0,d=a.length;d>c;c++)b.call(this,a[c],c)});return this}},f.adapter("window-name",function(){"undefined"==typeof window&&(window={top:{}});var a={};try{a=JSON.parse(window.top.name)}catch(b){}return{valid:function(){return"undefined"!=typeof window.top.name},init:function(b,c){return a[this.name]=a[this.name]||{index:[],store:{}},this.index=a[this.name].index,this.store=a[this.name].store,this.fn(this.name,c).call(this,this),this},keys:function(a){return this.fn("keys",a).call(this,this.index),this},save:function(b,c){var d=b.key||this.uuid();return this.exists(d,function(e){e||(b.key&&delete b.key,this.index.push(d)),this.store[d]=b;try{window.top.name=JSON.stringify(a)}catch(f){throw e||(this.index.pop(),delete this.store[d]),f}c&&(b.key=d,this.lambda(c).call(this,b))}),this},batch:function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)this.save(a[d],function(a){c.push(a)});return b&&this.lambda(b).call(this,c),this},get:function(a,b){var c;if(this.isArray(a)){c=[];for(var d=0,e=a.length;e>d;d++)c.push(this.store[a[d]])}else c=this.store[a],c&&(c.key=a);return b&&this.lambda(b).call(this,c),this},exists:function(a,b){return this.lambda(b).call(this,!!this.store[a]),this},all:function(a){for(var b=[],c=0,d=this.index.length;d>c;c++){var e=this.store[this.index[c]];e.key=this.index[c],b.push(e)}return this.fn(this.name,a).call(this,b),this},remove:function(b,c){for(var d=this.isArray(b)?b:[b],e=0,f=d.length;f>e;e++){var g=d[e].key?d[e].key:d[e],h=this.indexOf(this.index,g);0>h||(delete this.store[g],this.index.splice(h,1))}return window.top.name=JSON.stringify(a),c&&this.lambda(c).call(this),this},nuke:function(b){return this.store=a[this.name].store={},this.index=a[this.name].index=[],window.top.name=JSON.stringify(a),b&&this.lambda(b).call(this),this}}}()),f.adapter("dom",function(){var a=null;try{a=window.localStorage}catch(b){}var c=function(b){return{key:b+"._index_",all:function(){var b=a.getItem(this.key);return b&&(b=JSON.parse(b)),null===b&&a.setItem(this.key,JSON.stringify([])),JSON.parse(a.getItem(this.key))},add:function(b){var c=this.all();c.push(b),a.setItem(this.key,JSON.stringify(c))},del:function(b){for(var c=this.all(),d=[],e=0,f=c.length;f>e;e++)c[e]!=b&&d.push(c[e]);a.setItem(this.key,JSON.stringify(d))},find:function(a){for(var b=this.all(),c=0,d=b.length;d>c;c++)if(a===b[c])return c;return!1}}};return{valid:function(){return!!a&&function(){var b=!0,c=Math.random();try{a.setItem(c,c)}catch(d){b=!1}return a.removeItem(c),b}()},init:function(a,b){this.indexer=c(this.name),b&&this.fn(this.name,b).call(this,this)},save:function(b,c){var d=b.key?this.name+"."+b.key:this.name+"."+this.uuid();return delete b.key,a.setItem(d,JSON.stringify(b)),this.indexer.find(d)===!1&&this.indexer.add(d),b.key=d.slice(this.name.length+1),c&&this.lambda(c).call(this,b),this},batch:function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)this.save(a[d],function(a){c.push(a)});return b&&this.lambda(b).call(this,c),this},keys:function(a){if(a){var b=this.name,c=this.indexer.all(),d=[];if(Array.prototype.map)d=c.map(function(a){return a.replace(b+".","")});else for(var e in c)d.push(e.replace(b+".",""));this.fn("keys",a).call(this,d)}return this},get:function(b,c){if(this.isArray(b)){for(var d=[],e=0,f=b.length;f>e;e++){var g=this.name+"."+b[e],h=a.getItem(g);h&&(h=JSON.parse(h),h.key=b[e]),d.push(h)}c&&this.lambda(c).call(this,d)}else{var g=this.name+"."+b,h=a.getItem(g);h&&(h=JSON.parse(h),h.key=b),c&&this.lambda(c).call(this,h)}return this},exists:function(a,b){var c=this.indexer.find(this.name+"."+a)===!1?!1:!0;return this.lambda(b).call(this,c),this},all:function(b){for(var c,d,e=this.indexer.all(),f=[],g=0,h=e.length;h>g;g++)d=e[g],c=JSON.parse(a.getItem(d)),c.key=d.replace(this.name+".",""),f.push(c);return b&&this.fn(this.name,b).call(this,f),this},remove:function(b,c){var d=this;if(this.isArray(b)){var e,f=b.length,g=function(a){d.remove(b[a],function(){--f>0||c&&d.lambda(c).call(d)})};for(e=0;e<b.length;e++)g(e);return this}var h=this.name+"."+(b.key?b.key:b);return this.indexer.del(h),a.removeItem(h),c&&this.lambda(c).call(this),this},nuke:function(a){return this.all(function(b){for(var c=0,d=b.length;d>c;c++)this.remove(b[c]);a&&this.lambda(a).call(this)}),this}}}()),f.adapter("webkit-sqlite",function(){var a=function(a,b){console&&console.log("error in sqlite adaptor!",a,b)},b=function(){return new Date};return{valid:function(){return!!window.openDatabase},init:function(b,c){var d=this,e=d.fn(d.name,c),f="CREATE TABLE IF NOT EXISTS "+this.record+" (id NVARCHAR(32) UNIQUE PRIMARY KEY, value TEXT, timestamp REAL)",g=function(){return e.call(d,d)};b&&"function"==typeof b.fail&&(a=b.fail),this.db=openDatabase(this.name,"1.0.0",this.name,65536),this.db.transaction(function(b){b.executeSql(f,[],g,a)})},keys:function(b){var c=this.lambda(b),d=this,e="SELECT id FROM "+this.record+" ORDER BY timestamp DESC";return this.db.readTransaction(function(b){var f=function(a,b){if(0==b.rows.length)c.call(d,[]);else{for(var e=[],f=0,g=b.rows.length;g>f;f++)e.push(b.rows.item(f).id);c.call(d,e)}};b.executeSql(e,[],f,a)}),this},save:function(c,d,e){var f=this;objs=(this.isArray(c)?c:[c]).map(function(a){return a.key||(a.key=f.uuid()),a}),ins="INSERT OR REPLACE INTO "+this.record+" (value, timestamp, id) VALUES (?,?,?)",win=function(){d&&f.lambda(d).call(f,f.isArray(c)?objs:objs[0])},e=e||function(){},insvals=[],ts=b();try{for(var g=0,h=objs.length;h>g;g++)insvals[g]=[JSON.stringify(objs[g]),ts,objs[g].key]}catch(i){throw a(i),i}return f.db.transaction(function(a){for(var b=0,c=objs.length;c>b;b++)a.executeSql(ins,insvals[b])},function(b,c){a(b,c)},win),this},batch:function(a,b){return this.save(a,b)},get:function(b,c){var d=this,e="",f=this.isArray(b)?b:[b];e="SELECT id, value FROM "+this.record+" WHERE id IN ("+f.map(function(){return"?"}).join(",")+")";var g=function(a,e){for(var g,h,i={},j=0,k=e.rows.length;k>j;j++)g=JSON.parse(e.rows.item(j).value),g.key=e.rows.item(j).id,i[g.key]=g;h=f.map(function(a){return i[a]}),d.isArray(b)||(h=h.length?h[0]:null),c&&d.lambda(c).call(d,h)};return this.db.readTransaction(function(b){b.executeSql(e,f,g,a)}),this},exists:function(b,c){var d="SELECT * FROM "+this.record+" WHERE id = ?",e=this,f=function(a,b){c&&e.fn("exists",c).call(e,b.rows.length>0)};return this.db.readTransaction(function(c){c.executeSql(d,[b],f,a);
}),this},all:function(b){var c=this,d="SELECT * FROM "+this.record,e=[],f=this.fn(this.name,b)||void 0,g=function(a,b){if(0!=b.rows.length)for(var d=0,g=b.rows.length;g>d;d++){var h=JSON.parse(b.rows.item(d).value);h.key=b.rows.item(d).id,e.push(h)}f&&f.call(c,e)};return this.db.readTransaction(function(b){b.executeSql(d,[],g,a)}),this},remove:function(b,c){var d,e=this,f="DELETE FROM "+this.record+" WHERE id ",g=function(){c&&e.lambda(c).call(e)};return this.isArray(b)?(d=b,f+="IN ("+d.map(function(){return"?"}).join(",")+")"):(f+="= ?",d=[b]),d=d.map(function(a){return a.key?a.key:a}),this.db.transaction(function(b){b.executeSql(f,d,g,a)}),this},nuke:function(b){var c="DELETE FROM "+this.record,d=this,e=b?function(){d.lambda(b).call(d)}:function(){};return this.db.transaction(function(b){b.executeSql(c,[],e,a)}),this}}}()),f.adapter("indexed-db",function(){function a(a,b){console&&console.log("error in indexed-db adapter!"+a.message,a,b)}function b(){return window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.oIndexedDB||window.msIndexedDB}return{valid:function(){return!!b()},init:function(c,d){this.idb=b(),this.waiting=[];var e=this.idb.open(this.name,2),f=this,g=f.fn(f.name,d),h=function(){return g.call(f,f)};c&&"function"==typeof c.fail&&(a=c.fail),e.onupgradeneeded=function(a){f.store=e.result.createObjectStore("teststore",{autoIncrement:!0});for(var b=0;b<f.waiting.length;b++)f.waiting[b].call(f);f.waiting=[],h()},e.onsuccess=function(b){if(f.db=e.result,"2.0"!=f.db.version){if("function"==typeof f.db.setVersion){var c=f.db.setVersion("2.0");c.onsuccess=function(a){f.store=f.db.createObjectStore("teststore",{autoIncrement:!0});for(var b=0;b<f.waiting.length;b++)f.waiting[b].call(f);f.waiting=[],h()},c.onerror=function(b){a(b)}}}else{f.store={};for(var d=0;d<f.waiting.length;d++)f.waiting[d].call(f);f.waiting=[],h()}},e.onerror=a},save:function(b,c){if(!this.store)return void this.waiting.push(function(){this.save(b,c)});var d=this,e=function(a){c&&(b.key=a.target.result,d.lambda(c).call(d,b))},f="readwrite",g=this.db.transaction(["teststore"],f),h=g.objectStore("teststore"),i=b.key?h.put(b,b.key):h.put(b);return i.onsuccess=e,i.onerror=a,this},batch:function(a,b){for(var c=[],d=!1,e=this,f=function(b){c.push(b),d=c.length===a.length},g=setInterval(function(){d&&(b&&e.lambda(b).call(e,c),clearInterval(g))},200),h=0,i=a.length;i>h;h++)this.save(a[h],f);return this},get:function(b,c){if(!this.store||!this.db)return void this.waiting.push(function(){this.get(b,c)});var d=this,e=function(a){c&&d.lambda(c).call(d,a.target.result)};if(this.isArray(b))for(var f=[],g=!1,h=b,i=function(a){f.push(a),g=f.length===h.length},j=setInterval(function(){g&&(c&&d.lambda(c).call(d,f),clearInterval(j))},200),k=0,l=h.length;l>k;k++)this.get(h[k],i);else{var m=this.db.transaction("teststore").objectStore("teststore").get(b);m.onsuccess=e,m.onerror=function(b){a(b)}}return this},all:function(a){if(!this.store)return void this.waiting.push(function(){this.all(a)});var b=this.fn(this.name,a)||void 0,c=this,d=this.db.transaction("teststore").objectStore("teststore"),e=[];return d.openCursor().onsuccess=function(a){var d=a.target.result;d?(e.push(d.value),d["continue"]()):b&&b.call(c,e)},this},remove:function(b,c){if(!this.store)return void this.waiting.push(function(){this.remove(b,c)});"object"==typeof b&&(b=b.key);var d=this,e=function(){c&&d.lambda(c).call(d)},f=this.db.transaction(["teststore"],"readwrite").objectStore("teststore")["delete"](b);return f.onsuccess=e,f.onerror=a,this},nuke:function(b){if(!this.store)return void this.waiting.push(function(){this.nuke(b)});var c=this,d=b?function(){c.lambda(b).call(c)}:function(){};try{this.db.transaction(["teststore"],"readwrite").objectStore("teststore").clear().onsuccess=d}catch(e){a()}return this}}}()),f.adapter("html5-filesystem",function(a){var b=a.FileError,c=function(a){var c,d=!0;switch(a.code){case b.QUOTA_EXCEEDED_ERR:c="QUOTA_EXCEEDED_ERR";break;case b.NOT_FOUND_ERR:c="NOT_FOUND_ERR",d=!1;break;case b.SECURITY_ERR:c="SECURITY_ERR";break;case b.INVALID_MODIFICATION_ERR:c="INVALID_MODIFICATION_ERR";break;case b.INVALID_STATE_ERR:c="INVALID_STATE_ERR";break;default:c="Unknown Error"}console&&d&&console.error(a,c)},d=function(a,b,e){var f=e||[];a.readEntries(function(c){c.length?d(a,b,f.concat(Array.prototype.slice.call(c))):b&&b(f.map(function(a){return a.name}))},c)},e={},f=function(a,b){var c=e[a.name];c?b(c):setTimeout(function(){f(a,b)},10)},g=function(){var a=-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://");return a?!0:!1},h=function(a){var b;if(g())b=a;else{var c="application/json";try{b=new Blob([a],{type:c})}catch(d){var e=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"==d.name&&e){var f=new e;f.append([a.buffer]),b=f.getBlob(c)}else b=a}}return b};return{valid:function(){var b=a.requestFileSystem||a.webkitRequestFileSystem||a.moz_requestFileSystem;return!!b},init:function(b,d){function f(b){var c=a.requestFileSystem||a.webkitRequestFileSystem||a.moz_requestFileSystem,f=window.PERSISTENT;"undefined"!=typeof LocalFileSystem&&"undefined"!=typeof LocalFileSystem.PERSISTENT&&(f=LocalFileSystem.PERSISTENT),c(f,b,function(a){a.root.getDirectory(j,{create:!0},function(a){e[j]=a,d&&g.fn(g.name,d).call(g,g)},function(a){h(a)})},function(a){h(a)})}var g=this,h=function(a){c(a),d&&g.fn(g.name,d).call(g,g)},i=b.size||104857600,j=this.name;g.backup=!1,"undefined"!=typeof b.backup&&(g.backup=b.backup),"undefined"!=typeof navigator.webkitPersistentStorage?navigator.webkitPersistentStorage.requestQuota(i,f,function(){logger.warn("User declined file storage"),h("User declined file storage")}):f(0)},keys:function(a){var b=this;return f(this,function(c){d(c.createReader(),function(c){a&&b.fn("keys",a).call(b,c)})}),this},save:function(a,b){var d=this,e=a.key||this.uuid();a.key=e;var g=function(a){c(a),b&&d.lambda(b).call(d)};return f(this,function(c){var f=function(c,e){c.createWriter(function(c){c.onerror=e,c.onwriteend=function(){this.onwriteend=null,this.truncate(this.position),b&&d.lambda(b).call(d,a)};var f=JSON.stringify(a),g=h(f);c.write(g)},e)};c.getFile(e,{create:!0},function(a){"function"!=typeof a.setMetadata||d.backup!==!1&&"false"!==d.backup?f(a,g):a.setMetadata(function(){f(a,g)},function(){f(a,g)},{"com.apple.MobileBackup":1})},g)}),this},batch:function(a,b){for(var c=this,d=[],e=0,f=a.length;f>e;e++)c.save(a[e],function(a){d.push(a),d.length===f&&b&&c.lambda(b).call(c,d)});return this},get:function(a,b){var d=this;if(this.isArray(a))for(var e=[],g=0,h=a.length;h>g;g++)d.get(a[g],function(a){a&&e.push(a),e.length===h&&b&&d.lambda(b).call(d,e)});else{var i=function(a){c(a),b&&d.lambda(b).call(d)};f(this,function(c){c.getFile(a,{create:!1},function(c){c.file(function(c){var e=new FileReader;e.onerror=i,e.onload=function(c){var e={};try{e=JSON.parse(c.target.result),e.key=a}catch(c){e={key:a}}b&&d.lambda(b).call(d,e)},e.readAsText(c)},i)},i)})}return this},exists:function(a,b){var c=this;return f(this,function(d){d.getFile(a,{create:!1},function(){b&&c.lambda(b).call(c,!0)},function(){b&&c.lambda(b).call(c,!1)})}),this},all:function(a){var b=this;return a&&this.keys(function(c){c.length?b.get(c,function(c){b.fn(b.name,a).call(b,c)}):b.fn(b.name,a).call(b,[])}),this},remove:function(a,b){var d=this,e=function(a){c(a),b&&d.lambda(b).call(d)};return f(this,function(c){c.getFile("string"==typeof a?a:a.key,{create:!1},function(a){a.remove(function(){b&&d.lambda(b).call(d)},e)},e)}),this},nuke:function(a){var b=this,c=0;return this.keys(function(d){if(d.length)for(var e=0,f=d.length;f>e;e++)b.remove(d[e],function(){c++,c===f&&a&&b.lambda(a).call(b)});else a&&b.lambda(a).call(b)}),this}}}(this)),f.adapter("memory",function(){var a={};return{valid:function(){return!0},init:function(b,c){a[this.name]=a[this.name]||{index:[],store:{}},this.index=a[this.name].index,this.store=a[this.name].store;var d=this.fn(this.name,c);return d&&d.call(this,this),this},keys:function(a){return this.fn("keys",a).call(this,this.index),this},save:function(a,b){var c=a.key||this.uuid();return this.exists(c,function(d){d||(a.key&&delete a.key,this.index.push(c)),this.store[c]=a,b&&(a.key=c,this.lambda(b).call(this,a))}),this},batch:function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)this.save(a[d],function(a){c.push(a)});return b&&this.lambda(b).call(this,c),this},get:function(a,b){var c;if(this.isArray(a)){c=[];for(var d=0,e=a.length;e>d;d++)c.push(this.store[a[d]])}else c=this.store[a],c&&(c.key=a);return b&&this.lambda(b).call(this,c),this},exists:function(a,b){return this.lambda(b).call(this,!!this.store[a]),this},all:function(a){for(var b=[],c=0,d=this.index.length;d>c;c++){var e=this.store[this.index[c]];e.key=this.index[c],b.push(e)}return this.fn(this.name,a).call(this,b),this},remove:function(a,b){for(var c=this.isArray(a)?a:[a],d=0,e=c.length;e>d;d++){var f=c[d].key?c[d].key:c[d],g=this.indexOf(this.index,f);0>g||(delete this.store[f],this.index.splice(g,1))}return b&&this.lambda(b).call(this),this},nuke:function(b){return this.store=a[this.name].store={},this.index=a[this.name].index=[],b&&this.lambda(b).call(this),this}}}()),e("undefined"!=typeof f?f:window.Lawnchair)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(a,b,c){function d(a,b,c){null!=a&&("number"==typeof a?this.fromNumber(a,b,c):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function e(){return new d(null)}function f(a,b,c,d,e,f){for(;--f>=0;){var g=b*this[a++]+c[d]+e;e=Math.floor(g/67108864),c[d++]=67108863&g}return e}function g(a,b,c,d,e,f){for(var g=32767&b,h=b>>15;--f>=0;){var i=32767&this[a],j=this[a++]>>15,k=h*i+j*g;i=g*i+((32767&k)<<15)+c[d]+(1073741823&e),e=(i>>>30)+(k>>>15)+h*j+(e>>>30),c[d++]=1073741823&i}return e}function h(a,b,c,d,e,f){for(var g=16383&b,h=b>>14;--f>=0;){var i=16383&this[a],j=this[a++]>>14,k=h*i+j*g;i=g*i+((16383&k)<<14)+c[d]+e,e=(i>>28)+(k>>14)+h*j,c[d++]=268435455&i}return e}function i(a){return oa.charAt(a)}function j(a,b){var c=pa[a.charCodeAt(b)];return null==c?-1:c}function k(a){for(var b=this.t-1;b>=0;--b)a[b]=this[b];a.t=this.t,a.s=this.s}function l(a){this.t=1,this.s=0>a?-1:0,a>0?this[0]=a:-1>a?this[0]=a+DV:this.t=0}function m(a){var b=e();return b.fromInt(a),b}function n(a,b){var c;if(16==b)c=4;else if(8==b)c=3;else if(256==b)c=8;else if(2==b)c=1;else if(32==b)c=5;else{if(4!=b)return void this.fromRadix(a,b);c=2}this.t=0,this.s=0;for(var e=a.length,f=!1,g=0;--e>=0;){var h=8==c?255&a[e]:j(a,e);0>h?"-"==a.charAt(e)&&(f=!0):(f=!1,0==g?this[this.t++]=h:g+c>this.DB?(this[this.t-1]|=(h&(1<<this.DB-g)-1)<<g,this[this.t++]=h>>this.DB-g):this[this.t-1]|=h<<g,g+=c,g>=this.DB&&(g-=this.DB))}8==c&&0!=(128&a[0])&&(this.s=-1,g>0&&(this[this.t-1]|=(1<<this.DB-g)-1<<g)),this.clamp(),f&&d.ZERO.subTo(this,this)}function o(){for(var a=this.s&this.DM;this.t>0&&this[this.t-1]==a;)--this.t}function p(a){if(this.s<0)return"-"+this.negate().toString(a);var b;if(16==a)b=4;else if(8==a)b=3;else if(2==a)b=1;else if(32==a)b=5;else{if(4!=a)return this.toRadix(a);b=2}var c,d=(1<<b)-1,e=!1,f="",g=this.t,h=this.DB-g*this.DB%b;if(g-->0)for(h<this.DB&&(c=this[g]>>h)>0&&(e=!0,f=i(c));g>=0;)b>h?(c=(this[g]&(1<<h)-1)<<b-h,c|=this[--g]>>(h+=this.DB-b)):(c=this[g]>>(h-=b)&d,0>=h&&(h+=this.DB,--g)),c>0&&(e=!0),e&&(f+=i(c));return e?f:"0"}function q(){var a=e();return d.ZERO.subTo(this,a),a}function r(){return this.s<0?this.negate():this}function s(a){var b=this.s-a.s;if(0!=b)return b;var c=this.t;if(b=c-a.t,0!=b)return this.s<0?-b:b;for(;--c>=0;)if(0!=(b=this[c]-a[c]))return b;return 0}function t(a){var b,c=1;return 0!=(b=a>>>16)&&(a=b,c+=16),0!=(b=a>>8)&&(a=b,c+=8),0!=(b=a>>4)&&(a=b,c+=4),0!=(b=a>>2)&&(a=b,c+=2),0!=(b=a>>1)&&(a=b,c+=1),c}function u(){return this.t<=0?0:this.DB*(this.t-1)+t(this[this.t-1]^this.s&this.DM)}function v(a,b){var c;for(c=this.t-1;c>=0;--c)b[c+a]=this[c];for(c=a-1;c>=0;--c)b[c]=0;b.t=this.t+a,b.s=this.s}function w(a,b){for(var c=a;c<this.t;++c)b[c-a]=this[c];b.t=Math.max(this.t-a,0),b.s=this.s}function x(a,b){var c,d=a%this.DB,e=this.DB-d,f=(1<<e)-1,g=Math.floor(a/this.DB),h=this.s<<d&this.DM;for(c=this.t-1;c>=0;--c)b[c+g+1]=this[c]>>e|h,h=(this[c]&f)<<d;for(c=g-1;c>=0;--c)b[c]=0;b[g]=h,b.t=this.t+g+1,b.s=this.s,b.clamp()}function y(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t)return void(b.t=0);var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b[0]=this[c]>>d;for(var g=c+1;g<this.t;++g)b[g-c-1]|=(this[g]&f)<<e,b[g-c]=this[g]>>d;d>0&&(b[this.t-c-1]|=(this.s&f)<<e),b.t=this.t-c,b.clamp()}function z(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);e>c;)d+=this[c]-a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d-=a[c],b[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=0>d?-1:0,-1>d?b[c++]=this.DV+d:d>0&&(b[c++]=d),b.t=c,b.clamp()}function A(a,b){var c=this.abs(),e=a.abs(),f=c.t;for(b.t=f+e.t;--f>=0;)b[f]=0;for(f=0;f<e.t;++f)b[f+c.t]=c.am(0,e[f],b,f,0,c.t);b.s=0,b.clamp(),this.s!=a.s&&d.ZERO.subTo(b,b)}function B(a){for(var b=this.abs(),c=a.t=2*b.t;--c>=0;)a[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b[c],a,2*c,0,1);(a[c+b.t]+=b.am(c+1,2*b[c],a,2*c+1,d,b.t-c-1))>=b.DV&&(a[c+b.t]-=b.DV,a[c+b.t+1]=1)}a.t>0&&(a[a.t-1]+=b.am(c,b[c],a,2*c,0,1)),a.s=0,a.clamp()}function C(a,b,c){var f=a.abs();if(!(f.t<=0)){var g=this.abs();if(g.t<f.t)return null!=b&&b.fromInt(0),void(null!=c&&this.copyTo(c));null==c&&(c=e());var h=e(),i=this.s,j=a.s,k=this.DB-t(f[f.t-1]);k>0?(f.lShiftTo(k,h),g.lShiftTo(k,c)):(f.copyTo(h),g.copyTo(c));var l=h.t,m=h[l-1];if(0!=m){var n=m*(1<<this.F1)+(l>1?h[l-2]>>this.F2:0),o=this.FV/n,p=(1<<this.F1)/n,q=1<<this.F2,r=c.t,s=r-l,u=null==b?e():b;for(h.dlShiftTo(s,u),c.compareTo(u)>=0&&(c[c.t++]=1,c.subTo(u,c)),d.ONE.dlShiftTo(l,u),u.subTo(h,h);h.t<l;)h[h.t++]=0;for(;--s>=0;){var v=c[--r]==m?this.DM:Math.floor(c[r]*o+(c[r-1]+q)*p);if((c[r]+=h.am(0,v,c,s,0,l))<v)for(h.dlShiftTo(s,u),c.subTo(u,c);c[r]<--v;)c.subTo(u,c)}null!=b&&(c.drShiftTo(l,b),i!=j&&d.ZERO.subTo(b,b)),c.t=l,c.clamp(),k>0&&c.rShiftTo(k,c),0>i&&d.ZERO.subTo(c,c)}}}function D(a){var b=e();return this.abs().divRemTo(a,null,b),this.s<0&&b.compareTo(d.ZERO)>0&&a.subTo(b,b),b}function E(a){this.m=a}function F(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a}function G(a){return a}function H(a){a.divRemTo(this.m,null,a)}function I(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function J(a,b){a.squareTo(b),this.reduce(b)}function K(){if(this.t<1)return 0;var a=this[0];if(0==(1&a))return 0;var b=3&a;return b=b*(2-(15&a)*b)&15,b=b*(2-(255&a)*b)&255,b=b*(2-((65535&a)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV,b>0?this.DV-b:-b}function L(a){this.m=a,this.mp=a.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function M(a){var b=e();return a.abs().dlShiftTo(this.m.t,b),b.divRemTo(this.m,null,b),a.s<0&&b.compareTo(d.ZERO)>0&&this.m.subTo(b,b),b}function N(a){var b=e();return a.copyTo(b),this.reduce(b),b}function O(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=32767&a[b],d=c*this.mpl+((c*this.mph+(a[b]>>15)*this.mpl&this.um)<<15)&a.DM;for(c=b+this.m.t,a[c]+=this.m.am(0,d,a,b,0,this.m.t);a[c]>=a.DV;)a[c]-=a.DV,a[++c]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)}function P(a,b){a.squareTo(b),this.reduce(b)}function Q(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function R(){return 0==(this.t>0?1&this[0]:this.s)}function S(a,b){if(a>4294967295||1>a)return d.ONE;var c=e(),f=e(),g=b.convert(this),h=t(a)-1;for(g.copyTo(c);--h>=0;)if(b.sqrTo(c,f),(a&1<<h)>0)b.mulTo(f,g,c);else{var i=c;c=f,f=i}return b.revert(c)}function T(a,b){var c;return c=256>a||b.isEven()?new E(b):new L(b),this.exp(a,c)}function U(){this.i=0,this.j=0,this.S=new Array}function V(a){var b,c,d;for(b=0;256>b;++b)this.S[b]=b;for(c=0,b=0;256>b;++b)c=c+this.S[b]+a[b%a.length]&255,d=this.S[b],this.S[b]=this.S[c],this.S[c]=d;this.i=0,this.j=0}function W(){var a;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,a=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=a,this.S[a+this.S[this.i]&255]}function X(){return new U}function Y(a){ra[sa++]^=255&a,ra[sa++]^=a>>8&255,ra[sa++]^=a>>16&255,ra[sa++]^=a>>24&255,sa>=ta&&(sa-=ta)}function Z(){Y((new Date).getTime())}function $(){if(null==qa){for(Z(),qa=X(),qa.init(ra),sa=0;sa<ra.length;++sa)ra[sa]=0;sa=0}return qa.next()}function _(a){var b;for(b=0;b<a.length;++b)a[b]=$()}function aa(){}function ba(a,b){return new d(a,b)}function ca(a){return 16>a?"0"+a.toString(16):a.toString(16)}function da(a,b){if(b<a.length+11)return alert("Message too long for RSA"),null;for(var c=new Array,e=a.length-1;e>=0&&b>0;){var f=a.charCodeAt(e--);128>f?c[--b]=f:f>127&&2048>f?(c[--b]=63&f|128,c[--b]=f>>6|192):(c[--b]=63&f|128,c[--b]=f>>6&63|128,c[--b]=f>>12|224)}c[--b]=0;for(var g=new aa,h=new Array;b>2;){for(h[0]=0;0==h[0];)g.nextBytes(h);c[--b]=h[0]}return c[--b]=2,c[--b]=0,new d(c)}function ea(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function fa(a,b){null!=a&&null!=b&&a.length>0&&b.length>0?(this.n=ba(a,16),this.e=parseInt(b,16)):alert("Invalid RSA public key")}function ga(a){return a.modPowInt(this.e,this.n)}function ha(a){var b=da(a,this.n.bitLength()+7>>3);if(null==b)return null;var c=this.doPublic(b);if(null==c)return null;var d=c.toString(16);return 0==(1&d.length)?d:"0"+d}var ia,ja=0xdeadbeefcafe,ka=15715070==(16777215&ja);ka&&"Microsoft Internet Explorer"==navigator.appName?(d.prototype.am=g,ia=30):ka&&"Netscape"!=navigator.appName?(d.prototype.am=f,ia=26):(d.prototype.am=h,ia=28),d.prototype.DB=ia,d.prototype.DM=(1<<ia)-1,d.prototype.DV=1<<ia;var la=52;d.prototype.FV=Math.pow(2,la),d.prototype.F1=la-ia,d.prototype.F2=2*ia-la;var ma,na,oa="0123456789abcdefghijklmnopqrstuvwxyz",pa=new Array;for(ma="0".charCodeAt(0),na=0;9>=na;++na)pa[ma++]=na;for(ma="a".charCodeAt(0),na=10;36>na;++na)pa[ma++]=na;for(ma="A".charCodeAt(0),na=10;36>na;++na)pa[ma++]=na;E.prototype.convert=F,E.prototype.revert=G,E.prototype.reduce=H,E.prototype.mulTo=I,E.prototype.sqrTo=J,L.prototype.convert=M,L.prototype.revert=N,L.prototype.reduce=O,L.prototype.mulTo=Q,L.prototype.sqrTo=P,d.prototype.copyTo=k,d.prototype.fromInt=l,d.prototype.fromString=n,d.prototype.clamp=o,d.prototype.dlShiftTo=v,d.prototype.drShiftTo=w,d.prototype.lShiftTo=x,d.prototype.rShiftTo=y,d.prototype.subTo=z,d.prototype.multiplyTo=A,d.prototype.squareTo=B,d.prototype.divRemTo=C,d.prototype.invDigit=K,d.prototype.isEven=R,d.prototype.exp=S,d.prototype.toString=p,d.prototype.negate=q,d.prototype.abs=r,d.prototype.compareTo=s,d.prototype.bitLength=u,d.prototype.mod=D,d.prototype.modPowInt=T,d.ZERO=m(0),d.ONE=m(1),U.prototype.init=V,U.prototype.next=W;var qa,ra,sa,ta=256;if(null==ra){ra=new Array,sa=0;var ua;if("Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var va=window.crypto.random(32);for(ua=0;ua<va.length;++ua)ra[sa++]=255&va.charCodeAt(ua)}for(;ta>sa;)ua=Math.floor(65536*Math.random()),ra[sa++]=ua>>>8,ra[sa++]=255&ua;sa=0,Z()}aa.prototype.nextBytes=_,ea.prototype.doPublic=ga,ea.prototype.setPublic=fa,ea.prototype.encrypt=ha,b.exports={SecureRandom:aa,byte2Hex:ca,RSAKey:ea}},{}],4:[function(a,b,c){function d(a,b){return n.isUndefined(b)?""+b:!n.isNumber(b)||!isNaN(b)&&isFinite(b)?n.isFunction(b)||n.isRegExp(b)?b.toString():b:b.toString()}function e(a,b){return n.isString(a)?a.length<b?a:a.slice(0,b):a}function f(a){return e(JSON.stringify(a.actual,d),128)+" "+a.operator+" "+e(JSON.stringify(a.expected,d),128)}function g(a,b,c,d,e){throw new q.AssertionError({message:c,actual:a,expected:b,operator:d,stackStartFunction:e})}function h(a,b){a||g(a,!0,b,"==",q.ok)}function i(a,b){if(a===b)return!0;if(n.isBuffer(a)&&n.isBuffer(b)){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return n.isDate(a)&&n.isDate(b)?a.getTime()===b.getTime():n.isRegExp(a)&&n.isRegExp(b)?a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.lastIndex===b.lastIndex&&a.ignoreCase===b.ignoreCase:n.isObject(a)||n.isObject(b)?k(a,b):a==b}function j(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function k(a,b){if(n.isNullOrUndefined(a)||n.isNullOrUndefined(b))return!1;if(a.prototype!==b.prototype)return!1;if(j(a))return j(b)?(a=o.call(a),b=o.call(b),i(a,b)):!1;try{var c,d,e=r(a),f=r(b)}catch(g){return!1}if(e.length!=f.length)return!1;for(e.sort(),f.sort(),d=e.length-1;d>=0;d--)if(e[d]!=f[d])return!1;for(d=e.length-1;d>=0;d--)if(c=e[d],!i(a[c],b[c]))return!1;return!0}function l(a,b){return a&&b?"[object RegExp]"==Object.prototype.toString.call(b)?b.test(a):a instanceof b?!0:b.call({},a)===!0?!0:!1:!1}function m(a,b,c,d){var e;n.isString(c)&&(d=c,c=null);try{b()}catch(f){e=f}if(d=(c&&c.name?" ("+c.name+").":".")+(d?" "+d:"."),a&&!e&&g(e,c,"Missing expected exception"+d),!a&&l(e,c)&&g(e,c,"Got unwanted exception"+d),a&&e&&c&&!l(e,c)||!a&&e)throw e}var n=a("util/"),o=Array.prototype.slice,p=Object.prototype.hasOwnProperty,q=b.exports=h;q.AssertionError=function(a){this.name="AssertionError",this.actual=a.actual,this.expected=a.expected,this.operator=a.operator,a.message?(this.message=a.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var b=a.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,b);else{var c=new Error;if(c.stack){var d=c.stack,e=b.name,h=d.indexOf("\n"+e);if(h>=0){var i=d.indexOf("\n",h+1);d=d.substring(i+1)}this.stack=d}}},n.inherits(q.AssertionError,Error),q.fail=g,q.ok=h,q.equal=function(a,b,c){a!=b&&g(a,b,c,"==",q.equal)},q.notEqual=function(a,b,c){a==b&&g(a,b,c,"!=",q.notEqual)},q.deepEqual=function(a,b,c){i(a,b)||g(a,b,c,"deepEqual",q.deepEqual)},q.notDeepEqual=function(a,b,c){i(a,b)&&g(a,b,c,"notDeepEqual",q.notDeepEqual)},q.strictEqual=function(a,b,c){a!==b&&g(a,b,c,"===",q.strictEqual)},q.notStrictEqual=function(a,b,c){a===b&&g(a,b,c,"!==",q.notStrictEqual)},q["throws"]=function(a,b,c){m.apply(this,[!0].concat(o.call(arguments)))},q.doesNotThrow=function(a,b){m.apply(this,[!1].concat(o.call(arguments)))},q.ifError=function(a){if(a)throw a};var r=Object.keys||function(a){var b=[];for(var c in a)p.call(a,c)&&b.push(c);return b}},{"util/":15}],5:[function(a,b,c){(function(c){function d(){}function e(){m.log.apply(m,arguments)}function f(){m.log.apply(m,arguments)}function g(){m.warn.apply(m,arguments)}function h(a){p[a]=Date.now()}function i(a){var b=p[a];if(!b)throw new Error("No such label: "+a);var c=Date.now()-b;m.log(a+": "+c+"ms")}function j(){var a=new Error;a.name="Trace",a.message=n.format.apply(null,arguments),m.error(a.stack)}function k(a){m.log(n.inspect(a)+"\n")}function l(a){if(!a){var b=o.call(arguments,1);l.ok(!1,n.format.apply(null,b))}}var m,n=a("util"),l=a("assert"),o=Array.prototype.slice,p={};m="undefined"!=typeof c&&c.console?c.console:"undefined"!=typeof window&&window.console?window.console:{};for(var q=[[d,"log"],[e,"info"],[f,"warn"],[g,"error"],[h,"time"],[i,"timeEnd"],[j,"trace"],[k,"dir"],[l,"assert"]],r=0;r<q.length;r++){var s=q[r],t=s[0],u=s[1];m[u]||(m[u]=t)}b.exports=m}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{assert:4,util:15}],6:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;d>i;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;d>i;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(0>d)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],7:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],8:[function(a,b,c){function d(){}var e=b.exports={};e.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(a){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(a){throw new Error("process.chdir is not supported")}},{}],9:[function(b,c,d){(function(b){!function(e){function f(a){throw RangeError(I[a])}function g(a,b){for(var c=a.length;c--;)a[c]=b(a[c]);return a}function h(a,b){return g(a.split(H),b).join(".")}function i(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function j(a){return g(a,function(a){var b="";return a>65535&&(a-=65536,b+=L(a>>>10&1023|55296),a=56320|1023&a),b+=L(a)}).join("")}function k(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:x}function l(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function m(a,b,c){var d=0;for(a=c?K(a/B):a>>1,a+=K(a/b);a>J*z>>1;d+=x)a=K(a/J);return K(d+(J+1)*a/(a+A))}function n(a){var b,c,d,e,g,h,i,l,n,o,p=[],q=a.length,r=0,s=D,t=C;for(c=a.lastIndexOf(E),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&f("not-basic"),p.push(a.charCodeAt(d));for(e=c>0?c+1:0;q>e;){for(g=r,h=1,i=x;e>=q&&f("invalid-input"),l=k(a.charCodeAt(e++)),(l>=x||l>K((w-r)/h))&&f("overflow"),r+=l*h,n=t>=i?y:i>=t+z?z:i-t,!(n>l);i+=x)o=x-n,h>K(w/o)&&f("overflow"),h*=o;b=p.length+1,t=m(r-g,b,0==g),K(r/b)>w-s&&f("overflow"),s+=K(r/b),r%=b,p.splice(r++,0,s)}return j(p)}function o(a){var b,c,d,e,g,h,j,k,n,o,p,q,r,s,t,u=[];for(a=i(a),q=a.length,b=D,c=0,g=C,h=0;q>h;++h)p=a[h],128>p&&u.push(L(p));for(d=e=u.length,e&&u.push(E);q>d;){for(j=w,h=0;q>h;++h)p=a[h],p>=b&&j>p&&(j=p);for(r=d+1,j-b>K((w-c)/r)&&f("overflow"),c+=(j-b)*r,b=j,h=0;q>h;++h)if(p=a[h],b>p&&++c>w&&f("overflow"),p==b){for(k=c,n=x;o=g>=n?y:n>=g+z?z:n-g,!(o>k);n+=x)t=k-o,s=x-o,u.push(L(l(o+t%s,0))),k=K(t/s);u.push(L(l(k,0))),g=m(c,r,d==e),c=0,++d}++c,++b}return u.join("")}function p(a){return h(a,function(a){return F.test(a)?n(a.slice(4).toLowerCase()):a})}function q(a){return h(a,function(a){return G.test(a)?"xn--"+o(a):a})}var r="object"==typeof d&&d,s="object"==typeof c&&c&&c.exports==r&&c,t="object"==typeof b&&b;(t.global===t||t.window===t)&&(e=t);var u,v,w=2147483647,x=36,y=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^ -~]/,H=/\x2E|\u3002|\uFF0E|\uFF61/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=x-y,K=Math.floor,L=String.fromCharCode;if(u={version:"1.2.4",ucs2:{decode:i,encode:j},decode:n,encode:o,toASCII:q,toUnicode:p},"function"==typeof a&&"object"==typeof a.amd&&a.amd)a("punycode",function(){return u});else if(r&&!r.nodeType)if(s)s.exports=u;else for(v in u)u.hasOwnProperty(v)&&(r[v]=u[v]);else e.punycode=u}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],11:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(d){var g=encodeURIComponent(e(d))+c;return f(a[d])?a[d].map(function(a){return g+encodeURIComponent(e(a))}).join(b):g+encodeURIComponent(e(a[d]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):"";
};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],12:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":10,"./encode":11}],13:[function(a,b,c){function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return i(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}function i(a){return"string"==typeof a}function j(a){return"object"==typeof a&&null!==a}function k(a){return null===a}function l(a){return null==a}var m=a("punycode");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var n=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,p=["<",">",'"',"`"," ","\r","\n","	"],q=["{","}","|","\\","^","`"].concat(p),r=["'"].concat(q),s=["%","/","?",";","#"].concat(r),t=["/","?","#"],u=255,v=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=a("querystring");d.prototype.parse=function(a,b,c){if(!i(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a;d=d.trim();var e=n.exec(d);if(e){e=e[0];var f=e.toLowerCase();this.protocol=f,d=d.substr(e.length)}if(c||e||d.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===d.substr(0,2);!g||e&&y[e]||(d=d.substr(2),this.slashes=!0)}if(!y[e]&&(g||e&&!z[e])){for(var h=-1,j=0;j<t.length;j++){var k=d.indexOf(t[j]);-1!==k&&(-1===h||h>k)&&(h=k)}var l,o;o=-1===h?d.lastIndexOf("@"):d.lastIndexOf("@",h),-1!==o&&(l=d.slice(0,o),d=d.slice(o+1),this.auth=decodeURIComponent(l)),h=-1;for(var j=0;j<s.length;j++){var k=d.indexOf(s[j]);-1!==k&&(-1===h||h>k)&&(h=k)}-1===h&&(h=d.length),this.host=d.slice(0,h),d=d.slice(h),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var q=this.hostname.split(/\./),j=0,B=q.length;B>j;j++){var C=q[j];if(C&&!C.match(v)){for(var D="",E=0,F=C.length;F>E;E++)D+=C.charCodeAt(E)>127?"x":C[E];if(!D.match(v)){var G=q.slice(0,j),H=q.slice(j+1),I=C.match(w);I&&(G.push(I[1]),H.unshift(I[2])),H.length&&(d="/"+H.join(".")+d),this.hostname=G.join(".");break}}}if(this.hostname.length>u?this.hostname="":this.hostname=this.hostname.toLowerCase(),!p){for(var J=this.hostname.split("."),K=[],j=0;j<J.length;++j){var L=J[j];K.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+m.encode(L):L)}this.hostname=K.join(".")}var M=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+M,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==d[0]&&(d="/"+d))}if(!x[f])for(var j=0,B=r.length;B>j;j++){var O=r[j],P=encodeURIComponent(O);P===O&&(P=escape(O)),d=d.split(O).join(P)}var Q=d.indexOf("#");-1!==Q&&(this.hash=d.substr(Q),d=d.slice(0,Q));var R=d.indexOf("?");if(-1!==R?(this.search=d.substr(R),this.query=d.substr(R+1),b&&(this.query=A.parse(this.query)),d=d.slice(0,R)):b&&(this.search="",this.query={}),d&&(this.pathname=d),z[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",L=this.search||"";this.path=M+L}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j(this.query)&&Object.keys(this.query).length&&(f=A.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||z[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(i(a)){var b=new d;b.parse(a,!1,!0),a=b}var c=new d;if(Object.keys(this).forEach(function(a){c[a]=this[a]},this),c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol)return Object.keys(a).forEach(function(b){"protocol"!==b&&(c[b]=a[b])}),z[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c;if(a.protocol&&a.protocol!==c.protocol){if(!z[a.protocol])return Object.keys(a).forEach(function(b){c[b]=a[b]}),c.href=c.format(),c;if(c.protocol=a.protocol,a.host||y[a.protocol])c.pathname=a.pathname;else{for(var e=(a.pathname||"").split("/");e.length&&!(a.host=e.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==e[0]&&e.unshift(""),e.length<2&&e.unshift(""),c.pathname=e.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var f=c.pathname||"",g=c.search||"";c.path=f+g}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var h=c.pathname&&"/"===c.pathname.charAt(0),j=a.host||a.pathname&&"/"===a.pathname.charAt(0),m=j||h||c.host&&a.pathname,n=m,o=c.pathname&&c.pathname.split("/")||[],e=a.pathname&&a.pathname.split("/")||[],p=c.protocol&&!z[c.protocol];if(p&&(c.hostname="",c.port=null,c.host&&(""===o[0]?o[0]=c.host:o.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===e[0]?e[0]=a.host:e.unshift(a.host)),a.host=null),m=m&&(""===e[0]||""===o[0])),j)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,o=e;else if(e.length)o||(o=[]),o.pop(),o=o.concat(e),c.search=a.search,c.query=a.query;else if(!l(a.search)){if(p){c.hostname=c.host=o.shift();var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return c.search=a.search,c.query=a.query,k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!o.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var r=o.slice(-1)[0],s=(c.host||a.host)&&("."===r||".."===r)||""===r,t=0,u=o.length;u>=0;u--)r=o[u],"."==r?o.splice(u,1):".."===r?(o.splice(u,1),t++):t&&(o.splice(u,1),t--);if(!m&&!n)for(;t--;t)o.unshift("..");!m||""===o[0]||o[0]&&"/"===o[0].charAt(0)||o.unshift(""),s&&"/"!==o.join("/").substr(-1)&&o.push("");var v=""===o[0]||o[0]&&"/"===o[0].charAt(0);if(p){c.hostname=c.host=v?"":o.length?o.shift():"";var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return m=m||c.host&&o.length,m&&!v&&o.unshift(""),o.length?c.pathname=o.join("/"):(c.pathname=null,c.path=null),k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=o.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{punycode:9,querystring:12}],14:[function(a,b,c){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],15:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a,b){return a}function h(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)F(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("FWaASH"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":14,FWaASH:8,inherits:7}],16:[function(b,c,d){!function(b){var d="undefined";!function(b,d){"undefined"!=typeof c?c.exports=d():"function"==typeof a&&"object"==typeof a.amd?a(d):this[b]=d()}("log",function(){function a(a){return typeof console===d?l:console[a]===b?console.log!==b?c(console,"log"):l:c(console,a)}function c(a,c){var d=a[c];if(d.bind!==b)return a[c].bind(a);if(Function.prototype.bind===b)return e(d,a);try{return Function.prototype.bind.call(a[c],a)}catch(f){return e(d,a)}}function e(a,b){return function(){Function.prototype.apply.apply(a,[b,arguments])}}function f(a){for(var b=0;b<m.length;b++)k[m[b]]=a(m[b])}function g(){return typeof window!==d&&window.document!==b&&window.document.cookie!==b}function h(){try{return typeof window!==d&&window.localStorage!==b}catch(a){return!1}}function i(a){var b,c=!1;for(var d in k.levels)if(k.levels.hasOwnProperty(d)&&k.levels[d]===a){b=d;break}if(h())try{window.localStorage.loglevel=b}catch(e){c=!0}else c=!0;c&&g()&&(window.document.cookie="loglevel="+b+";")}function j(){var a;if(h()&&(a=window.localStorage.loglevel),a===b&&g()){var c=n.exec(window.document.cookie)||[];a=c[1]}k.levels[a]===b&&(a="WARN"),k.setLevel(k.levels[a])}var k={},l=function(){},m=["trace","debug","info","warn","error"],n=/loglevel=([^;]+)/;return k.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},k.setLevel=function(c){if("number"==typeof c&&c>=0&&c<=k.levels.SILENT){if(i(c),c===k.levels.SILENT)return void f(function(){return l});if(typeof console===d)return f(function(a){return function(){typeof console!==d&&(k.setLevel(c),k[a].apply(k,arguments))}}),"No console available for logging";f(function(b){return c<=k.levels[b.toUpperCase()]?a(b):l})}else{if("string"!=typeof c||k.levels[c.toUpperCase()]===b)throw"log.setLevel() called with invalid level: "+c;k.setLevel(k.levels[c.toUpperCase()])}},k.enableAll=function(){k.setLevel(k.levels.TRACE)},k.disableAll=function(){k.setLevel(k.levels.SILENT)},j(),k})}()},{}],17:[function(a,b,c){var d=Object.prototype.toString;b.exports=function(a){switch(d.call(a)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if("object"==typeof a&&a&&"number"==typeof a.length)try{if("function"==typeof a.callee)return"arguments"}catch(b){if(b instanceof TypeError)return"arguments"}return null===a?"null":void 0===a?"undefined":a&&1===a.nodeType?"element":a===Object(a)?"object":typeof a}},{}],18:[function(b,c,d){(function(){var b=this,e=b._,f={},g=Array.prototype,h=Object.prototype,i=Function.prototype,j=g.push,k=g.slice,l=g.concat,m=h.toString,n=h.hasOwnProperty,o=g.forEach,p=g.map,q=g.reduce,r=g.reduceRight,s=g.filter,t=g.every,u=g.some,v=g.indexOf,w=g.lastIndexOf,x=Array.isArray,y=Object.keys,z=i.bind,A=function(a){return a instanceof A?a:this instanceof A?void(this._wrapped=a):new A(a)};"undefined"!=typeof d?("undefined"!=typeof c&&c.exports&&(d=c.exports=A),d._=A):b._=A,A.VERSION="1.6.0";var B=A.each=A.forEach=function(a,b,c){if(null==a)return a;if(o&&a.forEach===o)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d,a)===f)return}else for(var g=A.keys(a),d=0,e=g.length;e>d;d++)if(b.call(c,a[g[d]],g[d],a)===f)return;return a};A.map=A.collect=function(a,b,c){var d=[];return null==a?d:p&&a.map===p?a.map(b,c):(B(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var C="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),q&&a.reduce===q)return d&&(b=A.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(B(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(C);return c},A.reduceRight=A.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),r&&a.reduceRight===r)return d&&(b=A.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=A.keys(a);f=g.length}if(B(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(C);return c},A.find=A.detect=function(a,b,c){var d;return D(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},A.filter=A.select=function(a,b,c){var d=[];return null==a?d:s&&a.filter===s?a.filter(b,c):(B(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},A.reject=function(a,b,c){return A.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},A.every=A.all=function(a,b,c){b||(b=A.identity);var d=!0;return null==a?d:t&&a.every===t?a.every(b,c):(B(a,function(a,e,g){return(d=d&&b.call(c,a,e,g))?void 0:f}),!!d)};var D=A.some=A.any=function(a,b,c){b||(b=A.identity);var d=!1;return null==a?d:u&&a.some===u?a.some(b,c):(B(a,function(a,e,g){return d||(d=b.call(c,a,e,g))?f:void 0}),!!d)};A.contains=A.include=function(a,b){return null==a?!1:v&&a.indexOf===v?-1!=a.indexOf(b):D(a,function(a){return a===b})},A.invoke=function(a,b){var c=k.call(arguments,2),d=A.isFunction(b);return A.map(a,function(a){return(d?b:a[b]).apply(a,c)})},A.pluck=function(a,b){return A.map(a,A.property(b))},A.where=function(a,b){return A.filter(a,A.matches(b))},A.findWhere=function(a,b){return A.find(a,A.matches(b))},A.max=function(a,b,c){if(!b&&A.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-(1/0),e=-(1/0);return B(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},A.min=function(a,b,c){if(!b&&A.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);var d=1/0,e=1/0;return B(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;e>h&&(d=a,e=h)}),d},A.shuffle=function(a){var b,c=0,d=[];return B(a,function(a){b=A.random(c++),d[c-1]=d[b],d[b]=a}),d},A.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=A.values(a)),a[A.random(a.length-1)]):A.shuffle(a).slice(0,Math.max(0,b))};var E=function(a){return null==a?A.identity:A.isFunction(a)?a:A.property(a)};A.sortBy=function(a,b,c){return b=E(b),A.pluck(A.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var F=function(a){return function(b,c,d){var e={};return c=E(c),B(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};A.groupBy=F(function(a,b,c){A.has(a,b)?a[b].push(c):a[b]=[c]}),A.indexBy=F(function(a,b,c){a[b]=c}),A.countBy=F(function(a,b){A.has(a,b)?a[b]++:a[b]=1}),A.sortedIndex=function(a,b,c,d){c=E(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},A.toArray=function(a){return a?A.isArray(a)?k.call(a):a.length===+a.length?A.map(a,A.identity):A.values(a):[]},A.size=function(a){return null==a?0:a.length===+a.length?a.length:A.keys(a).length},A.first=A.head=A.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:k.call(a,0,b)},A.initial=function(a,b,c){return k.call(a,0,a.length-(null==b||c?1:b))},A.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:k.call(a,Math.max(a.length-b,0))},A.rest=A.tail=A.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},A.compact=function(a){return A.filter(a,A.identity)};var G=function(a,b,c){return b&&A.every(a,A.isArray)?l.apply(c,a):(B(a,function(a){A.isArray(a)||A.isArguments(a)?b?j.apply(c,a):G(a,b,c):c.push(a)}),c)};A.flatten=function(a,b){return G(a,b,[])},A.without=function(a){return A.difference(a,k.call(arguments,1))},A.partition=function(a,b){var c=[],d=[];return B(a,function(a){(b(a)?c:d).push(a)}),[c,d]},A.uniq=A.unique=function(a,b,c,d){A.isFunction(b)&&(d=c,c=b,b=!1);var e=c?A.map(a,c,d):a,f=[],g=[];return B(e,function(c,d){(b?d&&g[g.length-1]===c:A.contains(g,c))||(g.push(c),f.push(a[d]))}),f},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=function(a){var b=k.call(arguments,1);return A.filter(A.uniq(a),function(a){return A.every(b,function(b){return A.contains(b,a)})})},A.difference=function(a){var b=l.apply(g,k.call(arguments,1));return A.filter(a,function(a){return!A.contains(b,a)})},A.zip=function(){for(var a=A.max(A.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=A.pluck(arguments,""+c);return b},A.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},A.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=A.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(v&&a.indexOf===v)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},A.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(w&&a.lastIndexOf===w)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},A.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var H=function(){};A.bind=function(a,b){var c,d;if(z&&a.bind===z)return z.apply(a,k.call(arguments,1));if(!A.isFunction(a))throw new TypeError;return c=k.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(k.call(arguments)));H.prototype=a.prototype;var e=new H;H.prototype=null;var f=a.apply(e,c.concat(k.call(arguments)));return Object(f)===f?f:e}},A.partial=function(a){var b=k.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===A&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},A.bindAll=function(a){var b=k.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return B(b,function(b){a[b]=A.bind(a[b],a)}),a},A.memoize=function(a,b){var c={};return b||(b=A.identity),function(){var d=b.apply(this,arguments);return A.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},A.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},A.defer=function(a){return A.delay.apply(A,[a,1].concat(k.call(arguments,1)))},A.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:A.now(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=A.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},A.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=A.now()-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=A.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},A.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},A.wrap=function(a,b){return A.partial(b,a)},A.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},A.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},A.keys=function(a){if(!A.isObject(a))return[];if(y)return y(a);var b=[];for(var c in a)A.has(a,c)&&b.push(c);return b},A.values=function(a){for(var b=A.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},A.pairs=function(a){for(var b=A.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},A.invert=function(a){for(var b={},c=A.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},A.functions=A.methods=function(a){var b=[];for(var c in a)A.isFunction(a[c])&&b.push(c);return b.sort()},A.extend=function(a){return B(k.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},A.pick=function(a){var b={},c=l.apply(g,k.call(arguments,1));return B(c,function(c){c in a&&(b[c]=a[c])}),b},A.omit=function(a){var b={},c=l.apply(g,k.call(arguments,1));for(var d in a)A.contains(c,d)||(b[d]=a[d]);return b},A.defaults=function(a){return B(k.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},A.clone=function(a){return A.isObject(a)?A.isArray(a)?a.slice():A.extend({},a):a},A.tap=function(a,b){return b(a),a};var I=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof A&&(a=a._wrapped),b instanceof A&&(b=b._wrapped);var e=m.call(a);if(e!=m.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(A.isFunction(g)&&g instanceof g&&A.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,j=!0;if("[object Array]"==e){if(i=a.length,j=i==b.length)for(;i--&&(j=I(a[i],b[i],c,d)););}else{for(var k in a)if(A.has(a,k)&&(i++,!(j=A.has(b,k)&&I(a[k],b[k],c,d))))break;if(j){for(k in b)if(A.has(b,k)&&!i--)break;j=!i}}return c.pop(),d.pop(),j};A.isEqual=function(a,b){return I(a,b,[],[])},A.isEmpty=function(a){if(null==a)return!0;if(A.isArray(a)||A.isString(a))return 0===a.length;for(var b in a)if(A.has(a,b))return!1;return!0},A.isElement=function(a){return!(!a||1!==a.nodeType)},A.isArray=x||function(a){return"[object Array]"==m.call(a)},A.isObject=function(a){return a===Object(a)},B(["Arguments","Function","String","Number","Date","RegExp"],function(a){A["is"+a]=function(b){return m.call(b)=="[object "+a+"]"}}),A.isArguments(arguments)||(A.isArguments=function(a){return!(!a||!A.has(a,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(a){return"function"==typeof a}),A.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},A.isNaN=function(a){return A.isNumber(a)&&a!=+a},A.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==m.call(a)},A.isNull=function(a){return null===a},A.isUndefined=function(a){return void 0===a},A.has=function(a,b){return n.call(a,b)},A.noConflict=function(){return b._=e,this},A.identity=function(a){return a},A.constant=function(a){return function(){return a}},A.property=function(a){return function(b){return b[a]}},A.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},A.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},A.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},A.now=Date.now||function(){return(new Date).getTime()};var J={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};J.unescape=A.invert(J.escape);var K={escape:new RegExp("["+A.keys(J.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(J.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(a){A[a]=function(b){return null==b?"":(""+b).replace(K[a],function(b){return J[a][b]})}}),A.result=function(a,b){if(null==a)return void 0;var c=a[b];return A.isFunction(c)?c.call(a):c},A.mixin=function(a){B(A.functions(a),function(b){var c=A[b]=a[b];A.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),P.call(this,c.apply(A,a))}})};var L=0;A.uniqueId=function(a){var b=++L+"";return a?a+b:b},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(a,b,c){var d;c=A.defaults({},c,A.templateSettings);var e=new RegExp([(c.escape||M).source,(c.interpolate||M).source,(c.evaluate||M).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(O,function(a){return"\\"+N[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,A);var i=function(a){return d.call(this,a,A)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},A.chain=function(a){return A(a).chain()};var P=function(a){return this._chain?A(a).chain():a};A.mixin(A),B(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];A.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],P.call(this,c)}}),B(["concat","join","slice"],function(a){var b=g[a];A.prototype[a]=function(){return P.call(this,b.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof a&&a.amd&&a("underscore",[],function(){return A})}).call(this)},{}],19:[function(a,b,c){var d=a("./modules/constants"),e=a("./modules/events"),f=a("./modules/logger"),g=a("./modules/ajax"),e=a("./modules/events"),h=a("./modules/waitForCloud"),i=a("./modules/api_act"),j=a("./modules/api_auth"),k=a("./modules/api_sec"),l=a("./modules/api_hash"),m=a("./modules/sync-cli"),n=a("./modules/api_mbaas"),o=a("./modules/api_cloud"),p=a("./modules/api_push"),q=a("./modules/fhparams"),r=a("./modules/appProps"),s=a("./modules/device"),t=function(a,b){e.addListener(a,b),a===d.INIT_EVENT&&(h.isReady()?b(null,{host:h.getCloudHostUrl()}):h.getInitError()&&b(h.getInitError()))},u=function(a,b){a===d.INIT_EVENT&&h.isReady()?b(null,{host:h.getCloudHostUrl()}):a===d.INIT_EVENT&&h.getInitError()?b(h.getInitError()):e.once(a,b)},v=function(a,b,c){f.warn("$fh.init will be deprecated soon"),h.ready(function(a,d){if(a){if("function"==typeof c)return c(a)}else"function"==typeof b&&b(d.host)})},w=window.$fh||{};w.init=v,w.act=i,w.auth=j,w.cloud=o,w.sec=k,w.hash=l,w.sync=m,w.push=p,w.ajax=w.__ajax=g,w.mbaas=n,w._getDeviceId=s.getDeviceId,w.fh_timeout=6e4,
w.getCloudURL=function(){return h.getCloudHostUrl()},w.getFHParams=function(){return q.buildFHParams()},w.getFHHeaders=function(){return q.getFHHeaders()},w.addListener=t,w.on=t,w.once=u;for(var x=["removeListener","removeAllListeners","setMaxListeners","listeners","emit"],y=0;y<x.length;y++)w[x[y]]=e[x[y]];w.on(d.INIT_EVENT,function(a,b){a?(w.cloud_props={},w.app_props={}):(w.cloud_props={hosts:{url:b.host}},w.app_props=r.getAppProps())}),w.on(d.INTERNAL_CONFIG_LOADED_EVENT,function(a,b){a?w.app_props={}:w.app_props=r.getAppProps(),e.emit(d.CONFIG_LOADED_EVENT,null)}),w.reset=h.reset,window.$fh=w,b.exports=w},{"./modules/ajax":21,"./modules/api_act":22,"./modules/api_auth":23,"./modules/api_cloud":24,"./modules/api_hash":25,"./modules/api_mbaas":26,"./modules/api_push":27,"./modules/api_sec":28,"./modules/appProps":29,"./modules/constants":31,"./modules/device":34,"./modules/events":35,"./modules/fhparams":36,"./modules/logger":42,"./modules/sync-cli":50,"./modules/waitForCloud":52}],20:[function(a,b,c){var d=a("url"),e=function(a){this.xdr=a,this.isWrapper=!0,this.readyState=0,this.onreadystatechange=null,this.status=0,this.statusText="",this.responseText="",this.headers={};var b=this;this.xdr.onload=function(){b.readyState=4,b.status=200,b.statusText="",b.responseText=b.xdr.responseText,b.onreadystatechange&&b.onreadystatechange()},this.xdr.onerror=function(){b.onerror&&b.onerror(),b.readyState=4,b.status=0,b.statusText="",b.onreadystatechange&&b.onreadystatechange()},this.xdr.ontimeout=function(){b.readyState=4,b.status=408,b.statusText="timeout",b.onreadystatechange&&b.onreadystatechange()}};e.prototype.open=function(a,b,c){var e=d.parse(b,!0);e.query=e.query||{},e.query.fh_headers=this.headers,this.xdr.open(a,d.format(e))},e.prototype.send=function(a){this.xdr.send(a)},e.prototype.abort=function(){this.xdr.abort()},e.prototype.setRequestHeader=function(a,b){this.headers[a]=b},e.prototype.getResponseHeader=function(a){},b.exports=e},{url:13}],21:[function(a,b,c){function d(a,b,c){return v.emit(b,c),!0}function e(a,b,c,e){return a.global?d(b||D,c,e):void 0}function f(a){a.global&&0===J.active++&&e(a,null,"ajaxStart")}function g(a){a.global&&!--J.active&&e(a,null,"ajaxStop")}function h(a,b){var c=b.context;return b.beforeSend.call(c,a,b)===!1?!1:void e(b,c,"ajaxSend",[a,b])}function i(a,b,c){var d=c.context,f="success";c.success.call(d,a,f,b),e(c,d,"ajaxSuccess",[b,c,a]),k(f,b,c)}function j(a,b,c,d){var f=d.context;d.error.call(f,c,b,a),e(d,f,"ajaxError",[c,d,a]),k(b,c,d)}function k(a,b,c){var d=c.context;c.complete.call(d,b,a),e(c,d,"ajaxComplete",[b,c]),g(c)}function l(){}function m(){var a=!1;return navigator.userAgent&&navigator.userAgent.indexOf("MSIE")>=0&&(a=!0),a}function n(a){var b=null;if(window.XMLHttpRequest&&(b=new XMLHttpRequest),m()&&a===!0&&"undefined"!=typeof window.XDomainRequest&&"undefined"==typeof window.cordova&&(b=new w(new XDomainRequest)),"undefined"!=typeof Titanium){var c={};J.settings&&J.settings.timeout&&(c.timeout=J.settings.timeout),b=Titanium.Network.createHTTPClient(c)}return b}function o(a){return a&&(a==H?"html":a==G?"json":E.test(a)?"script":F.test(a)&&"xml")||"text"}function p(a,b){return(a+"&"+b).replace(/[&?]{1,2}/,"?")}function q(a){"object"===u(a.data)&&("function"==typeof a.data.append?a.formdata=!0:a.data=s(a.data)),!a.data||a.type&&"GET"!=a.type.toUpperCase()||(a.url=p(a.url,a.data))}function r(a,b,c,d){var e="array"===u(b);for(var f in b){var g=b[f];d&&(f=c?d:d+"["+(e?"":f)+"]"),!d&&e?a.add(g.name,g.value):(c?"array"===u(g):"object"===u(g))?r(a,g,c,f):a.add(f,g)}}function s(a,b){var c=[];return c.add=function(a,b){this.push(K(a)+"="+K(b))},r(c,a,b),c.join("&").replace("%20","+")}function t(a){var b=Array.prototype.slice;return b.call(arguments,1).forEach(function(b){for(A in b)void 0!==b[A]&&(a[A]=b[A])}),a}var u,v=a("./events"),w=a("./XDomainRequestWrapper"),x=a("./logger");try{u=a("type-of")}catch(y){var z=a;u=z("type")}var A,B,C=0,D=window.document,E=/^(?:text|application)\/javascript/i,F=/^(?:text|application)\/xml/i,G="application/json",H="text/html",I=/^\s*$/,J=b.exports=function(a){var b=t({},a||{});window&&window.$fh&&"number"==typeof window.$fh.fh_timeout&&(J.settings.timeout=window.$fh.fh_timeout);for(A in J.settings)void 0===b[A]&&(b[A]=J.settings[A]);f(b),b.crossDomain||(b.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(b.url)&&(RegExp.$1!=window.location.protocol||RegExp.$2!=window.location.host));var c=b.dataType,d=/=\?/.test(b.url);if("jsonp"==c||d)return d||(b.url=p(b.url,(b.jsonp?b.jsonp:"_callback")+"=?")),J.JSONP(b);b.url||(b.url=window.location.toString()),q(b);var e=b.accepts[c],g={},k=/^([\w-]+:)\/\//.test(b.url)?RegExp.$1:window.location.protocol,m=b.xhr(b.crossDomain),n=null;b.crossDomain||(g["X-Requested-With"]="XMLHttpRequest"),e&&(g.Accept=e,e.indexOf(",")>-1&&(e=e.split(",",2)[0]),m.overrideMimeType&&m.overrideMimeType(e)),(b.contentType||b.data&&!b.formdata&&"GET"!=b.type.toUpperCase())&&(g["Content-Type"]=b.contentType||"application/x-www-form-urlencoded"),b.headers=t(g,b.headers||{}),"undefined"!=typeof Titanium&&(m.onerror=function(){n&&(clearTimeout(n),j(null,"error",m,b))}),m.onreadystatechange=function(){if(4==m.readyState){clearTimeout(n),n=void 0;var a,d=!1;if(b.tryJSONP&&0===m.status&&b.crossDomain&&!m.isTimeout&&"file:"!=k)return x.debug("retry ajax call with jsonp"),b.type="GET",b.dataType="jsonp",b.data="_jsonpdata="+b.data,J(b);if(m.status>=200&&m.status<300||304==m.status||0==m.status&&"file:"==k){c=c||o(m.getResponseHeader("content-type")),a=m.responseText,x.debug("ajax response :: status = "+m.status+" :: body = "+a);try{"script"==c?(1,eval)(a):"xml"==c?a=m.responseXML:"json"==c&&(a=I.test(a)?null:JSON.parse(a))}catch(e){d=e}d?(x.debug("ajax error",d),j(d,"parsererror",m,b)):i(a,m,b)}else j(null,"error",m,b)}};var r="async"in b?b.async:!0;x.debug("ajax call settings",b),m.open(b.type,b.url,r);for(B in b.headers)m.setRequestHeader(B,b.headers[B]);return h(m,b)===!1?(x.debug("ajax call is aborted due to ajaxBeforeSend"),m.abort(),!1):(b.timeout>0&&(n=setTimeout(function(){x.debug("ajax call timed out"),m.onreadystatechange=l,m.abort(),m.isTimeout=!0,j(null,"timeout",m,b)},b.timeout)),m.send(b.data?b.data:null),m)};J.active=0,J.JSONP=function(a){if(!("type"in a))return J(a);var b,c="jsonp"+ ++C,d=D.createElement("script"),e=function(){c in window&&(window[c]=l),k("abort",f,a)},f={abort:e},g=D.getElementsByTagName("head")[0]||D.documentElement;return a.error&&(d.onerror=function(){f.abort(),a.error()}),window[c]=function(d){clearTimeout(b),b=void 0,delete window[c],i(d,f,a)},q(a),d.src=a.url.replace(/=\?/,"="+c),g.insertBefore(d,g.firstChild),a.timeout>0&&(b=setTimeout(function(){f.abort(),k("timeout",f,a)},a.timeout)),f},J.settings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:n,accepts:{script:"text/javascript, application/javascript",json:G,xml:"application/xml, text/xml",html:H,text:"text/plain"},crossDomain:!1},J.get=function(a,b){return J({url:a,success:b})},J.post=function(a,b,c,d){return"function"===u(b)&&(d=d||c,c=b,b=null),J({type:"POST",url:a,data:b,success:c,dataType:d})},J.getJSON=function(a,b){return J({url:a,success:b,dataType:"json"})};var K=encodeURIComponent},{"./XDomainRequestWrapper":20,"./events":35,"./logger":42,"type-of":17}],22:[function(a,b,c){function d(a,b,c){var d=f.getCloudHost(),e=d.getActUrl(a.act),l=a.req||{};l=g.addFHParams(l);var m=g.getFHHeaders();return a.headers&&(m=k.extend(m,a.headers)),h({url:e,tryJSONP:!0,type:"POST",dataType:"json",data:JSON.stringify(l),headers:m,contentType:"application/json",timeout:a.timeout||j.timeout,success:b,error:function(a,b,d){return i(c,a,b,d)}})}var e=a("./logger"),f=a("./waitForCloud"),g=a("./fhparams"),h=a("./ajax"),i=a("./handleError"),j=a("./appProps"),k=a("underscore");b.exports=function(a,b,c){return e.debug("act is called"),c||(c=function(a,b){e.debug(a+":"+JSON.stringify(b))}),a.act?void f.ready(function(f,g){return e.debug("Calling fhact now"),f?c(f.message,f):void d(a,b,c)}):c("act_no_action",{})}},{"./ajax":21,"./appProps":29,"./fhparams":36,"./handleError":37,"./logger":42,"./waitForCloud":52,underscore:18}],23:[function(a,b,c){function d(a,b,c,d,i){var j=m.getAppProps(),l=j.host+k.boxprefix+"admin/authpolicy/"+a;j.local&&(l=f.getCloudHostUrl()+k.boxprefix+"admin/authpolicy/"+a),h({url:l,type:"POST",tryJSONP:!0,data:JSON.stringify(b),dataType:"json",contentType:"application/json",timeout:c.timeout||j.timeout,headers:g.getFHHeaders(),success:function(a){return d?d(a):void 0},error:function(b,c,d){e.error("got error when calling "+a,b.responseText||b,d),i&&i(b,c,d)}})}var e=a("./logger"),f=a("./waitForCloud"),g=a("./fhparams"),h=a("./ajax"),i=a("./handleError"),j=a("./device"),k=a("./constants"),l=a("./checkAuth"),m=a("./appProps"),n=a("./data"),o=function(a,b,c){return c||(c=function(a,b){e.debug(a+":"+JSON.stringify(b))}),a.policyId?a.clientToken?void f.ready(function(e,h){if(e)return c(e.message,e);var k={};k.policyId=a.policyId,k.clientToken=a.clientToken;var l=f.getCloudHost();l.getEnv()&&(k.environment=l.getEnv()),a.endRedirectUrl&&(k.endRedirectUrl=a.endRedirectUrl,a.authCallback&&(k.endRedirectUrl+=(/\?/.test(k.endRedirectUrl)?"&":"?")+"_fhAuthCallback="+a.authCallback)),k.params={},a.params&&(k.params=a.params);var m=a.endRedirectUrl||"status=complete";k.device=j.getDeviceId(),k=g.addFHParams(k),d("auth",k,a,function(a){o.authenticateHandler(m,a,b,c)},function(a,b,d){i(c,a,b,d)})}):c("auth_no_clientToken",{}):c("auth_no_policyId",{})};o.hasSession=function(a){n.sessionManager.exists(a)},o.clearSession=function(a){n.sessionManager.read(function(b,c){return b?a(b):(c&&d("revokesession",c,{}),n.sessionManager.remove(a),void g.setAuthSessionToken(void 0))})},o.authenticateHandler=l.handleAuthResponse,o.verify=function(a){n.sessionManager.read(function(b,c){return b?a(b):c?void d("verifysession",c,{},function(b){return a(null,b.isValid)},function(b,c,d){return a("network_error")}):a("no_session")})},b.exports=o},{"./ajax":21,"./appProps":29,"./checkAuth":30,"./constants":31,"./data":33,"./device":34,"./fhparams":36,"./handleError":37,"./logger":42,"./waitForCloud":52}],24:[function(a,b,c){function d(a,b,c){var d=f.getCloudHost(),e=d.getCloudUrl(a.path),l=a.data||{};l=g.addFHParams(l);var m,n=a.method||"POST";m=-1!==["POST","PUT","PATCH","DELETE"].indexOf(n.toUpperCase())?JSON.stringify(l):l;var o=g.getFHHeaders();return a.headers&&(o=k.extend(o,a.headers)),h({url:e,type:n,dataType:a.dataType||"json",data:m,contentType:a.contentType||"application/json",timeout:a.timeout||j.timeout,headers:o,success:b,error:function(a,b,d){return i(c,a,b,d)}})}var e=a("./logger"),f=a("./waitForCloud"),g=a("./fhparams"),h=a("./ajax"),i=a("./handleError"),j=a("./appProps"),k=a("underscore");b.exports=function(a,b,c){e.debug("cloud is called"),c||(c=function(a,b){e.debug(a+":"+JSON.stringify(b))}),f.ready(function(f,g){return e.debug("Calling fhact now"),f?c(f.message,f):void d(a,b,c)})}},{"./ajax":21,"./appProps":29,"./fhparams":36,"./handleError":37,"./logger":42,"./waitForCloud":52,underscore:18}],25:[function(a,b,c){var d=a("./security/hash");b.exports=function(a,b,c){var e={};"undefined"==typeof a.algorithm&&(a.algorithm="MD5"),e.act="hash",e.params=a,d(e,b,c)}},{"./security/hash":48}],26:[function(a,b,c){var d=a("./logger"),e=a("./waitForCloud"),f=a("./fhparams"),g=a("./ajax"),h=a("./handleError"),i=(a("./constants"),a("./appProps"));b.exports=function(a,b,c){d.debug("mbaas is called."),c||(c=function(a,b){console.debug(a+":"+JSON.stringify(b))});var j=a.service,k=a.params;e.ready(function(l,m){if(d.debug("Calling mbaas now"),l)return c(l.message,l);var n=e.getCloudHost(),o=n.getMBAASUrl(j);return k=f.addFHParams(k),g({url:o,tryJSONP:!0,type:"POST",dataType:"json",data:JSON.stringify(k),headers:f.getFHHeaders(),contentType:"application/json",timeout:a.timeout||i.timeout,success:b,error:function(a,b,d){return h(c,a,b,d)}})})}},{"./ajax":21,"./appProps":29,"./constants":31,"./fhparams":36,"./handleError":37,"./logger":42,"./waitForCloud":52}],27:[function(a,b,c){var d=a("./logger"),e=a("./appProps"),f=a("./waitForCloud");b.exports=function(a,b,c,g){c||(c=function(a,b){d.debug(a+":"+JSON.stringify(b))}),f.ready(function(f,h){if(d.debug("push is called"),f)return c(f.message,f);if(window.push){var i=e.getAppProps();if(i.pushServerURL=i.host+"/api/v2/ag-push",g)for(var j in g)i[j]=g[j];window.push.register(a,b,c,i)}else c("push plugin not installed")})}},{"./appProps":29,"./logger":42,"./waitForCloud":52}],28:[function(a,b,c){var d=a("./security/aes-keygen"),e=a("./security/aes-node"),f=a("./security/rsa-node"),g=a("./security/hash");b.exports=function(a,b,c){return a.act?a.params?a.params.algorithm?(a.params.algorithm=a.params.algorithm.toLowerCase(),"hash"===a.act?g(a,b,c):"encrypt"===a.act?"aes"===a.params.algorithm?e.encrypt(a,b,c):"rsa"===a.params.algorithm?f.encrypt(a,b,c):c("encrypt_bad_algorithm:"+a.params.algorithm,{},a):"decrypt"===a.act?"aes"===a.params.algorithm?e.decrypt(a,b,c):c("decrypt_bad_algorithm:"+a.params.algorithm,{},a):"keygen"===a.act?"aes"===a.params.algorithm?d(a,b,c):c("keygen_bad_algorithm:"+a.params.algorithm,{},a):void 0):void c("no_params_algorithm",{},a):void c("no_params",{},a):void c("bad_act",{},a)}},{"./security/aes-keygen":46,"./security/aes-node":47,"./security/hash":48,"./security/rsa-node":49}],29:[function(a,b,c){var d=a("./constants"),e=a("./ajax"),f=a("./logger"),g=a("./queryMap"),h=a("underscore"),i=null,j=function(a){function b(b){h.extend(i,b,k),"undefined"!=typeof j.url&&(i.host=j.url),i.local=!(!k.host&&!j.url),a(null,i)}var c=document.location.href,j=g(c.replace(/#.*?$/g,"")),k={};for(var l in j)j.hasOwnProperty(l)&&0===l.indexOf("fh_")&&(k[l.substr(3)]=j[l]);i={appid:"000000000000000000000000",appkey:"0000000000000000000000000000000000000000",projectid:"000000000000000000000000",connectiontag:"0.0.1"};var m=j.fhconfig||d.config_js;e({url:m,dataType:"json",success:function(c){return f.debug("fhconfig = "+JSON.stringify(c)),null==c?window.fh_app_props?b(window.fh_app_props):a(new Error("app_config_missing")):void b(c)},error:function(c,e,g){return window.fh_app_props?b(window.fh_app_props):(f.error(d.config_js+" Not Found"),void a(new Error("app_config_missing")))}})},k=function(a){i=a},l=function(){return i};b.exports={load:j,getAppProps:l,setAppProps:k}},{"./ajax":21,"./constants":31,"./logger":42,"./queryMap":44,underscore:18}],30:[function(a,b,c){var d=a("./logger"),e=a("./queryMap"),f=a("./fhparams"),g=a("./data"),h=function(a){if(/\_fhAuthCallback/.test(a)){var b=e(a);if(b){var c=b._fhAuthCallback;if(c)if(b.result&&"success"===b.result){var d={sessionToken:b.fh_auth_session,authResponse:JSON.parse(decodeURIComponent(decodeURIComponent(b.authResponse)))};f.setAuthSessionToken(b.fh_auth_session),g.sessionManager.save(b.fh_auth_session),window[c](null,d)}else window[c]({message:b.message})}}},i=function(a,b,c,h){if(b.status&&"ok"===b.status){var i=function(a){return a.sessionToken?(f.setAuthSessionToken(a.sessionToken),void g.sessionManager.save(a.sessionToken,function(){return c(a)})):c(a)};if(b.url){var j=null,k=function(b){if(b.indexOf(a)>-1){j&&j.close();var c=e(b);if(c)if(c.result&&"success"===c.result){var d={sessionToken:c.fh_auth_session,authResponse:JSON.parse(decodeURIComponent(decodeURIComponent(c.authResponse)))};i(d)}else h&&h("auth_failed",{message:c.message});else h&&h("auth_failed",{message:c.message})}};if(window.PhoneGap||window.cordova)if(window.plugins&&window.plugins.childBrowser)"function"==typeof window.plugins.childBrowser.showWebPage&&(window.plugins.childBrowser.onLocationChange=k,window.plugins.childBrowser.showWebPage(b.url),j=window.plugins.childBrowser);else try{j=window.open(b.url,"_blank","location=yes"),j.addEventListener("loadstart",function(a){k(a.url)})}catch(l){d.info("InAppBrowser plugin is not intalled."),i(b)}else document.location.href=b.url}else i(b)}else h&&h("auth_failed",b)};window.addEventListener?window.addEventListener("load",function(){h(window.location.href)},!1):window.attachEvent&&window.attachEvent("onload",function(){h(window.location.href)}),b.exports={handleAuthResponse:i}},{"./data":33,"./fhparams":36,"./logger":42,"./queryMap":44}],31:[function(a,b,c){b.exports={boxprefix:"/box/srv/1.1/",sdk_version:"2.15.0",config_js:"fhconfig.json",INIT_EVENT:"fhinit",INTERNAL_CONFIG_LOADED_EVENT:"internalfhconfigloaded",CONFIG_LOADED_EVENT:"fhconfigloaded",SESSION_TOKEN_STORAGE_NAME:"fh_session_token",SESSION_TOKEN_KEY_NAME:"sessionToken"}},{}],32:[function(a,b,c){b.exports={readCookieValue:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},createCookie:function(a,b){var c=new Date;c.setTime(c.getTime()+31536e8);var d="; expires="+c.toGMTString();document.cookie=a+"="+b+d+"; path = /"}}},{}],33:[function(a,b,c){var d=a("../../libs/generated/lawnchair"),e=a("./lawnchair-ext"),f=a("./logger"),g=a("./constants"),h={DEFAULT_ADAPTERS:["dom","webkit-sqlite","window-name"],getStorage:function(a,b,c){var e=h.DEFAULT_ADAPTERS,g=c||function(){};b&&b.length>0&&(e="string"==typeof b?[b]:b);var i={name:a,adapter:e,fail:function(a,b){var c="read/save from/to local storage failed  msg:"+a+" err:"+b;f.error(c,b),g(c,{})}},j=d(i,function(){});return j},addFileStorageAdapter:function(a,b){d.adapter("localFileStorage",e.fileStorageAdapter(a,b))},sessionManager:{read:function(a){h.getStorage(g.SESSION_TOKEN_STORAGE_NAME).get(g.SESSION_TOKEN_KEY_NAME,function(b){return a?a(null,b):void 0})},exists:function(a){h.getStorage(g.SESSION_TOKEN_STORAGE_NAME).exists(g.SESSION_TOKEN_KEY_NAME,function(b){return a?a(null,b):void 0})},remove:function(a){h.getStorage(g.SESSION_TOKEN_STORAGE_NAME).remove(g.SESSION_TOKEN_KEY_NAME,function(){return a?a():void 0})},save:function(a,b){h.getStorage(g.SESSION_TOKEN_STORAGE_NAME).save({key:g.SESSION_TOKEN_KEY_NAME,sessionToken:a},function(a){return b?b():void 0})}}};b.exports=h},{"../../libs/generated/lawnchair":2,"./constants":31,"./lawnchair-ext":40,"./logger":42}],34:[function(a,b,c){var d=a("./cookies"),e=a("./uuid"),f=a("./logger");b.exports={getDeviceId:function(){if("undefined"!=typeof window.fhdevice&&"undefined"!=typeof window.fhdevice.uuid)return window.fhdevice.uuid;if("undefined"!=typeof window.device&&"undefined"!=typeof window.device.uuid)return window.device.uuid;if("undefined"!=typeof navigator.device&&"undefined"!=typeof navigator.device.uuid)return navigator.device.uuid;var a="mock_uuid",b=d.readCookieValue(a);return null==b&&(b=e.createUUID(),d.createCookie(a,b)),b},getCuidMap:function(){return"undefined"!=typeof window.fhdevice&&"undefined"!=typeof window.fhdevice.cuidMap?window.fhdevice.cuidMap:"undefined"!=typeof window.device&&"undefined"!=typeof window.device.cuidMap?window.device.cuidMap:"undefined"!=typeof navigator.device&&"undefined"!=typeof navigator.device.cuidMap?navigator.device.cuidMap:null},getDestination:function(){var b=null,c=a("./platformsMap"),d=navigator.userAgent,e=document.location.search.split("fh_destination_code=");return e.length>1?b=e[1]:"undefined"!=typeof window.fh_destination_code?b=window.fh_destination_code:c.forEach(function(a){a.test.forEach(function(c){d.indexOf(c)>-1&&(b=a.destination)})}),null==b&&(b="web"),f.debug("destination = "+b),b}}},{"./cookies":32,"./logger":42,"./platformsMap":43,"./uuid":51}],35:[function(a,b,c){var d=a("events").EventEmitter,e=new d;e.setMaxListeners(0),b.exports=e},{events:6}],36:[function(a,b,c){var d=a("./device"),e=a("./sdkversion"),f=a("./appProps"),g=a("./logger"),h=null,i=null,j=function(){if(h)return h;var a={};a.cuid=d.getDeviceId(),a.cuidMap=d.getCuidMap(),a.destination=d.getDestination(),(window.device||navigator.device)&&(a.device=window.device||navigator.device),"undefined"!=typeof window.fh_app_version&&(a.app_version=fh_app_version),"undefined"!=typeof window.fh_project_version&&(a.project_version=fh_project_version),"undefined"!=typeof window.fh_project_app_version&&(a.project_app_version=fh_project_app_version),a.sdk_version=e(),i&&(a.sessionToken=i);var b=f.getAppProps();return b&&(a.appid=b.appid,a.appkey=b.appkey,a.projectid=b.projectid,a.analyticsTag=b.analyticsTag,a.connectiontag=b.connectiontag,b.init&&(a.init="string"==typeof b.init?JSON.parse(b.init):b.init)),h=a,g.debug("fhparams = ",h),a},k=function(a){var b=a||{};return b.__fh=j(),b},l=function(){var a={},b=j();for(var c in b)b.hasOwnProperty(c)&&(a["X-FH-"+c]=b[c]);return a},m=function(a){i=a,h=null};b.exports={buildFHParams:j,addFHParams:k,setAuthSessionToken:m,getFHHeaders:l}},{"./appProps":29,"./device":34,"./logger":42,"./sdkversion":45}],37:[function(a,b,c){b.exports=function(a,b,c,d){var e,f=0;if(b)try{f=b.status;var g=JSON.parse(b.responseText);e=g.error||g.msg||g,e instanceof Array&&(e=e.join("\n"))}catch(h){e=b.responseText}a&&a(e,{status:f,message:c,error:d})}},{}],38:[function(a,b,c){function d(a){var b=a;return"/"===b.charAt(b.length-1)&&(b=b.substring(0,b.length-1)),b}function e(a){var b=a;return b.length>1&&"/"===b.charAt(0)&&(b=b.substring(1,b.length)),b}function f(a){this.cloud_props=a,this.cloud_host=void 0,this.app_env=null,this.isLegacy=!1}var g=a("./constants"),h=a("./appProps");f.prototype.getHost=function(a){if(this.cloud_host)return this.cloud_host;var b,c;if(this.cloud_props&&this.cloud_props.hosts&&(b=this.cloud_props.hosts.url,"undefined"==typeof b)){var e=this.cloud_props.hosts.releaseCloudUrl;c=this.cloud_props.hosts.releaseCloudType,"undefined"!=typeof a&&a.indexOf("dev")>-1&&(e=this.cloud_props.hosts.debugCloudUrl,c=this.cloud_props.hosts.debugCloudType),b=e}return b=d(b),this.cloud_host=b,"fh"===c&&(this.isLegacy=!0),b},f.prototype.getActUrl=function(a){var b=h.getAppProps()||{};return"undefined"==typeof this.cloud_host&&this.getHost(b.mode),this.isLegacy?this.cloud_host+g.boxprefix+"act/"+this.cloud_props.domain+"/"+b.appid+"/"+a+"/"+b.appid:this.cloud_host+"/cloud/"+a},f.prototype.getMBAASUrl=function(a){var b=h.getAppProps()||{};return"undefined"==typeof this.cloud_host&&this.getHost(b.mode),this.cloud_host+"/mbaas/"+a},f.prototype.getCloudUrl=function(a){var b=h.getAppProps()||{};return"undefined"==typeof this.cloud_host&&this.getHost(b.mode),this.cloud_host+"/"+e(a)},f.prototype.getEnv=function(){return this.app_env?this.app_env:(this.cloud_props&&this.cloud_props.hosts&&(this.app_env=this.cloud_props.hosts.environment),this.app_env)},b.exports=f},{"./appProps":29,"./constants":31}],39:[function(a,b,c){var d=(a("./loadScript"),a("./constants")),e=a("./fhparams"),f=a("./ajax"),g=a("./handleError"),h=a("./logger"),i=a("./security/hash"),j=a("./appProps"),k=a("./constants"),l=a("./events"),m=a("./data"),n=function(a){j.load(function(b,c){return b?a(b):(l.emit(k.INTERNAL_CONFIG_LOADED_EVENT,null,c),o(c,a))})},o=function(a,b){if(a.loglevel&&h.setLevel(a.loglevel),a.local){var c={domain:"local",firstTime:!1,hosts:{debugCloudType:"node",debugCloudUrl:a.host,releaseCloudType:"node",releaseCloudUrl:a.host,type:"cloud_nodejs",url:a.host},init:{trackId:"000000000000000000000000"},status:"ok"};return b(null,{cloud:c})}m.addFileStorageAdapter(a,i);var j=function(a,c,d,i){var j=e.buildFHParams();f({url:a,type:"POST",tryJSONP:!0,dataType:"json",contentType:"application/json",data:JSON.stringify(j),timeout:c.timeout,success:function(a){i&&i.save({key:"fh_init",value:a},function(){}),b&&b(null,{cloud:a})},error:function(a,c,e){var f="unknown";a&&(f=a.status+" - "+a.responseText),h.error("App init returned error : "+f),d?(h.info("Using cached host: "+JSON.stringify(d)),b&&b(null,{cloud:d})):(h.error("No cached host found. Init failed."),g(function(a,c){b&&b({error:c,message:a})},a,c,e))}})},k=null,l=a.host+d.boxprefix+"app/init";try{k=m.getStorage("fh_init_storage","undefined"!=typeof Titanium?["titanium"]:null),k.get("fh_init",function(b){var c=null;b&&null!==b.value&&"undefined"!=typeof b.value&&""!==b&&(b="string"==typeof b?JSON.parse(b):b,b.value="string"==typeof b.value?JSON.parse(b.value):b.value,b.value.init?a.init=b.value.init:a.init="string"==typeof b.value?JSON.parse(b.value):b.value,b.value.hosts&&(c=b.value)),j(l,a,c,k)})}catch(n){j(l,a,null,null)}};b.exports={init:n,loadCloudProps:o}},{"./ajax":21,"./appProps":29,"./constants":31,"./data":33,"./events":35,"./fhparams":36,"./handleError":37,"./loadScript":41,"./logger":42,"./security/hash":48}],40:[function(a,b,c){var d=function(a,b){function c(a){console&&console.log(a)}function d(d,e){d=a.appid+d,b({algorithm:"MD5",text:d},function(a){var b=a.hashvalue+".txt";return"undefined"==typeof navigator.externalstorage?(c("filenameForKey key="+d+" , Filename: "+b),e(b)):void navigator.externalstorage.enable(function(a){var c=b;return a.path&&(c=a.path,c.match(/\/$/)||(c+="/"),c+=b),b=c,e(b)},function(a){return e(b)})})}var e=function(a,b){if(!console)throw a;console.log("error in file system adapter !",a,b)};return{valid:function(){return!!window.requestFileSystem},init:function(a,b){a&&"function"==typeof a.fail&&(e=a.fail),b&&this.fn(this.name,b).call(this,this)},keys:function(a){throw"Currently not supported"},save:function(a,b){var c=a.key,f=a.val||a.value;d(c,function(a){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(d){d.root.getFile(a,{create:!0},function(a){a.createWriter(function(a){a.onwrite=function(){return b({key:c,val:f})},a.write(f)},function(){e("[save] Failed to create file writer")})},function(){e("[save] Failed to getFile")})},function(){e("[save] Failed to requestFileSystem")})})},batch:function(a,b){throw"Currently not supported"},get:function(a,b){d(a,function(c){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(d){d.root.getFile(c,{},function(c){c.file(function(c){var d=new FileReader;d.onloadend=function(c){var d=c.target.result;try{d=decodeURIComponent(d)}catch(e){}return b({key:a,val:d})},d.readAsText(c)},function(){e("[load] Failed to getFile")})},function(){b({key:a,val:null})})},function(){e("[load] Failed to get fileSystem")})})},exists:function(a,b){d(a,function(a){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(c){c.root.getFile(a,{},function(a){return b(!0)},function(a){return b(!1)})})})},all:function(a){throw"Currently not supported"},remove:function(a,b){d(a,function(c){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(d){d.root.getFile(c,{},function(c){c.remove(function(){return b({key:a,val:null})},function(){e("[remove] Failed to remove file")})},function(){e("[remove] Failed to getFile")})},function(){e("[remove] Failed to get fileSystem")})})},nuke:function(a){throw"Currently not supported"}}};b.exports={fileStorageAdapter:d}},{}],41:[function(a,b,c){b.exports=function(a,b){var c,d=document.head||document.getElementsByTagName("head")[0]||document.documentElement;c=document.createElement("script"),c.async="async",c.src=a,c.type="text/javascript",c.onload=c.onreadystatechange=function(){(!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=void 0,b&&"function"==typeof b&&b())},d.insertBefore(c,d.firstChild)}},{}],42:[function(a,b,c){var d=(a("console"),a("loglevel"));d.setLevel("info"),b.exports=d},{console:5,loglevel:16}],43:[function(a,b,c){b.exports=[{destination:"ipad",test:["iPad"]},{destination:"iphone",test:["iPhone"]},{destination:"android",test:["Android"]},{destination:"blackberry",test:["BlackBerry","BB10","RIM Tablet OS"]},{destination:"windowsphone",test:["Windows Phone 8"]},{destination:"windowsphone7",test:["Windows Phone OS 7"]}]},{}],44:[function(a,b,c){b.exports=function(a){var b={},c=a.split("?");if(2===c.length){var d=c[1],e=d.split("&");b={};for(var f=0;f<e.length;f++){var g=e[f],h=g.split("=");b[h[0]]=h[1]}}return b}},{}],45:[function(a,b,c){var d=a("./constants");b.exports=function(){var a="FH_JS_SDK";return"undefined"!=typeof window.fh_destination_code?a="FH_HYBRID_SDK":(window.PhoneGap||window.cordova)&&(a="FH_PHONEGAP_SDK"),a+"/"+d.sdk_version}},{"./constants":31}],46:[function(a,b,c){var d=a("../../../libs/rsa"),e=d.SecureRandom,f=d.byte2Hex,g=function(a){var b=new e,c=new Array(a);b.nextBytes(c);for(var d="",g=0;g<c.length;g++)d+=f(c[g]);return d},h=function(a,b,c){if(!a.params.keysize)return void c("no_params_keysize",{},a);if("aes"!==a.params.algorithm.toLowerCase())return void c("keygen_bad_algorithm",{},a);var d=parseInt(a.params.keysize,10);return d>100&&(d/=8),"undefined"==typeof e?c("security library is not loaded."):b({algorithm:"AES",secretkey:g(d),iv:g(d)})};b.exports=h},{"../../../libs/rsa":3}],47:[function(a,b,c){var d=a("../../../libs/generated/crypto"),e=function(a,b,c){var e=["key","plaintext","iv"];if("aes"!==a.params.algorithm.toLowerCase())return c("encrypt_bad_algorithm",{},a);for(var f=0;e>f;f++){var g=e[f];if(!a.params[g])return c("no_params_"+g,{},a)}var h=d.AES.encrypt(a.params.plaintext,d.enc.Hex.parse(a.params.key),{iv:d.enc.Hex.parse(a.params.iv)});return cipher_text=d.enc.Hex.stringify(h.ciphertext),b({ciphertext:cipher_text})},f=function(a,b,c){var e=["key","ciphertext","iv"];if("aes"!==a.params.algorithm.toLowerCase())return c("decrypt_bad_algorithm",{},a);for(var f=0;e>f;f++){var g=e[f];if(!a.params[g])return c("no_params_"+g,{},a)}var h=d.enc.Hex.parse(a.params.ciphertext),i=d.enc.Base64.stringify(h),j=d.AES.decrypt(i,d.enc.Hex.parse(a.params.key),{iv:d.enc.Hex.parse(a.params.iv)});try{return b({plaintext:j.toString(d.enc.Utf8)})}catch(k){return c(k)}};b.exports={encrypt:e,decrypt:f}},{"../../../libs/generated/crypto":1}],48:[function(a,b,c){var d=a("../../../libs/generated/crypto"),e=function(a,b,c){if(!a.params.text)return void c("hash_no_text",{},a);var e;if("md5"===a.params.algorithm.toLowerCase())e=d.MD5(a.params.text).toString(d.enc.Hex);else if("sha1"===a.params.algorithm.toLowerCase())e=d.SHA1(a.params.text).toString(d.enc.Hex);else if("sha256"===a.params.algorithm.toLowerCase())e=d.SHA256(a.params.text).toString(d.enc.Hex);else{if("sha512"!==a.params.algorithm.toLowerCase())return c("hash_unsupported_algorithm: "+a.params.algorithm);e=d.SHA512(a.params.text).toString(d.enc.Hex)}return b({hashvalue:e})};b.exports=e},{"../../../libs/generated/crypto":1}],49:[function(a,b,c){var d=a("../../../libs/rsa"),e=d.RSAKey,f=function(a,b,c){var d=["modulu","plaintext"];if("rsa"!==a.params.algorithm.toLowerCase())return c("encrypt_bad_algorithm",{},a);for(var f=0;d>f;f++){var g=d[f];if(!a.params[g])return c("no_params_"+g,{},a)}var h=new e;h.setPublic(a.params.modulu,"10001");var i=a.params.plaintext;return cipher_text=h.encrypt(i),b({ciphertext:cipher_text})};b.exports={encrypt:f}},{"../../../libs/rsa":3}],50:[function(a,b,c){var d=a("./api_act"),e=a("./api_cloud"),f=a("../../libs/generated/crypto"),g=a("../../libs/generated/lawnchair"),h={defaults:{sync_frequency:10,auto_sync_local_updates:!0,notify_client_storage_failed:!0,notify_sync_started:!0,notify_sync_complete:!0,notify_offline_update:!0,notify_collision_detected:!0,notify_remote_update_failed:!0,notify_local_update_applied:!0,notify_remote_update_applied:!0,notify_delta_received:!0,notify_record_delta_received:!0,notify_sync_failed:!0,do_console_log:!1,crashed_count_wait:10,resend_crashed_updates:!0,sync_active:!0,storage_strategy:"html5-filesystem",file_system_quota:61644800,has_custom_sync:null,icloud_backup:!1},notifications:{CLIENT_STORAGE_FAILED:"client_storage_failed",SYNC_STARTED:"sync_started",SYNC_COMPLETE:"sync_complete",OFFLINE_UPDATE:"offline_update",COLLISION_DETECTED:"collision_detected",REMOTE_UPDATE_FAILED:"remote_update_failed",REMOTE_UPDATE_APPLIED:"remote_update_applied",LOCAL_UPDATE_APPLIED:"local_update_applied",DELTA_RECEIVED:"delta_received",RECORD_DELTA_RECEIVED:"record_delta_received",SYNC_FAILED:"sync_failed"},datasets:{},config:void 0,notify_callback:void 0,notify_callback_map:{},init_is_called:!1,uid_map:{},init:function(a){h.consoleLog("sync - init called"),h.config=JSON.parse(JSON.stringify(h.defaults));
for(var b in a)h.config[b]=a[b];h.init_is_called||(h.init_is_called=!0,h.datasetMonitor())},notify:function(a,b){1===arguments.length&&"function"==typeof a?h.notify_callback=a:h.notify_callback_map[a]=b},manage:function(a,b,c,d,e){h.consoleLog("manage - START");var f=b||{},g=function(b){h.consoleLog("doManage dataset :: initialised = "+b.initialised+" :: "+a+" :: "+JSON.stringify(f));var g=h.setOptions(f);b.query_params=c||b.query_params||{},b.meta_data=d||b.meta_data||{},b.config=g,b.syncRunning=!1,b.syncPending=!0,b.initialised=!0,"undefined"==typeof b.meta&&(b.meta={}),h.saveDataSet(a,function(){e&&e()})};h.getDataSet(a,function(a){h.consoleLog("manage - dataset already loaded"),g(a)},function(b){h.consoleLog("manage - dataset not loaded... trying to load"),h.loadDataSet(a,function(b){h.consoleLog("manage - dataset loaded from local storage"),h.doNotify(a,null,h.notifications.LOCAL_UPDATE_APPLIED,"load"),g(b)},function(b){h.consoleLog("manage - Creating new dataset for id "+a);var c={};c.data={},c.pending={},c.meta={},h.datasets[a]=c,g(c)})})},setOptions:function(a){h.config||(h.config=JSON.parse(JSON.stringify(h.defaults)));var b=JSON.parse(JSON.stringify(h.config)),c=JSON.parse(JSON.stringify(a));for(var d in c)b[d]=c[d];return b},list:function(a,b,c){h.getDataSet(a,function(a){if(a&&a.data){var d=JSON.parse(JSON.stringify(a.data));b(d)}else c&&c("no_data")},function(a,b){c&&c(a,b)})},getUID:function(a){var b=h.uid_map[a];return b||0===b?b:a},create:function(a,b,c,d){return null==b&&d?d("null_data"):void h.addPendingObj(a,null,b,"create",c,d)},read:function(a,b,c,d){h.getDataSet(a,function(a){b=h.getUID(b);var e=a.data[b];if(e){var f=JSON.parse(JSON.stringify(e));c(f)}else d("unknown_uid")},function(a,b){d&&d(a,b)})},update:function(a,b,c,d,e){b=h.getUID(b),h.addPendingObj(a,b,c,"update",d,e)},"delete":function(a,b,c,d){b=h.getUID(b),h.addPendingObj(a,b,null,"delete",c,d)},getPending:function(a,b){h.getDataSet(a,function(a){var c;a&&(c=a.pending),b(c)},function(a,b){h.consoleLog(a)})},clearPending:function(a,b){h.getDataSet(a,function(c){c.pending={},h.saveDataSet(a,b)})},listCollisions:function(a,b,c){h.getDataSet(a,function(d){h.doCloudCall({dataset_id:a,req:{fn:"listCollisions",meta_data:d.meta_data}},b,c)},c)},removeCollision:function(a,b,c,d){h.getDataSet(a,function(e){h.doCloudCall({dataset_id:a,req:{fn:"removeCollision",hash:b,meta_data:e.meta_data}},c,d)})},isOnline:function(a){var b=!0;if("undefined"!=typeof navigator.onLine&&(b=navigator.onLine),b&&"undefined"!=typeof navigator.network&&"undefined"!=typeof navigator.network.connection){var c=navigator.network.connection.type;("none"===c||null===c)&&(b=!1)}return a(b)},doNotify:function(a,b,c,d){if(h.notify_callback||h.notify_callback_map[a]){var e=h.notify_callback_map[a]||h.notify_callback;if(h.config["notify_"+c]){var f={dataset_id:a,uid:b,code:c,message:d};setTimeout(function(){e(f)},0)}}},getDataSet:function(a,b,c){var d=h.datasets[a];d?b(d):c&&c("unknown_dataset "+a,a)},getQueryParams:function(a,b,c){var d=h.datasets[a];d?b(d.query_params):c&&c("unknown_dataset "+a,a)},setQueryParams:function(a,b,c,d){var e=h.datasets[a];e?(e.query_params=b,h.saveDataSet(a),c&&c(e.query_params)):d&&d("unknown_dataset "+a,a)},getMetaData:function(a,b,c){var d=h.datasets[a];d?b(d.meta_data):c&&c("unknown_dataset "+a,a)},setMetaData:function(a,b,c,d){var e=h.datasets[a];e?(e.meta_data=b,h.saveDataSet(a),c&&c(e.meta_data)):d&&d("unknown_dataset "+a,a)},getConfig:function(a,b,c){var d=h.datasets[a];d?b(d.config):c&&c("unknown_dataset "+a,a)},setConfig:function(a,b,c,d){var e=h.datasets[a];if(e){var f=h.setOptions(b);e.config=f,h.saveDataSet(a),c&&c(e.config)}else d&&d("unknown_dataset "+a,a)},stopSync:function(a,b,c){h.setConfig(a,{sync_active:!1},function(){b&&b()},c)},startSync:function(a,b,c){h.setConfig(a,{sync_active:!0},function(){b&&b()},c)},doSync:function(a,b,c){var d=h.datasets[a];d?(d.syncPending=!0,h.saveDataSet(a),b&&b()):c&&c("unknown_dataset "+a,a)},forceSync:function(a,b,c){var d=h.datasets[a];d?(d.syncForced=!0,h.saveDataSet(a),b&&b()):c&&c("unknown_dataset "+a,a)},sortObject:function(a){if("object"!=typeof a||null===a)return a;var b=[];return Object.keys(a).sort().forEach(function(c){b.push({key:c,value:h.sortObject(a[c])})}),b},sortedStringify:function(a){var b="";try{b=JSON.stringify(h.sortObject(a))}catch(c){console.error("Error stringifying sorted object:"+c)}return b},generateHash:function(a){var b=f.SHA1(h.sortedStringify(a));return b.toString()},addPendingObj:function(a,b,c,d,e,f){function g(c){c.hash=c.hash||h.generateHash(c),h.getDataSet(a,function(f){f.pending[c.hash]=c,h.updateDatasetFromLocal(f,c),h.config.auto_sync_local_updates&&(f.syncPending=!0),h.saveDataSet(a),h.doNotify(a,b,h.notifications.LOCAL_UPDATE_APPLIED,d),e(c)},function(a,b){f&&f(a,b)})}h.isOnline(function(c){c||h.doNotify(a,b,h.notifications.OFFLINE_UPDATE,d)});var i={};i.inFlight=!1,i.action=d,i.post=JSON.parse(JSON.stringify(c)),i.postHash=h.generateHash(i.post),i.timestamp=(new Date).getTime(),"create"===d?(i.hash=h.generateHash(i),i.uid=i.hash,g(i)):h.read(a,b,function(a){i.uid=b,i.pre=a.data,i.preHash=h.generateHash(a.data),g(i)},function(a,b){f&&f(a,b)})},syncLoop:function(a){h.getDataSet(a,function(b){b.syncPending=!1,b.syncRunning=!0,b.syncLoopStart=(new Date).getTime(),h.doNotify(a,null,h.notifications.SYNC_STARTED,null),h.isOnline(function(c){c?h.checkHasCustomSync(a,function(){var c={};c.fn="sync",c.dataset_id=a,c.query_params=b.query_params,c.config=b.config,c.meta_data=b.meta_data,c.dataset_hash=b.hash,c.acknowledgements=b.acknowledgements||[];var d=b.pending,e=[];for(var f in d)d[f].inFlight||d[f].crashed||d[f].delayed||(d[f].inFlight=!0,d[f].inFlightDate=(new Date).getTime(),e.push(d[f]));c.pending=e,e.length>0&&h.consoleLog("Starting sync loop - global hash = "+b.hash+" :: params = "+JSON.stringify(c,null,2));try{h.doCloudCall({dataset_id:a,req:c},function(c){function d(c,d,f){if(c)for(var g in c)e=c[g],f.push(e),b.pending[g]&&b.pending[g].inFlight&&(delete b.pending[g],h.doNotify(a,e.uid,d,e))}var e;if(h.updateCrashedInFlightFromNewData(a,b,c),h.updateDelayedFromNewData(a,b,c),h.updateMetaFromNewData(a,b,c),c.updates){var f=[];h.checkUidChanges(b,c.updates.applied),d(c.updates.applied,h.notifications.REMOTE_UPDATE_APPLIED,f),d(c.updates.failed,h.notifications.REMOTE_UPDATE_FAILED,f),d(c.updates.collisions,h.notifications.COLLISION_DETECTED,f),b.acknowledgements=f}c.hash&&c.hash!==b.hash?(h.consoleLog("Local dataset stale - syncing records :: local hash= "+b.hash+" - remoteHash="+c.hash),h.syncRecords(a)):(h.consoleLog("Local dataset up to date"),h.syncComplete(a,"online",h.notifications.SYNC_COMPLETE))},function(c,d){h.markInFlightAsCrashed(b),h.consoleLog("syncLoop failed : msg="+c+" :: err = "+d),h.syncComplete(a,c,h.notifications.SYNC_FAILED)})}catch(g){h.consoleLog("Error performing sync - "+g),h.syncComplete(a,g,h.notifications.SYNC_FAILED)}}):h.syncComplete(a,"offline",h.notifications.SYNC_FAILED)})})},syncRecords:function(a){h.getDataSet(a,function(b){var c=b.data||{},d={};for(var e in c){var f=e,g=c[e].hash;d[f]=g}var i={};i.fn="syncRecords",i.dataset_id=a,i.query_params=b.query_params,i.clientRecs=d,h.consoleLog("syncRecParams :: "+JSON.stringify(i)),h.doCloudCall({dataset_id:a,req:i},function(d){h.consoleLog("syncRecords Res before applying pending changes :: "+JSON.stringify(d)),h.applyPendingChangesToRecords(b,d),h.consoleLog("syncRecords Res after apply pending changes :: "+JSON.stringify(d));var e;if(d.create)for(e in d.create)c[e]={hash:d.create[e].hash,data:d.create[e].data},h.doNotify(a,e,h.notifications.RECORD_DELTA_RECEIVED,"create");if(d.update)for(e in d.update)c[e].hash=d.update[e].hash,c[e].data=d.update[e].data,h.doNotify(a,e,h.notifications.RECORD_DELTA_RECEIVED,"update");if(d["delete"])for(e in d["delete"])delete c[e],h.doNotify(a,e,h.notifications.RECORD_DELTA_RECEIVED,"delete");h.doNotify(a,d.hash,h.notifications.DELTA_RECEIVED,"partial dataset"),b.data=c,d.hash&&(b.hash=d.hash),h.syncComplete(a,"online",h.notifications.SYNC_COMPLETE)},function(b,c){h.consoleLog("syncRecords failed : msg="+b+" :: err="+c),h.syncComplete(a,b,h.notifications.SYNC_FAILED)})})},syncComplete:function(a,b,c){h.getDataSet(a,function(d){d.syncRunning=!1,d.syncLoopEnd=(new Date).getTime(),h.saveDataSet(a),h.doNotify(a,d.hash,c,b)})},applyPendingChangesToRecords:function(a,b){var c=a.pending;for(var d in c)if(c.hasOwnProperty(d)){var e=c[d],f=e.uid;if(b.create){var g=b.create;g&&g[f]&&delete g[f]}if(b.update){var h=b.update;h&&h[f]&&delete h[f]}if(b["delete"]){var i=b["delete"];i&&i[f]&&delete i[f]}}},checkUidChanges:function(a,b){if(b){var c={},d=0;for(var e in b)if(b.hasOwnProperty(e)){var f=b[e],g=f.action;if(g&&"create"===g){var i=f.uid,j=f.hash;d++,h.uid_map[j]=i,c[j]=i;var k=a.data[j];k&&(a.data[i]=k,delete a.data[j]);var l=a.meta[j];l&&(a.meta[i]=l,delete a.meta[j])}}if(d>0)for(var m in a.pending)if(a.pending.hasOwnProperty(m)){var n=a.pending[m],o=n.uid;c[o]&&(n.uid=c[o])}}},checkDatasets:function(){for(var a in h.datasets)if(h.datasets.hasOwnProperty(a)){var b=h.datasets[a];if(b&&!b.syncRunning&&(b.config.sync_active||b.syncForced)){var c=b.syncLoopStart,d=b.syncLoopEnd;if(b.syncForced)b.syncPending=!0;else if(null==c)h.consoleLog(a+" - Performing initial sync"),b.syncPending=!0;else if(null!=d){var e=(new Date).getTime()-d,f=1e3*b.config.sync_frequency;e>f&&(b.syncPending=!0)}b.syncPending&&(b.syncForced=!1,h.syncLoop(a))}}},checkHasCustomSync:function(a,b){var c=h.datasets[a];return c&&c.config?(h.consoleLog("dataset.config.has_custom_sync = "+c.config.has_custom_sync),null!=c.config.has_custom_sync?b():(h.consoleLog("starting check has custom sync"),void d({act:a,req:{fn:"sync"}},function(a){return h.consoleLog("check has_custom_sync - success - ",a),c.config.has_custom_sync=!0,b()},function(a,d){return h.consoleLog("check has_custom_sync - failure - ",d),d.status&&500===d.status?(h.consoleLog("check has_custom_sync - failed with 500, endpoint does exists"),c.config.has_custom_sync=!0):c.config.has_custom_sync=!1,b()}))):b()},doCloudCall:function(a,b,c){var f=!1,g=h.datasets[a.dataset_id];g&&g.config&&(f=g.config.has_custom_sync),f===!0?d({act:a.dataset_id,req:a.req},function(a){b(a)},function(a,b){c(a,b)}):e({path:"/mbaas/sync/"+a.dataset_id,method:"post",data:a.req},function(a){b(a)},function(a,b){c(a,b)})},datasetMonitor:function(){h.checkDatasets(),setTimeout(function(){h.datasetMonitor()},500)},getStorageAdapter:function(a,b,c){var d=function(c,d){var e=(b?"save to":"load from")+" local storage failed msg: "+c+" err: "+d;h.doNotify(a,null,h.notifications.CLIENT_STORAGE_FAILED,e),h.consoleLog(e)};g({fail:d,adapter:h.config.storage_strategy,size:h.config.file_system_quota,backup:h.config.icloud_backup},function(){return c(null,this)})},saveDataSet:function(a,b){h.getDataSet(a,function(c){h.getStorageAdapter(a,!0,function(d,e){e.save({key:"dataset_"+a,val:c},function(){return b?b():void 0})})})},loadDataSet:function(a,b,c){h.getStorageAdapter(a,!1,function(d,e){e.get("dataset_"+a,function(d){if(d&&d.val){var e=d.val;if("string"==typeof e&&(e=JSON.parse(e)),e.initialised=!1,h.datasets[a]=e,h.consoleLog("load from local storage success for dataset_id :"+a),b)return b(e)}else if(c)return c()})})},clearCache:function(a,b){delete h.datasets[a],h.notify_callback_map[a]=null,h.getStorageAdapter(a,!0,function(c,d){d.remove("dataset_"+a,function(){return h.consoleLog("local cache is cleared for dataset : "+a),b?b():void 0})})},updateDatasetFromLocal:function(a,b){var c,d,e=a.pending,f=b.uid;h.consoleLog("updating local dataset for uid "+f+" - action = "+b.action),a.meta[f]=a.meta[f]||{},"create"===b.action&&(a.data[f]&&(h.consoleLog("dataset already exists for uid in create :: "+JSON.stringify(a.data[f])),a.meta[f].fromPending&&(c=a.meta[f].pendingUid,delete e[c])),a.data[f]={}),"update"===b.action&&a.data[f]&&a.meta[f].fromPending&&(h.consoleLog("updating an existing pending record for dataset :: "+JSON.stringify(a.data[f])),c=a.meta[f].pendingUid,d=e[c],d&&(d.inFlight?(h.consoleLog("existing in-inflight pending record = "+JSON.stringify(d)),b.delayed=!0,b.waiting=d.hash):(h.consoleLog("existing pre-flight pending record = "+JSON.stringify(d)),d.post=b.post,d.postHash=b.postHash,delete e[b.hash],b.hash=c))),"delete"===b.action&&a.data[f]&&(a.meta[f].fromPending&&(h.consoleLog("Deleting an existing pending record for dataset :: "+JSON.stringify(a.data[f])),c=a.meta[f].pendingUid,d=e[c],d&&(d.inFlight?(h.consoleLog("existing in-inflight pending record = "+JSON.stringify(d)),b.delayed=!0,b.waiting=d.hash):(h.consoleLog("existing pending record = "+JSON.stringify(d)),"create"===d.action&&(delete e[b.hash],delete e[c]),"update"===d.action&&(b.pre=d.pre,b.preHash=d.preHash,b.inFlight=!1,delete e[c])))),delete a.data[f]),a.data[f]&&(a.data[f].data=b.post,a.data[f].hash=b.postHash,a.meta[f].fromPending=!0,a.meta[f].pendingUid=b.hash)},updateCrashedInFlightFromNewData:function(a,b,c){var d,e,f=({applied:h.notifications.REMOTE_UPDATE_APPLIED,failed:h.notifications.REMOTE_UPDATE_FAILED,collisions:h.notifications.COLLISION_DETECTED},b.pending);if(f){for(d in f)if(f.hasOwnProperty(d)&&(e=f[d],e.inFlight&&e.crashed))if(h.consoleLog("updateCrashedInFlightFromNewData - Found crashed inFlight pending record uid="+e.uid+" :: hash="+e.hash),c&&c.updates&&c.updates.hashes){var g=c.updates.hashes[d];g||(e.crashedCount?e.crashedCount++:e.crashedCount=1)}else e.crashedCount?e.crashedCount++:e.crashedCount=1;for(d in f)f.hasOwnProperty(d)&&(e=f[d],e.inFlight&&e.crashed&&e.crashedCount>b.config.crashed_count_wait&&(h.consoleLog("updateCrashedInFlightFromNewData - Crashed inflight pending record has reached crashed_count_wait limit : "+JSON.stringify(e)),h.consoleLog("updateCrashedInFlightFromNewData - Retryig crashed inflight pending record"),e.crashed=!1,e.inFlight=!1))}},updateDelayedFromNewData:function(a,b,c){var d,e,f=b.pending;if(f)for(d in f)if(f.hasOwnProperty(d)&&(e=f[d],e.delayed&&e.waiting&&(h.consoleLog("updateDelayedFromNewData - Found delayed pending record uid="+e.uid+" :: hash="+e.hash+" :: waiting="+e.waiting),c&&c.updates&&c.updates.hashes))){var g=c.updates.hashes[e.waiting];g&&(h.consoleLog("updateDelayedFromNewData - Waiting pending record is resolved rec="+JSON.stringify(g)),e.delayed=!1,e.waiting=void 0)}},updateMetaFromNewData:function(a,b,c){var d=b.meta;if(d&&c&&c.updates&&c.updates.hashes)for(var e in d)if(d.hasOwnProperty(e)){var f=d[e],g=f.pendingUid;h.consoleLog("updateMetaFromNewData - Found metadata with uid = "+e+" :: pendingHash = "+g);var i=!0;if(g){i=!1;var j=c.updates.hashes[g];j&&(h.consoleLog("updateMetaFromNewData - Found pendingUid in meta data resolved - resolved = "+JSON.stringify(j)),f.pendingUid=void 0,i=!0)}i&&(h.consoleLog("updateMetaFromNewData - both previous and current pendings are resolved for meta data with uid "+e+". Delete it."),delete d[e])}},markInFlightAsCrashed:function(a){var b,c,d=a.pending;if(d){var e={};for(b in d)d.hasOwnProperty(b)&&(c=d[b],c.inFlight&&(h.consoleLog("Marking in flight pending record as crashed : "+b),c.crashed=!0,e[c.uid]=c))}},consoleLog:function(a){h.config.do_console_log&&console.log(a)}};!function(){h.config=h.defaults}(),b.exports={init:h.init,manage:h.manage,notify:h.notify,doList:h.list,doCreate:h.create,doRead:h.read,doUpdate:h.update,doDelete:h["delete"],listCollisions:h.listCollisions,removeCollision:h.removeCollision,getPending:h.getPending,clearPending:h.clearPending,getDataset:h.getDataSet,getQueryParams:h.getQueryParams,setQueryParams:h.setQueryParams,getMetaData:h.getMetaData,setMetaData:h.setMetaData,getConfig:h.getConfig,setConfig:h.setConfig,startSync:h.startSync,stopSync:h.stopSync,doSync:h.doSync,forceSync:h.forceSync,generateHash:h.generateHash,loadDataSet:h.loadDataSet,checkHasCustomSync:h.checkHasCustomSync,clearCache:h.clearCache}},{"../../libs/generated/crypto":1,"../../libs/generated/lawnchair":2,"./api_act":22,"./api_cloud":24}],51:[function(a,b,c){b.exports={createUUID:function(){for(var a=[],b="0123456789ABCDEF",c=0;32>c;c++)a[c]=b.substr(Math.floor(16*Math.random()),1);a[12]="4",a[16]=b.substr(3&a[16]|8,1);var d=a.join("");return d}}},{}],52:[function(a,b,c){var d,e=a("./initializer"),f=a("./events"),g=a("./hosts"),h=a("./constants"),i=a("./logger"),j=a("./data"),k=a("./fhparams"),l=!1,m=!1,n=null,o=function(a){if(m)return a(null,{host:q()});if(f.once(h.INIT_EVENT,function(b,c){return a(b,c)}),!l){l=!0;var b=function(){j.sessionManager.read(function(a,b){b&&b.sessionToken&&k.setAuthSessionToken(b.sessionToken),e.init(function(a,b){return l=!1,a?(n=a,f.emit(h.INIT_EVENT,a)):(n=null,m=!0,d=new g(b.cloud),f.emit(h.INIT_EVENT,null,{host:q()}))})})};"undefined"!=typeof window.cordova||"undefined"!=typeof window.phonegap?document.addEventListener("deviceready",b,!1):b()}},p=function(){return d},q=function(){if("undefined"!=typeof d){var b=a("./appProps").getAppProps();return d.getHost(b.mode)}return void 0},r=function(){return m},s=function(){return n},t=function(){m=!1,l=!1,d=void 0,n=void 0,o(function(){})};o(function(a,b){a?"app_config_missing"!==a.message?i.error("Failed to initialise fh."):i.info("No fh config file"):i.info("fh cloud is ready")}),b.exports={ready:o,isReady:r,getCloudHost:p,getCloudHostUrl:q,getInitError:s,reset:t}},{"./appProps":29,"./constants":31,"./data":33,"./events":35,"./fhparams":36,"./hosts":38,"./initializer":39,"./logger":42}]},{},[19])(19)});